PROJECT CONTEXT

================
DIRECTORY STRUCTURE
================

kiddo
â”œâ”€â”€ README.md
â”œâ”€â”€ backend
â”‚   â””â”€â”€ api-docs.md
â”œâ”€â”€ eslint.config.js
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ api
â”‚   â”œâ”€â”€ api-chat-details.ts
â”‚   â”œâ”€â”€ api-chat.ts
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ assets
â”‚   â”‚   â”œâ”€â”€ fonts
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh 3.1 Help Fa.pdf
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh 3.1 Licenses.pdf
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh Family
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ otf
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ttf
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ webfonts
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh NoEn
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ otf
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ttf
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ webfonts
â”‚   â”‚   â”‚   â””â”€â”€ YekanBakhFaNum
â”‚   â”‚   â”‚       â”œâ”€â”€ otf
â”‚   â”‚   â”‚       â”œâ”€â”€ ttf
â”‚   â”‚   â”‚       â””â”€â”€ webfonts
â”‚   â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”‚   â”œâ”€â”€ DarsYar.png
â”‚   â”‚   â”‚   â”œâ”€â”€ book.png
â”‚   â”‚   â”‚   â”œâ”€â”€ farsi.png
â”‚   â”‚   â”‚   â”œâ”€â”€ happyFace.png
â”‚   â”‚   â”‚   â”œâ”€â”€ header.png
â”‚   â”‚   â”‚   â”œâ”€â”€ hediye.png
â”‚   â”‚   â”‚   â”œâ”€â”€ heroSection.png
â”‚   â”‚   â”‚   â”œâ”€â”€ konjkav.png
â”‚   â”‚   â”‚   â”œâ”€â”€ logos
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ alienLogo.png
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ emojiLogo.png
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rocketLogo.png
â”‚   â”‚   â”‚   â”œâ”€â”€ oloom.png
â”‚   â”‚   â”‚   â”œâ”€â”€ regularBook.png
â”‚   â”‚   â”‚   â””â”€â”€ riazi.png
â”‚   â”‚   â””â”€â”€ react.svg
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ RecentChats.tsx
â”‚   â”‚   â”œâ”€â”€ common
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatButton.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DisableChatButton.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RecentChatCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Toast.tsx
â”‚   â”‚   â””â”€â”€ login
â”‚   â”œâ”€â”€ constants
â”‚   â”‚   â””â”€â”€ studyAssistantConstant.ts
â”‚   â”œâ”€â”€ hooks
â”‚   â”‚   â”œâ”€â”€ useChatSessions.ts
â”‚   â”‚   â””â”€â”€ useClientInfo.ts
â”‚   â”œâ”€â”€ index.css
â”‚   â”œâ”€â”€ layout
â”‚   â”‚   â””â”€â”€ ClassLayout.tsx
â”‚   â”œâ”€â”€ login
â”‚   â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”‚   â”œâ”€â”€ InputGroup.tsx
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â””â”€â”€ LoginButton.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ router
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”œâ”€â”€ slice
â”‚   â”‚   â”œâ”€â”€ chatSlice.ts
â”‚   â”‚   â”œâ”€â”€ darsyarSlice.ts
â”‚   â”‚   â”œâ”€â”€ konjkavSlice.ts
â”‚   â”‚   â”œâ”€â”€ tarkibkonSlice.ts
â”‚   â”‚   â””â”€â”€ userSlice.ts
â”‚   â”œâ”€â”€ store
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ student
â”‚   â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”‚   â”œâ”€â”€ darsYar
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chatWithBot
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lessonSelection
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ studyAssistant
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ studySelection
â”‚   â”‚   â”‚   â”œâ”€â”€ home
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecentItem.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ToolCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ konjKav
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chatWithBot
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ recentChat
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ studySelection
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ topicSelection
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ welcome
â”‚   â”‚   â”‚   â””â”€â”€ tarkibKon
â”‚   â”‚   â”‚       â”œâ”€â”€ favoriteTopic
â”‚   â”‚   â”‚       â”œâ”€â”€ learnTopic
â”‚   â”‚   â”‚       â”œâ”€â”€ studySelection
â”‚   â”‚   â”‚       â””â”€â”€ welcome
â”‚   â”‚   â””â”€â”€ pages
â”‚   â”‚       â”œâ”€â”€ StudentHome.tsx
â”‚   â”‚       â”œâ”€â”€ darsYar
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarChatWithBot.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarLessonSelection.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarRecentChat.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarStudyAssistant.tsx
â”‚   â”‚       â”‚   â””â”€â”€ DarsyarStudySelection.tsx
â”‚   â”‚       â”œâ”€â”€ konjKav
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavRecentChat.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavStudySelection.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavTopicBot.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavTopicSelection.tsx
â”‚   â”‚       â”‚   â””â”€â”€ KonjkavWelcome.tsx
â”‚   â”‚       â””â”€â”€ tarkibKon
â”‚   â”‚           â”œâ”€â”€ TarkibkonChatBot.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonFavoriteTopic.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonLearnTopic.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonRecentChat.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonStudySelection.tsx
â”‚   â”‚           â””â”€â”€ TarkibkonWelcome.tsx
â”‚   â”œâ”€â”€ teacher
â”‚   â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”‚   â”œâ”€â”€ contentContainer
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentAlert.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ reports
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ students
â”‚   â”‚   â”‚   â””â”€â”€ home
â”‚   â”‚   â”‚       â”œâ”€â”€ Classes.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ ProgressQuestion.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ RecentChat.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ToolCard.tsx
â”‚   â”‚   â””â”€â”€ pages
â”‚   â”‚       â”œâ”€â”€ ClassChat.tsx
â”‚   â”‚       â”œâ”€â”€ ContentContainer.tsx
â”‚   â”‚       â”œâ”€â”€ ReportsPage.tsx
â”‚   â”‚       â””â”€â”€ TeacherHome.tsx
â”‚   â”œâ”€â”€ types
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â””â”€â”€ state.ts
â”‚   â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ tsconfig.app.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ watch-context.js

================
FILE: package.json
================

```
{
  "name": "kiddo-project",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@react-spring/web": "^10.0.1",
    "@reduxjs/toolkit": "^2.8.2",
    "@tailwindcss/vite": "^4.1.11",
    "@tanstack/react-query": "^5.82.0",
    "@use-gesture/react": "^10.3.1",
    "axios": "^1.10.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-draggable": "^4.5.0",
    "react-redux": "^9.2.0",
    "react-router-dom": "^7.6.3",
    "tailwindcss": "^4.1.11"
  },
  "devDependencies": {
    "@eslint/js": "^9.21.0",
    "@types/react": "^19.0.10",
    "@types/react-dom": "^19.0.4",
    "@vitejs/plugin-react": "^4.3.4",
    "chokidar": "^4.0.3",
    "eslint": "^9.21.0",
    "eslint-plugin-react-hooks": "^5.1.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "glob": "^11.0.3",
    "globals": "^15.15.0",
    "tree-node-cli": "^1.6.0",
    "typescript": "~5.7.2",
    "typescript-eslint": "^8.24.1",
    "vite": "^6.2.0"
  }
}

```

================
FILE: tsconfig.json
================

```
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}

```

================
FILE: README.md
================

```
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/README.md) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default tseslint.config({
  extends: [
    // Remove ...tseslint.configs.recommended and replace with this
    ...tseslint.configs.recommendedTypeChecked,
    // Alternatively, use this for stricter rules
    ...tseslint.configs.strictTypeChecked,
    // Optionally, add this for stylistic rules
    ...tseslint.configs.stylisticTypeChecked,
  ],
  languageOptions: {
    // other options...
    parserOptions: {
      project: ['./tsconfig.node.json', './tsconfig.app.json'],
      tsconfigRootDir: import.meta.dirname,
    },
  },
})
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default tseslint.config({
  plugins: {
    // Add the react-x and react-dom plugins
    'react-x': reactX,
    'react-dom': reactDom,
  },
  rules: {
    // other rules...
    // Enable its recommended typescript rules
    ...reactX.configs['recommended-typescript'].rules,
    ...reactDom.configs.recommended.rules,
  },
})
```
#   k i d d o  
 
```

================
FILE: src\vite-env.d.ts
================

```
/// <reference types="vite/client" />

```

================
FILE: src\main.tsx
================

```
// src/main.tsx
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import { RouterProvider } from 'react-router-dom'
import { router } from './router' // Removed App import as it's handled by router
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { Provider } from 'react-redux'
import { store } from './store'
import { setupAxiosInterceptors } from './api' // Import the setup function

// Call the setup function once when the app starts
setupAxiosInterceptors();

const queryClient = new QueryClient();

createRoot(document.getElementById('root')!).render(
  <StrictMode>
     <QueryClientProvider client={queryClient}>
      <Provider store={store}>
        <RouterProvider router={router}/>
      </Provider>
    </QueryClientProvider>
  </StrictMode>,
)
```

================
FILE: src\index.css
================

```
@import "tailwindcss";

@font-face {
  font-family: "YekanBakh";
  src: url("./assets/fonts/YekanBakhFaNum/webfonts/woff/YekanBakhFaNum-Regular.woff")
    format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "YekanBakhText";
  src: url("./assets/fonts/YekanBakhFaNum/webfonts/woff2/YekanBakhFaNum-ExtraBlack.woff2")
    format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@theme {
  --color-custom-purple: rgba(98, 72, 255, 1);
  --color-custom-orange-1: rgba(255, 107, 72, 1);
  --color-custom-orange-2: rgba(254, 76, 74, 1);
  --color-backGround-1: #f1f0ee;
  --color-borderColor-1: #dcdcdc;
  --color-chatButton-1: #6248ff;
  --color-backGroundButton: #4432b3;
  --color-backGroundCard: #f2efff;

  /* Declare your custom font here */
  --font-yekanBakh: YekanBakh, sans-serif;
  --font-yekanBakhText: YekanBakhText, sans-serif;

  /* Your gradients are CSS variables, which is fine, but they don't directly create utility classes */
  --gradient-border-main: linear-gradient(
    to right,
    var(--color-custom-purple),
    var(--color-custom-orange-1)
  );
  --gradient-border-alt: linear-gradient(
    135deg,
    var(--color-custom-purple) 0%,
    var(--color-custom-orange-2) 100%
  );
}

.image-with-border {
  border: 2px solid #3498db; /* 2px solid blue border */
  padding: 5px; /* Optional: adds space between the image and the border */
  border-radius: 8px; /* Optional: rounds the corners of the border */
}
.card-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #dcdcdc;
  border-radius: 24px;
}
.buttonClicked-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #dcdcdc;
  border-radius: 18px;
}
.chat-button {
  background-color: #4432b3;


  padding-bottom: 4px;
  border-radius: 20px;
}
.button-box {
 
  background-color: #6248ff;
  border-radius: 16px;
}
.disableButton-box {
 
  background-color: #dcdcdc;
  border-radius: 16px;
}
.disableChat-button {
  background-color: white;
  
  padding-bottom: 4px;
  border-radius: 20px;
}
.onClickedCard-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #6248ff;
  border-radius: 24px;
}
.onClickedButton-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #6248ff;
  border-radius: 18px;
}
.alert-box{
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #FE4C4A;
  border-radius: 18px;
}

.infoGradient {
  background-image: linear-gradient(
    to left,
    rgba(98, 72, 255, 0.1),
    /* #6248FF with 10% opacity */ rgba(254, 76, 74, 0.1),
    /* #FE4C4A with 10% opacity */ rgba(255, 107, 72, 0.1)
      /* #FF6B48 with 10% opacity */
  );
}

```

================
FILE: src\App.tsx
================

```




import { Outlet } from 'react-router-dom'


function App() {

  return (
    <div className='font-yekanBakh'>
    
<Outlet/>

    </div>
  )
}

export default App

```

================
FILE: src\api.ts
================

```
// src/api.ts
import axios, { AxiosError } from 'axios';
import { router } from './router'; // Import router for navigation
import { store } from './store'; // Import store to dispatch actions
import { clearUser } from './slice/userSlice'; // Import the action to clear user data

const API_BASE_URL = 'https://kiddo2.pythonanywhere.com';

interface LoginResponse {
  token: string;
  user: {
    id: string;
    username: string;
    first_name: string;
    last_name: string;
    role: 'STUDENT' | 'STAFF';
  };
}

export const login = async (username: string, password: string): Promise<LoginResponse> => {
  console.log("API CALL: login", { username });
  try {
    const response = await axios.post<LoginResponse>(`${API_BASE_URL}/api/v1/accounts/login/`, {
      username,
      password,
    });
    // Store token for future requests
    axios.defaults.headers.common['Authorization'] = `Token ${response.data.token}`;
    console.log("API RESPONSE: login success", response.data.user);
    return response.data;
  } catch (error) {
    const axiosError = error as AxiosError;
     console.error("API ERROR: login", axiosError.response?.data);
    if (axiosError.response?.status === 400) { // Django REST Framework returns 400 for bad credentials
      throw new Error('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
    }
    throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
  }
};

// This function sets up the global interceptor
export const setupAxiosInterceptors = () => {
  axios.interceptors.response.use(
    // On successful response, just return it
    (response) => response,
    // On error, check for 401
    (error: AxiosError) => {
      if (error.response?.status === 401) {
        console.log('Global 401 Unauthorized error detected. Logging out and redirecting.');
        // Clear user data from Redux
        store.dispatch(clearUser());
        // Clear auth header
        delete axios.defaults.headers.common['Authorization'];
        // Redirect to login page
        router.navigate('/');
      }
      // Important: return the error so that the original caller (e.g., useQuery) can handle it too
      return Promise.reject(error);
    }
  );
};
```

================
FILE: src\api-chat.ts
================

```
// src/api-chat.ts
import axios from 'axios';
import { ApiMessage, ChatSession } from './types/api';

const API_BASE_URL = 'https://kiddo2.pythonanywhere.com/api/v1';

// Remember that the auth token is set globally in api.ts after login

/**
 * Starts a new DarsYar chat session.
 * @param subjectId The ID of the selected subject.
 * @param chapterIds An array of chapter IDs.
 * @returns The newly created chat session.
 */
export const startDarsYarSession = async (subjectId: string, chapterIds: string[]): Promise<ChatSession> => {
  console.log('API CALL: startDarsYarSession', { subjectId, chapterIds });
  try {
    const response = await axios.post<ChatSession>(`${API_BASE_URL}/tools/dars-yar/start/`, {
      subject_id: subjectId,
      chapter_ids: chapterIds,
    });
    console.log('API RESPONSE: startDarsYarSession', response.data);
    return response.data;
  } catch (error) {
    console.error('API ERROR: startDarsYarSession', error);
    throw error;
  }
};

/**
 * Starts a new Konjkav Sho chat session.
 * @param subjectId The ID of the selected subject.
 * @param initialTopic The initial topic from the user.
 * @returns The newly created chat session.
 */
export const startKonjkavSession = async (subjectId: string, initialTopic: string): Promise<ChatSession> => {
    console.log('API CALL: startKonjkavSession', { subjectId, initialTopic });
    try {
        const response = await axios.post<ChatSession>(`${API_BASE_URL}/tools/konjkav-sho/start/`, {
            subject_id: subjectId,
            initial_topic: initialTopic,
        });
        console.log('API RESPONSE: startKonjkavSession', response.data);
        return response.data;
    } catch (error) {
        console.error('API ERROR: startKonjkavSession', error);
        throw error;
    }
};

/**
 * Starts a new Tarkib Kon chat session.
 * @param subjectId The ID of the selected subject.
 * @param topic The topic to learn.
 * @param theme The theme for the explanation.
 * @returns The newly created chat session.
 */
export const startTarkibkonSession = async (subjectId: string, topic: string, theme: string): Promise<ChatSession> => {
    console.log('API CALL: startTarkibkonSession', { subjectId, topic, theme });
    try {
        const response = await axios.post<ChatSession>(`${API_BASE_URL}/tools/tarkib-kon/start/`, {
            subject_id: subjectId,
            topic: topic,
            theme: theme,
        });
        console.log('API RESPONSE: startTarkibkonSession', response.data);
        return response.data;
    } catch (error) {
        console.error('API ERROR: startTarkibkonSession', error);
        throw error;
    }
};

/**
 * Sends a message to an existing chat session.
 * @param sessionId The ID of the chat session.
 * @param content The text of the message to send.
 * @returns The message object created for the user.
 */
export const sendMessage = async (sessionId: string, content: string): Promise<ApiMessage> => {
  console.log('API CALL: sendMessage', { sessionId, content });
  try {
    const response = await axios.post<ApiMessage>(`${API_BASE_URL}/chat/sessions/${sessionId}/messages/`, {
      content,
    });
    console.log('API RESPONSE: sendMessage', response.data);
    return response.data;
  } catch (error) {
    console.error('API ERROR: sendMessage', error);
    throw error;
  }
};

/**
 * Fetches the details and all messages for a given session.
 * @param sessionId The ID of the chat session.
 * @returns The full session details with all messages.
 */
export const getSessionDetails = async (sessionId: string): Promise<ChatSession> => {
  console.log('API CALL: getSessionDetails', { sessionId });
  try {
    const response = await axios.get<ChatSession>(`${API_BASE_URL}/chat/sessions/${sessionId}/`);
    console.log('API RESPONSE: getSessionDetails', response.data);
    return response.data;
  } catch(error) {
    console.error('API ERROR: getSessionDetails', error);
    throw error;
  }
}
```

================
FILE: src\api-chat-details.ts
================

```

```

================
FILE: backend\api-docs.md
================

```
# Ù…Ø³ØªÙ†Ø¯Ø§Øª API Ú©ÛŒØ¯Ùˆ

## ÙÙ‡Ø±Ø³Øª
- [Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª](#Ø§Ø­Ø±Ø§Ø²-Ù‡ÙˆÛŒØª)
- [Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯Ùˆ](#Ù…Ø¯ÛŒØ±ÛŒØª-Ø¬Ù„Ø³Ø§Øª-Ú¯ÙØªÚ¯Ùˆ)
- [Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ](#Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ-Ø¢Ù…ÙˆØ²Ø´ÛŒ)
- [Ù¾Ù†Ù„ Ú©Ø§Ø±Ú©Ù†Ø§Ù†](#Ù¾Ù†Ù„-Ú©Ø§Ø±Ú©Ù†Ø§Ù†)
- [Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§](#Ú©Ø¯Ù‡Ø§ÛŒ-Ø®Ø·Ø§)

## Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª

ØªÙ…Ø§Ù…ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ù‡ API (Ø¨Ù‡ Ø¬Ø² Login) Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆÚ©Ù† Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ø§Ø±Ù†Ø¯. ØªÙˆÚ©Ù† Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù‡Ø¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø´Ú©Ù„ Ø²ÛŒØ± Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯:

```
Authorization: Token YOUR_TOKEN_HERE
```

### ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
`POST /api/v1/accounts/login/`

Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù†.

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "username": "student_user",
    "password": "password123"
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "token": "9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b",
    "user": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "username": "student_user",
        "first_name": "Ø³Ø§Ø±Ø§",
        "last_name": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
        "role": "STUDENT"
    }
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `401 Unauthorized`: Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- `400 Bad Request`: ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯

### Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
`POST /api/v1/accounts/logout/`

Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ùˆ Ø¨Ø§Ø·Ù„ Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù† ÙØ¹Ù„ÛŒ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
- `204 No Content`

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ
`GET /api/v1/accounts/me/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "username": "student_user",
    "first_name": "Ø³Ø§Ø±Ø§",
    "last_name": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
    "role": "STUDENT"
}
```

## Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯Ùˆ

### Ù„ÛŒØ³Øª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯Ùˆ
`GET /api/v1/chat/sessions/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "tool": "DARS_YAR",
        "title": "Ø¯Ø±Ø³ ÛŒØ§Ø± on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
        "subject": "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
        "updated_at": "2025-07-10T12:00:00Z"
    }
]
```

### Ø¬Ø²Ø¦ÛŒØ§Øª ÛŒÚ© Ø¬Ù„Ø³Ù‡
`GET /api/v1/chat/sessions/{session_id}/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù…Ù„ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ú¯ÙØªÚ¯Ùˆ Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "tool": "DARS_YAR",
    "title": "Ø¯Ø±Ø³ ÛŒØ§Ø± on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "SYSTEM",
            "content": "CONTEXT:\n--- Ù…ØªÙ† Ø§Ø² ÙØµÙ„: Ø§ØªÙ…â€ŒÙ‡Ø§ ---\nÙ…Ø­ØªÙˆØ§ÛŒ ÙØµÙ„...",
            "timestamp": "2025-07-10T12:00:00Z"
        },
        {
            "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
            "sender_type": "USER",
            "content": "Ø§ØªÙ… Ú†ÛŒØ³ØªØŸ",
            "timestamp": "2025-07-10T12:01:00Z"
        },
        {
            "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
            "sender_type": "AI",
            "content": "Ø§ØªÙ… Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† Ø°Ø±Ù‡...",
            "timestamp": "2025-07-10T12:01:01Z",
            "raw_ai_response": {
                "answer": "Ø§ØªÙ… Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† Ø°Ø±Ù‡...",
                "student_mood": {
                    "emoji": "ğŸ¤”",
                    "text": "Ú©Ù†Ø¬Ú©Ø§Ùˆ"
                }
            }
        }
    ]
}
```

### Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¯Ø± Ø¬Ù„Ø³Ù‡
`POST /api/v1/chat/sessions/{session_id}/messages/`

Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø¯Ø± ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ú¯ÙØªÚ¯Ùˆ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "content": "Ø³ÙˆØ§Ù„ Ù…Ù† Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø§ØªÙ…â€ŒÙ‡Ø§ Ø§ÛŒÙ† Ø§Ø³Øª..."
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
    "sender_type": "USER",
    "content": "Ø³ÙˆØ§Ù„ Ù…Ù† Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø§ØªÙ…â€ŒÙ‡Ø§ Ø§ÛŒÙ† Ø§Ø³Øª...",
    "timestamp": "2025-07-10T12:01:00Z"
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `404 Not Found`: Ø¬Ù„Ø³Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯
- `403 Forbidden`: Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø§ÛŒÙ† Ø¬Ù„Ø³Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯
- `400 Bad Request`: Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ§Ù… Ø®Ø§Ù„ÛŒ Ø§Ø³Øª

## Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ Ø¯Ø±Ø³â€ŒÛŒØ§Ø±
`POST /api/v1/tools/dars-yar/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± Ø¯Ø±Ø³â€ŒÛŒØ§Ø±.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "chapter_ids": [
        "7d793789-c00c-4c91-99fb-89e1ba7562e4",
        "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b"
    ]
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "DARS_YAR",
    "title": "Ø¯Ø±Ø³ ÛŒØ§Ø± on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "SYSTEM",
            "content": "CONTEXT:\n--- Ù…ØªÙ† Ø§Ø² ÙØµÙ„: Ø§ØªÙ…â€ŒÙ‡Ø§ ---\nÙ…Ø­ØªÙˆØ§ÛŒ ÙØµÙ„...",
            "timestamp": "2025-07-10T12:00:00Z"
        }
    ]
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `400 Bad Request`: 
  - Ø¯Ø±Ø³ ÛŒØ§ ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù‡Ø³ØªÙ†Ø¯
  - ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø¯Ø±Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†ÛŒØ³ØªÙ†Ø¯
  - Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¯Ø±Ø³ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯
- `403 Forbidden`: Ú©Ø§Ø±Ø¨Ø± Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø±Ø§ Ù†Ø¯Ø§Ø±Ø¯

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø²
`POST /api/v1/tools/azmoon-saz/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø².

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "chapter_ids": ["7d793789-c00c-4c91-99fb-89e1ba7562e4"],
    "difficulty": "Ù…ØªÙˆØ³Ø·",
    "num_questions": 10
}
```

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:**
- `difficulty`: ÛŒÚ©ÛŒ Ø§Ø² Ù…Ù‚Ø§Ø¯ÛŒØ± "Ø¢Ø³Ø§Ù†"ØŒ "Ù…ØªÙˆØ³Ø·" ÛŒØ§ "Ø³Ø®Øª"
- `num_questions`: ÛŒÚ©ÛŒ Ø§Ø² Ù…Ù‚Ø§Ø¯ÛŒØ± 5ØŒ 10 ÛŒØ§ 20

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "AZMOON_SAZ",
    "title": "Ø¢Ø²Ù…ÙˆÙ† Ø³Ø§Ø² on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "SYSTEM",
            "content": "CONTEXT:\n--- Ù…ØªÙ† Ø§Ø² ÙØµÙ„: Ø§ØªÙ…â€ŒÙ‡Ø§ ---\nÙ…Ø­ØªÙˆØ§ÛŒ ÙØµÙ„...",
            "timestamp": "2025-07-10T12:00:00Z"
        },
        {
            "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
            "sender_type": "SYSTEM",
            "content": "Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡ØŒ Ù„Ø·ÙØ§Ù‹ 10 Ø³ÙˆØ§Ù„ Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ÛŒ 'Ù…ØªÙˆØ³Ø·' Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†.",
            "timestamp": "2025-07-10T12:00:01Z"
        },
        {
            "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
            "sender_type": "AI",
            "content": "Ø¨Ø³ÛŒØ§Ø± Ø®Ø¨! Ø§ÛŒÙ† Ù‡Ù… Ø¢Ø²Ù…ÙˆÙ† Ø´Ù…Ø§:",
            "timestamp": "2025-07-10T12:00:02Z",
            "raw_ai_response": {
                "questions": [
                    {
                        "question_text": "Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§ØªÙ… Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ",
                        "options": ["Ú¯Ø²ÛŒÙ†Ù‡ 1", "Ú¯Ø²ÛŒÙ†Ù‡ 2", "Ú¯Ø²ÛŒÙ†Ù‡ 3", "Ú¯Ø²ÛŒÙ†Ù‡ 4"],
                        "correct_answer": "Ú¯Ø²ÛŒÙ†Ù‡ 2"
                    }
                ]
            }
        }
    ]
}
```

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ
`POST /api/v1/tools/konjkav-sho/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "initial_topic": "Ú†Ø±Ø§ Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø§Ø³ØªØŸ"
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "KONJKAV_SHO",
    "title": "Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "USER",
            "content": "Ú†Ø±Ø§ Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø§Ø³ØªØŸ",
            "timestamp": "2025-07-10T12:00:00Z"
        },
        {
            "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
            "sender_type": "AI",
            "content": "Ø¢Ø³Ù…Ø§Ù† Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù¾Ø±Ø§Ú©Ù†Ø¯Ú¯ÛŒ Ù†ÙˆØ±...",
            "timestamp": "2025-07-10T12:00:01Z",
            "raw_ai_response": {
                "explanation": "Ø¢Ø³Ù…Ø§Ù† Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù¾Ø±Ø§Ú©Ù†Ø¯Ú¯ÛŒ Ù†ÙˆØ±...",
                "follow_up_questions": [
                    "Ú†Ø±Ø§ Ø¯Ø± ØºØ±ÙˆØ¨ Ø¢Ø³Ù…Ø§Ù† Ù‚Ø±Ù…Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ",
                    "Ø¢ÛŒØ§ Ø¯Ø± Ù…Ø§Ù‡ Ù‡Ù… Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø§Ø³ØªØŸ",
                    "Ù†ÙˆØ± Ú†Ú¯ÙˆÙ†Ù‡ Ø¯Ø± Ø¬Ùˆ Ù¾Ø±Ø§Ú©Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ"
                ],
                "student_mood": {
                    "emoji": "ğŸ¤”",
                    "text": "Ú©Ù†Ø¬Ú©Ø§Ùˆ"
                }
            }
        }
    ]
}
```

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ ØªØ±Ú©ÛŒØ¨ Ú©Ù†
`POST /api/v1/tools/tarkib-kon/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± ØªØ±Ú©ÛŒØ¨ Ú©Ù†.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "topic": "Ø§Ù‡Ø±Ù…â€ŒÙ‡Ø§",
    "theme": "Ù…Ø§ÛŒÙ†Ú©Ø±ÙØª"
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "TARKIB_KON",
    "title": "ØªØ±Ú©ÛŒØ¨ Ú©Ù† on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "USER",
            "content": "Ù…ÙˆØ¶ÙˆØ¹ Â«Ø§Ù‡Ø±Ù…â€ŒÙ‡Ø§Â» Ø±Ø§ Ø¯Ø± ÙØ¶Ø§ Ùˆ Ù„Ø­Ù† Â«Ù…Ø§ÛŒÙ†Ú©Ø±ÙØªÂ» ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯Ù‡.",
            "timestamp": "2025-07-10T12:00:00Z"
        }
    ]
}
```

## Ù¾Ù†Ù„ Ú©Ø§Ø±Ú©Ù†Ø§Ù†

### Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
`GET /api/v1/academics/classes/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ø³Ù‡ Ú©Ø§Ø±Ù…Ù†Ø¯.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "Ø´Ø´Ù… - Ø§Ù„Ù",
        "grade_level": 6
    }
]
```

### Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ú©Ù„Ø§Ø³
`GET /api/v1/academics/classes/{class_id}/students/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† ÛŒÚ© Ú©Ù„Ø§Ø³.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "full_name": "Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
        "last_activity_at": "2025-07-10T12:00:00Z",
        "activity_status": "Active",
        "current_mood": {
            "emoji": "ğŸ¤”",
            "text": "Ú©Ù†Ø¬Ú©Ø§Ùˆ"
        }
    }
]
```

### Ù„ÛŒØ³Øª Ùˆ ÙÛŒÙ„ØªØ± Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
`GET /api/v1/chat/events/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù…Ø¯Ø±Ø³Ù‡.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query:**
- `level`: ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø·Ø­ Ø±ÙˆÛŒØ¯Ø§Ø¯ (INFO, CONCERN, DANGER)
- `is_resolved`: ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ¶Ø¹ÛŒØª Ø±Ø³ÛŒØ¯Ú¯ÛŒ (true/false)

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "student_name": "Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
        "overview": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù†Ú¯Ø±Ø§Ù†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯",
        "emoji": "ğŸš¨",
        "level": "DANGER",
        "subject_name": "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
        "created_at": "2025-07-10T12:00:00Z",
        "is_resolved": false
    }
]
```

### Ø¬Ø²Ø¦ÛŒØ§Øª Ø±ÙˆÛŒØ¯Ø§Ø¯
`GET /api/v1/chat/events/{event_id}/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù…Ù„ ÛŒÚ© Ø±ÙˆÛŒØ¯Ø§Ø¯.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "student_name": "Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
    "overview": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù†Ú¯Ø±Ø§Ù†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯",
    "emoji": "ğŸš¨",
    "level": "DANGER",
    "subject_name": "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "created_at": "2025-07-10T12:00:00Z",
    "is_resolved": false,
    "explanation": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø§Ø² Ø¹Ø¨Ø§Ø±Øª 'Ø®Ø·Ø±Ù†Ø§Ú©' Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø§Ø±Ø¯.",
    "session_id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "resolved_by": null
}
```

### ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø±ÙˆÛŒØ¯Ø§Ø¯
`PATCH /api/v1/chat/events/{event_id}/`

Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø±Ø³ÛŒØ¯Ú¯ÛŒ Ø¨Ù‡ ÛŒÚ© Ø±ÙˆÛŒØ¯Ø§Ø¯.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "is_resolved": true
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "is_resolved": true,
    "resolved_by": {
        "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
        "username": "staff_user"
    },
    ...
}
```

### Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
`POST /api/v1/accounts/students/{student_user_id}/reset-password/`

Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÛŒÚ© Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ².

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "new_password": "new_secure_password_123"
}
```

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:**
- Ø·ÙˆÙ„ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø­Ø¯Ø§Ù‚Ù„ 8 Ú©Ø§Ø±Ø§Ú©ØªØ±

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "message": "Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯."
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `404 Not Found`: Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯
- `403 Forbidden`: Ú©Ø§Ø±Ù…Ù†Ø¯ Ø§Ø¬Ø§Ø²Ù‡ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±Ø§ Ù†Ø¯Ø§Ø±Ø¯
- `400 Bad Request`: Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª

## Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§

### Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
- `400 Bad Request`: Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- `401 Unauthorized`: Ø¹Ø¯Ù… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
- `403 Forbidden`: Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ
- `404 Not Found`: Ù…Ù†Ø¨Ø¹ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯
- `405 Method Not Allowed`: Ù…ØªØ¯ HTTP Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- `500 Internal Server Error`: Ø®Ø·Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø³Ø±ÙˆØ±

### Ù†Ù…ÙˆÙ†Ù‡ Ø®Ø·Ø§
```json
{
    "error": "Permission denied.",
    "detail": "You do not have permission to perform this action."
}
```

### Ù†Ú©Ø§Øª Ù…Ù‡Ù…
1. ØªÙ…Ø§Ù…ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ `Content-Type: application/json` Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆÙ†Ø¯.
2. ØªÙ…Ø§Ù…ÛŒ timestampâ€ŒÙ‡Ø§ Ø¯Ø± ÙØ±Ù…Øª UTC Ù‡Ø³ØªÙ†Ø¯.
3. Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø§Ø¨Ø¹ (id) Ø§Ø² Ù†ÙˆØ¹ UUID Ù‡Ø³ØªÙ†Ø¯.
4. Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ø®Ø·Ø§ØŒ Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ÛŒ Ù…Ø¹Ù†Ø§Ø¯Ø§Ø± Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

```

================
FILE: src\types\state.ts
================

```
export interface RootState {
  darsyar: {
    studySelectionButton: boolean;
    selectedStudy: string | null;
    selectedLesson: string | null;
  };
  konjkav: {
    studySelectionButton: boolean;
    selectedStudy: string | null;
    selectedTopics: string[];
    hasSelectedTopics: boolean;
  };
}

export interface Lesson {
  id: string;
  title: string;
}

export interface Study {
  id: string;
  title: string;
}

export interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

```

================
FILE: src\types\api.ts
================

```
// src/types/api.ts

// Based on GET /api/v1/chat/sessions/{session_id}/
export interface ApiMessage {
  id: string;
  sender_type: 'SYSTEM' | 'USER' | 'AI';
  content: string;
  timestamp: string;
  raw_ai_response?: any; // Define more strictly if needed
}

// Based on POST /api/v1/tools/dars-yar/start/
export interface ChatSession {
  id: string; // This is the crucial session_id
  tool: string;
  title: string;
  messages: ApiMessage[];
}
```

================
FILE: src\store\index.ts
================

```
import { configureStore } from '@reduxjs/toolkit';
import { useDispatch } from 'react-redux';
import darsyarReducer from './../slice/darsyarSlice';
import konjkavReducer from './../slice/konjkavSlice';
import tarkibkonReducer from './../slice/tarkibkonSlice';
import userReducer from './../slice/userSlice';

export const store = configureStore({
  reducer: {
    darsyar: darsyarReducer,
    konjkav: konjkavReducer,
    tarkibkon:tarkibkonReducer,
    user:userReducer
  },
});

export type RootState = ReturnType<typeof store.getState>;

export type AppDispatch = typeof store.dispatch;

export const useAppDispatch = () => useDispatch<AppDispatch>();
```

================
FILE: src\slice\userSlice.ts
================

```
import { createSlice, PayloadAction } from '@reduxjs/toolkit';

export interface UserState {
  id: string | null;
  username: string | null;
  first_name: string | null;
  last_name: string | null;
  role: 'STUDENT' | 'STAFF' | null;
  token: string | null;
}

const initialState: UserState = {
  id: null,
  username: null,
  first_name: null,
  last_name: null,
  role: null,
  token: null,
};

const userSlice = createSlice({
  name: 'user',
  initialState,
  reducers: {
    setUser: (state, action: PayloadAction<UserState>) => {
      return { ...action.payload };
    },
    clearUser: () => initialState,
  },
  
});


export const { setUser, clearUser } = userSlice.actions;
export default userSlice.reducer;

```

================
FILE: src\slice\tarkibkonSlice.ts
================

```
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

interface Study {
    id: string;
    name: string;
}

interface TarkibkonState {
  selectedStudy: Study | null;
  learnTopic: string;
  favoriteTopic: string;
  studySelectionButton: boolean;
}

const initialState: TarkibkonState = {
  selectedStudy: null,
  learnTopic: "",
  favoriteTopic: '',
  studySelectionButton: false,
};

const tarkibkonSlice = createSlice({
  name: "tarkibkon",
  initialState,
  reducers: {
    setSelectedStudy: (state, action: PayloadAction<Study | null>) => {
      state.selectedStudy = action.payload;
      state.studySelectionButton = !!action.payload;
    },
    setLearnTopic: (state, action: PayloadAction<string>) => {
      state.learnTopic = action.payload;
    },
     setFavoriteTopic: (state, action: PayloadAction<string>) => {
      state.favoriteTopic = action.payload;
    },
    resetSelection: (state) => {
      state.selectedStudy = null;
      state.learnTopic = "";
      state.favoriteTopic='';
      state.studySelectionButton = false;
    },
    activeButtonReducer: (state) => {
      state.studySelectionButton = true;
    },
    disableButtonReducer: (state) => {
      state.studySelectionButton = false;
    },
  },
});

export const {
  setSelectedStudy,
  setLearnTopic,
  setFavoriteTopic,
  resetSelection,
  activeButtonReducer,
  disableButtonReducer,
} = tarkibkonSlice.actions;

export default tarkibkonSlice.reducer;
```

================
FILE: src\slice\konjkavSlice.ts
================

```
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

interface Study {
  id: string;
  name: string;
}

interface KonjkavState {
  selectedStudy: Study | null;
  selectedTopic: string;
  studySelectionButton: boolean;
}

const initialState: KonjkavState = {
  selectedStudy: null,
  selectedTopic: "",
  studySelectionButton: false,
};

const konjkavSlice = createSlice({
  name: "konjkav",
  initialState,
  reducers: {
    setSelectedStudy: (state, action: PayloadAction<Study | null>) => {
      state.selectedStudy = action.payload;
      if (action.payload) {
        state.studySelectionButton = true;
      } else {
        state.studySelectionButton = false;
      }
    },
    setSelectedTopic: (state, action: PayloadAction<string>) => {
      state.selectedTopic = action.payload;
    },
    resetSelection: (state) => {
      state.selectedStudy = null;
      state.selectedTopic = "";
      state.studySelectionButton = false;
    },
    activeButtonReducer: (state) => {
      state.studySelectionButton = true;
    },
    disableButtonReducer: (state) => {
      state.studySelectionButton = false;
    },
  },
});

export const {
  setSelectedStudy,
  setSelectedTopic,
  resetSelection,
  activeButtonReducer,
  disableButtonReducer,
} = konjkavSlice.actions;

export default konjkavSlice.reducer;
```

================
FILE: src\slice\darsyarSlice.ts
================

```
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

interface Study {
  id: string;
  name: string;
}

interface Lesson {
  id: string;
  title: string;
}

interface DarsyarState {
  studySelectionButton: boolean;
  selectedStudy: Study | null;
  studyName: string | null;
  selectedLessons: Lesson[];
  hasSelectedLessons: boolean;
}

const initialState: DarsyarState = {
  studySelectionButton: false,
  selectedStudy: null,
  studyName: null,
  selectedLessons: [],
  hasSelectedLessons: false
};

const darsyarSlice = createSlice({
  name: 'darsyar',
  initialState,
  reducers: {
    activeButtonReducer: (state) => {
      state.studySelectionButton = true;
    },
    disableButtonReducer: (state) => {
      state.studySelectionButton = false;
    },
    setSelectedStudy: (state, action: PayloadAction<Study>) => {
      state.selectedStudy = action.payload;
      state.studyName = action.payload.name;
    },
    setSelectedLesson: (state, action: PayloadAction<Lesson[]>) => {
      state.selectedLessons = action.payload;
      state.hasSelectedLessons = action.payload.length > 0;
    },
    clearSelections: (state) => {
      state.selectedStudy = null;
      state.studyName = null;
      state.selectedLessons = [];
      state.studySelectionButton = false;
      state.hasSelectedLessons = false;
    }
  }
});

export const {
  activeButtonReducer,
  disableButtonReducer,
  setSelectedStudy,
  setSelectedLesson,
  clearSelections
} = darsyarSlice.actions;

export default darsyarSlice.reducer;
```

================
FILE: src\slice\chatSlice.ts
================

```

```

================
FILE: src\router\index.tsx
================

```
// src/router/index.tsx
import { createBrowserRouter, Outlet } from "react-router-dom";

// ... (all other imports remain the same)
import App from "../App";
import Login from "../login/Login";

// ... (import all your other components)
import TeacherHome from "../teacher/pages/TeacherHome";
import StudentHome from "../student/pages/StudentHome";
import ClassLayout from "../layout/ClassLayout";
import StudentsActivities from "../teacher/components/contentContainer/students/StudentsActivities";
import ClassChat from "../teacher/pages/ClassChat";
import DarsyarRecentChat from "../student/pages/darsYar/DarsyarRecentChat";
import DarsyarWelcome from "../student/pages/darsYar/DarsyarStudyAssistant";
import DarsyarStudySelection from "../student/pages/darsYar/DarsyarStudySelection";
import DarsyarLessonSelection from "../student/pages/darsYar/DarsyarLessonSelection";
import DarsyarChatWithBot from "../student/pages/darsYar/DarsyarChatWithBot";
import KonjkavWelcome from "../student/pages/konjKav/KonjkavWelcome";
import KonjkavRecentChat from "../student/pages/konjKav/KonjkavRecentChat";
import KonjkavStudySelection from "../student/pages/konjKav/KonjkavStudySelection";
import KonjkavTopicSelection from "../student/pages/konjKav/KonjkavTopicSelection";
import KonjkavTopicBot from "../student/pages/konjKav/KonjkavTopicBot";
import TarkibkonWelcome from "../student/pages/tarkibKon/TarkibkonWelcome";
import TarkibkonRecentChat from "../student/pages/tarkibKon/TarkibkonRecentChat";
import TarkibkonLearnTopic from "../student/pages/tarkibKon/TarkibkonLearnTopic";
import TarkibkonFavoriteTopic from "../student/pages/tarkibKon/TarkibkonFavoriteTopic";
import TarkibkonChatBot from "../student/pages/tarkibKon/TarkibkonChatBot";
import TarkibkonStudySelection from "../student/pages/tarkibKon/TarkibkonStudySelection";
import ReportsPage from "../teacher/pages/ReportsPage";

// The only change is to export the router instance
export const router = createBrowserRouter([
  {
    path: "/",
    element: <App />, 
    children: [
      {
        index: true,
        element: <Login />,
      },
      // ... (all other routes remain exactly the same)
      {
        path: "teacher", 
        element: <TeacherHome />,
      },
      {
        path: "teacher", 
        element: <ClassLayout />,
        children: [
          {
            path: "students", 
            element: <StudentsActivities />,
          },
          {
            path: "reports",
            element: <ReportsPage />,
          },
          {
            path: "chat", 
            element: <ClassChat />,
          },
          
        ],
      },
      {
        path: "student",
        children: [
          {
            index: true,
            element: <StudentHome />,
          },
          {
            path: "darsyar",
            element: <Outlet />,
            children: [
              { path: "recent-chat", element: <DarsyarRecentChat /> },
              { path: "study-assistant", element: <DarsyarWelcome /> },
              { path: "study-selection", element: <DarsyarStudySelection /> },
              { path: "lesson-selection", element: <DarsyarLessonSelection /> },
              { path: "chat", element: <DarsyarChatWithBot /> },
            ],
          },
          {
            path: "konjkav",
            element: <Outlet />,
            children: [
              { path: "welcome", element: <KonjkavWelcome /> },
              { path: "recent-chat", element: <KonjkavRecentChat /> },
              { path: "study-selection", element: <KonjkavStudySelection /> },
              { path: "topic-selection", element: <KonjkavTopicSelection /> },
              { path: "chat", element: <KonjkavTopicBot /> },
            ],
          },
          {
            path: "tarkibkon",
            element: <Outlet />,
            children: [
              { path: "welcome", element: <TarkibkonWelcome /> },
              { path: "recent-chat", element: <TarkibkonRecentChat /> },
              { path: "study-selection", element: <TarkibkonStudySelection /> },
              { path: "learn-topic-selection", element: <TarkibkonLearnTopic /> },
              { path: "favorite-topic-selection", element: <TarkibkonFavoriteTopic /> },
              { path: "chat", element: <TarkibkonChatBot /> },
            ],
          },
        ],
      },
    ],
  },
]);
```

================
FILE: src\login\LoginButton.tsx
================

```
import React from 'react'

interface LoginButtonProps {
  disabled?: boolean
}

const LoginButton: React.FC<LoginButtonProps> = ({ disabled }) => {
  return (
    <div className="flex justify-center items-center bg-white w-full">
      <div className={`chat-button border-2 border-backGroundButton w-full ${disabled ? 'opacity-50' : ''}`}>
        <button 
          type="submit"
          disabled={disabled}
          className="button-box text-white cursor-pointer p-[16px] w-full disabled:cursor-not-allowed"
        >
          {disabled ? 'Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...' : 'ÙˆØ±ÙˆØ¯'}
        </button>
      </div>
    </div>
  )
}

export default LoginButton

```

================
FILE: src\login\Login.tsx
================

```
import React from 'react'
import HeroSection from './HeroSection'
import InputGroup from './InputGroup'

const Login = () => {
  return (
    <div className='bg-backGround-1 '>
      <HeroSection/>
      <InputGroup/>
    </div>
  )
}

export default Login

```

================
FILE: src\login\InputGroup.tsx
================

```
import { useState } from 'react'
import { useDispatch } from 'react-redux'
import LoginButton from './LoginButton'
import { login } from '../api'
import { setUser } from '../slice/userSlice'
import { useNavigate } from 'react-router-dom'

const InputGroup = () => {
  const [username, setUsername] = useState('')
  const [password, setPassword] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const dispatch = useDispatch()
  const navigate = useNavigate()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    setLoading(true)

    try {
      const response = await login(username, password)
      console.log(response.user)
      dispatch(setUser({
        id: response.user.id,
        username: response.user.username,
        first_name: response.user.first_name,
        last_name: response.user.last_name,
        role: response.user.role,
        token: response.token
      }))
      
      // Navigate based on role
      if (response.user.role === 'STUDENT') {
        navigate('/student')
      } else if (response.user.role === 'STAFF') {
        navigate('/teacher')
      }
    } catch (err: any) {
      setError(err.response?.data?.message || 'Ø®Ø·Ø§ Ø¯Ø± ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…')
    } finally {
      setLoading(false)
    }
  }

  return (
    <form onSubmit={handleSubmit} className='flex flex-col justify-center items-center rounded-[24px] p-[40px] space-y-6 bg-white border-[2px] border-borderColor-1 rounded-b-none'>
      {error && (
        <div className='w-full text-right text-red-500 text-sm mb-4'>
          {error}
        </div>
      )}
      <div className='w-full mb-[16px]'>
        <p className='mb-[12px] text-right text-[14px] font-extrabold'>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
        <input
          value={username}
          onChange={(e) => setUsername(e.target.value)}
          className='p-[16px] rounded-[16px] w-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-chatButton-1'
          required
        />
      </div>
      <div className='w-full mb-[40px]'>
        <p className='mb-[12px] text-right text-[14px] font-extrabold'>Ú©Ø¯ ÙˆØ±ÙˆØ¯</p>
        <input
          type="password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
          className='p-[16px] rounded-[16px] border border-gray-300 w-full focus:outline-none focus:ring-2 focus:ring-chatButton-1'
          required
        />
      </div>
      <LoginButton disabled={loading} />
    </form>
  )
}

export default InputGroup
```

================
FILE: src\login\HeroSection.tsx
================

```
import happyFace from './../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='pb-[32px] pt-[16px]  h-[50vh]'>
        <div className='flex justify-center  p-4'>
        <img src={happyFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ Ú©ÛŒØ¯Ùˆ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\layout\ClassLayout.tsx
================

```
import React from 'react';
import { Outlet } from 'react-router-dom'; // Import Outlet
import Header from '../components/common/Header';
import Navbar from '../teacher/components/contentContainer/Navbar';
import StudentAlert from '../teacher/components/contentContainer/StudentAlert';

const ClassLayout = () => {
  return (
    <div>
      <Header title={'Ú©Ù„Ø§Ø³ Ø´Ø´Ù…'} />
      <Navbar />
      <div className='bg-backGround-1 min-h-screen'>
        <div className='mx-[16px] '>
          <StudentAlert />
          <main>
            <Outlet />
          </main>
        </div>
      </div>
    </div>
  );
};

export default ClassLayout;
```

================
FILE: src\hooks\useClientInfo.ts
================

```
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface ClientInfo {
  id: string;
  username: string;
  first_name: string;
  last_name: string;
  role: string;
}

const fetchClientInfo = async (): Promise<ClientInfo> => {
  const response = await axios.get('/api/v1/accounts/me/', {
    headers: {
      Authorization: `Token ${localStorage.getItem('token')}`,
    },
  });
  console.log(response)
  return response.data;
};

export const useClientInfo = () => {
  return useQuery({
    queryKey: ['clientInfo'],
    queryFn: fetchClientInfo,
  });
};

```

================
FILE: src\hooks\useChatSessions.ts
================

```
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface ChatSession {
  id: string;
  tool: string;
  title: string;
  subject: string;
  updated_at: string;
}

const fetchChatSessions = async (): Promise<ChatSession[]> => {
  const response = await axios.get('/api/v1/chat/sessions/', {
    headers: {
      Authorization: `Token ${localStorage.getItem('token')}`,
    },
  });
  // Ensure we always return an array
  return Array.isArray(response.data) ? response.data : [];
};

export const useChatSessions = () => {
  return useQuery({
    queryKey: ['chatSessions'],
    queryFn: fetchChatSessions,
    // Initialize with an empty array
    initialData: [],
  });
};

```

================
FILE: src\constants\studyAssistantConstant.ts
================

```
import rocketlogo from './../assets/images/logos/rocketLogo.png'
import emojiLogo from './../assets/images/logos/emojiLogo.png'
import alienLogo from './../assets/images/logos/alienLogo.png'

export const studyAssistantConstatnt:studyAssistantType[] = [
  {
    logo: rocketlogo,
    title: "Ù‡ÛŒÚ† Ø¯Ø±Ø³ÛŒ Ø¯ÛŒÚ¯Ù‡ Ø³Ø®Øª Ù†ÛŒØ³Øª",
    description:
      "Ø¨Ø§ Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ø§Ø± Ù‡Ø± Ù…Ø¨Ø­Ø« Ø³Ø®ØªÛŒ Ø§Ø² Ú©ØªØ§Ø¨ Ø±Ùˆ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù‡ Ø²Ø¨ÙˆÙ† Ø³Ø§Ø¯Ù‡ Ùˆ Ø³Ø±ÛŒØ¹ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±.",
  },
  {
    logo:emojiLogo,
    title: "Ù…Ø¹Ù„Ù… Ø®ØµÙˆØµÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡",
    description:
      "Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ø§Ø± Ù‡Ù…ÛŒØ´Ù‡ Ù‡Ù…Ø±Ø§Ù‡ ØªÙˆ! Ù‡Ø± Ø²Ù…Ø§Ù† Ùˆ Ù‡Ø±Ú©Ø¬Ø§ØŒ Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§ØªØª Ø¬ÙˆØ§Ø¨ ÙÙˆØ±ÛŒ Ø¨Ú¯ÛŒØ±.",
  },
  {
    logo: alienLogo,
    title: "Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ø¢Ø³ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",
    description:
      "Ø¨Ø§ Ø®Ù„Ø§ØµÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ù†Ú©ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†ÛŒØŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø§Ø² Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ùˆ.",
  },
];
export interface studyAssistantType{
   logo:string ,
    title: string,
    description:string
}

```

================
FILE: src\components\RecentChats.tsx
================

```
import React from 'react';
import { useChatSessions } from '../hooks/useChatSessions';
import RecentChatCard from './common/RecentChatCard';

const RecentChats: React.FC = () => {
  const { data: chatSessions, isLoading, isError } = useChatSessions();

  if (isLoading) {
    return <div>Loading...</div>;
  }

  if (isError) {
    return <div>Error loading recent chats</div>;
  }

  if (!chatSessions || chatSessions.length === 0) {
    return (
      <div className="flex flex-col items-center justify-center p-6 text-center">
        <p className="text-gray-500">There are no recent chats here.</p>
      </div>
    );
  }

  return (
    <div className="grid gap-4">
      {chatSessions.map((session) => (
        <RecentChatCard
          key={session.id}
          title={session.title}
          tool={session.tool}
          subject={session.subject}
          updatedAt={session.updated_at}
        />
      ))}
    </div>
  );
};

export default RecentChats;

```

================
FILE: src\teacher\pages\TeacherHome.tsx
================

```
import React from "react";
import Header from "../../student/components/home/Header";
import Classes from "../components/home/Classes";
import ToolCard from "../../student/components/home/ToolCard";
import RecentChatCard from "../../components/common/RecentChatCard";
import ProgressQuestion from "../components/home/ProgressQuestion";
import { useChatSessions } from "../../hooks/useChatSessions";
import { useNavigate } from "react-router-dom";

const TeacherHome = () => {
  const navigate=useNavigate()
  const { data: chatSessions = [], isLoading, isError } = useChatSessions();

  const hasRecentChatsForTool = (tool: string) => {
    return chatSessions.some((session) => session.tool === tool);
  };
  const handleClasses=()=>{
    navigate('/teacher/students')
  }

  return (
    <div>
      <Header />
      <div className="bg-backGround-1 h-full">
        <div className="p-[24px] gap-[16px]">
          <div >
            <h1 className="pb-[16px]">Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</h1>
            <div onClick={handleClasses}>
              <Classes />
            </div>
           
          </div>
          <div>
            <h1 className="pt-[20px] pb-[32px]">Ø§Ø¨Ø²Ø§Ø±â€ŒÙ‡Ø§</h1>
            <div className="mb-[24px]">
              <div className="flex justify-center items-center mb-[40px] gap-[12px]">
                <ToolCard
                  title="ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†"
                  description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                  tool="TARKIB_KON"
                  hasRecentChats={hasRecentChatsForTool("DARS_YAR")}
                />
                <ToolCard
                  title="Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ"
                  description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                  tool="KONJKAV"
                  hasRecentChats={hasRecentChatsForTool("KONJKAV")}
                />
              </div>
              <div className="flex justify-center items-center gap-[12px]">
                <ToolCard
                  title="Ø¯Ø±Ø³â€ŒÛŒØ§Ø±"
                  description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                  tool="DARS_YAR"
                  hasRecentChats={hasRecentChatsForTool("SOALYAR")}
                />
                <ToolCard
                  title="Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø²"
                  description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                  tool="AZMOON_SAZ"
                  hasRecentChats={hasRecentChatsForTool("AZMOON_SAZ")}
                />
              </div>
            </div>
          </div>
          <div>
            <h1 className="mb-[16px]">ÙˆØ¶Ø¹ÛŒØª Ù…ØµØ±Ù</h1>
            <ProgressQuestion progress={50} />
          </div>

          <h3 className="font-extrabold text-right text-[14px] mt-[32px] mb-[16px]">
            Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
          </h3>
          <div className="space-y-[12px]">
            {isLoading ? (
              <div className="text-center py-4">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
            ) : isError ? (
              <div className="text-center text-red-500 py-4">
                Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú†Øªâ€ŒÙ‡Ø§
              </div>
            ) : chatSessions.length === 0 ? (
              <div className="text-center text-gray-500 py-4">
                Ù‡ÛŒÚ† Ú†Øª Ø§Ø®ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
              </div>
            ) : (
              chatSessions.map((session) => (
                <RecentChatCard
                  key={session.id}
                  title={session.title}
                  tool={session.tool}
                  subject={session.subject}
                  updatedAt={session.updated_at}
                />
              ))
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default TeacherHome;

```

================
FILE: src\teacher\pages\ReportsPage.tsx
================

```
import React from 'react';
import ReportTools from '../components/contentContainer/reports/ReportTools';
import StudentReports from '../components/contentContainer/reports/StudentReports';

const ReportsPage = () => {
  return (
    <>
      <div className='flex justify-center items-center gap-[12px] mb-[16px]'>
        <ReportTools title={'Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§'} />
        <ReportTools title={'Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡Ø§'} />
      </div>
      <div className='border-[2px] border-borderColor-1 rounded-[24px] bg-white p-[16px]'>
        <StudentReports />
        <StudentReports />
        <StudentReports />
      </div>
    </>
  );
};

export default ReportsPage;
```

================
FILE: src\teacher\pages\ContentContainer.tsx
================

```

import StudentsActivities from '../components/contentContainer/students/StudentsActivities'


const ContentContainer = () => {
  return (
    <div>
     
      <StudentsActivities/>
      
     
    </div>
  )
}

export default ContentContainer

```

================
FILE: src\teacher\pages\ClassChat.tsx
================

```
import React from 'react'
import Header from '../../components/common/Header'
import Navbar from '../components/contentContainer/Navbar'
import StudentAlert from '../components/contentContainer/StudentAlert'
import RecentChatCard from '../components/home/RecentChat'

const ClassChat = () => {
  return (
     <div>
        
          <RecentChatCard/>
          <RecentChatCard/>
          <RecentChatCard/>
          
    </div>
  )
}

export default ClassChat

```

================
FILE: src\student\pages\StudentHome.tsx
================

```
import Header from "../components/home/Header";
import ToolCard from "../components/home/ToolCard";
import { useClientInfo } from "../../hooks/useClientInfo";
import RecentChatCard from "../../components/common/RecentChatCard";
import { useChatSessions } from "../../hooks/useChatSessions";

const StudentHome = () => {
  const { data: chatSessions = [], isLoading: chatsLoading } = useChatSessions();

  const hasRecentChatsForTool = (tool: string) => {
    return chatSessions.some(session => session.tool === tool);
  };

  return (
    <div className="h-screen bg-backGround-1">
      <Header />

      <div className="bg-backGround-1 pb-4">
        <div className="p-[16px]">
          <h1 className="mb-[40px] font-extrabold text-[14px]">Ø§Ø¨Ø²Ø§Ø±â€ŒÙ‡Ø§</h1>

          <div className="mb-[24px]">
            <div className="flex justify-center items-center mb-[40px] gap-[12px]">
              <ToolCard
                title="ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†"
                description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                tool="TARKIB_KON"
                hasRecentChats={hasRecentChatsForTool("DARS_YAR")}
              />
              <ToolCard
                title="Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ"
                description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                tool="KONJKAV"
                hasRecentChats={hasRecentChatsForTool("KONJKAV")}
              />
            </div>
            <div className="flex justify-center items-center gap-[12px]">
              <ToolCard
                title="Ø¯Ø±Ø³â€ŒÛŒØ§Ø±"
                description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                tool="DARS_YAR"
                hasRecentChats={hasRecentChatsForTool("SOALYAR")}
              />
              <ToolCard
                title="Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø²"
                description="Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±."
                tool="AZMOON_SAZ"
                hasRecentChats={hasRecentChatsForTool("AZMOON_SAZ")}
              />
            </div>
          </div>
        </div>

        <h3 className="font-extrabold text-right text-[14px] mr-[16px] mb-[16px]">
          Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
        </h3>
        <div className="space-y-[12px] mx-[24px]">
          {chatsLoading ? (
            <div className="text-center py-4">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
          ) : chatSessions.length === 0 ? (
            <div className="text-center text-gray-500 py-4">Ù‡ÛŒÚ† Ú†Øª Ø§Ø®ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>
          ) : (
            chatSessions.map((session) => (
              <RecentChatCard
                key={session.id}
                title={session.title}
                tool={session.tool}
                subject={session.subject}
                updatedAt={session.updated_at}
              />
            ))
          )}
        </div>
      </div>
    </div>
  );
};

export default StudentHome;

```

================
FILE: src\components\common\Toast.tsx
================

```
import React, { useEffect } from 'react';

interface ToastProps {
  message: string;
  type: 'success' | 'error';
  onClose: () => void;
}

const Toast: React.FC<ToastProps> = ({ message, type, onClose }) => {
  useEffect(() => {
    const timer = setTimeout(() => {
      onClose();
    }, 5000); // Close after 5 seconds

    return () => {
      clearTimeout(timer);
    };
  }, [onClose]);

  const baseClasses = 'fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white z-50 animate-pulse';
  const typeClasses = type === 'success' ? 'bg-green-500' : 'bg-red-500';

  return (
    <div className={`${baseClasses} ${typeClasses}`}>
      <span>{message}</span>
      <button onClick={onClose} className="ml-4 font-bold">X</button>
    </div>
  );
};

export default Toast;
```

================
FILE: src\components\common\RecentChatCard.tsx
================

```
import React from 'react'
import darsYar from './../../assets/images/DarsYar.png'

interface RecentChatCardProps {
  title: string;
  tool: string;
  subject: string;
  updatedAt: string;
}

const RecentChatCard: React.FC<RecentChatCardProps> = ({ title, tool, subject, updatedAt }) => {
  const formatDate = (dateString: string) => {
    try {
      // Make sure we have a valid date string
      if (!dateString) return '';

      const date = new Date(dateString);
      
      // Check if date is valid
      if (isNaN(date.getTime())) {
        return '';
      }

      // Format options for Persian date
      const options: Intl.DateTimeFormatOptions = {
        month: 'long',
        day: 'numeric',
      };

      return new Intl.DateTimeFormat('fa-IR', options).format(date);
    } catch (error) {
      console.error('Error formatting date:', error);
      return '';
    }
  };

  return (
    <div>
         <div className='card-box'>
            <div className='flex justify-start items-center bg-white rounded-[22px] p-[16px] gap-[16px] pl-[24px]'>
                <div>
                    <img className='w-[56px] h-[56px] ' src={darsYar} alt={tool} />
                </div>
                <div className='flex flex-col gap-[4px] '>
                    <h1 className='font-extrabold line-clamp-1 w-[215px] text-[14px]'>{title}</h1>
                    <div className='flex justify-start items-start gap-[4px]'>
                        <p className=' bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>{tool}</p>
                    <p className='bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>{subject}</p>
                    <p className='bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>
                        {formatDate(updatedAt)}
                    </p>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
  )
}

export default RecentChatCard

```

================
FILE: src\components\common\Header.tsx
================

```
import { FC } from "react";
import React from "react"; // Import React for inline SVG
import { useNavigate } from "react-router-dom";

interface ButtonType {
  title: string;
  onBackClick?: () => void; // Optional prop for handling back button click
}

const Header: FC<ButtonType> = ({ title }) => {
  const navigate = useNavigate(); // Initialize useNavigate hook

  const handleBackClick = () => {
    navigate(-1); // Go back one step in history
  };
  return (
    <div>
      <header
        className={`
          flex items-center justify-between bg-white py-[24px] px-[16px] h-[52px]
          fixed top-0 w-full z-100
        `}
      >
        {/* Back Button on the left */}
        <div className="flex items-center ">
            <button onClick={handleBackClick} className="mr-4 ">
              {/* Rotated SVG for a left arrow */}
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
               
              >
                <path d="M9.29289 4.29289C9.68342 3.90237 10.3166 3.90237 10.7071 4.29289L16.7071 10.2929C17.0976 10.6834 17.0976 11.3166 16.7071 11.7071L10.7071 17.7071C10.3166 18.0976 9.68342 18.0976 9.29289 17.7071C8.90237 17.3166 8.90237 16.6834 9.29289 16.2929L14.5858 11L9.29289 5.70711C8.90237 5.31658 8.90237 4.68342 9.29289 4.29289Z" fill="#333333"/> {/* Adjust fill color if needed */}
             </svg>
            </button>
          
        </div>

        {/* Title in the center */}
        <div className="text-[16px] font-extrabold absolute left-1/2 -translate-x-1/2">
          {title}
        </div>

        {/* Right-hand side (can be used for other elements if needed) */}
        <div className="w-[24px]"></div> {/* Placeholder to balance the left button if no other content */}
      </header>

      <div className="h-[52px]"></div>
      <hr className="border-[2px] border-borderColor-1 w-full" />
    </div>
  );
};

export default Header;
```

================
FILE: src\components\common\DisableChatButton.tsx
================

```
import React from 'react';

interface ButtonType {
  textButton: string;
}

const DisableChatButton: React.FC<ButtonType> = ({ textButton }) => {
  return (
    <>
      {/*
        The main container for the button needs to be positioned.
        `fixed` for staying in the viewport, `bottom-0` to stick to the bottom,
        `left-0` and `right-0` (or `w-full`) to span the width.
        We'll include the `hr` directly within this fixed container if you want it to
        be part of the sticky bottom bar.
        `bg-white` and `z-50` are good for visibility and layering.
      */}
      <div
        className="
          fixed bottom-0 left-0 right-0
          bg-white z-50
          shadow-lg 
        "
      >
        <hr className="border-[1.5px] border-borderColor-1 w-full" />
        <div className="h-[70px] px-[24px] py-[16px] flex justify-center items-center">
          <div className="card-box rounded-[24px] border-2 border-backGround-1 mx-[16px]">
            <button className="disableChat-button text-borderColor-1 w-[327px] h-[50px] cursor-pointer">
              {textButton}
            </button>
          </div>
        </div>
      </div>
    </>
  );
};

export default DisableChatButton;
```

================
FILE: src\components\common\ChatButton.tsx
================

```
import React from 'react';

interface ButtonType {
  textButton: string;
  onClick?: () => void;
}

const ChatButton: React.FC<ButtonType> = ({ textButton, onClick }) => {
  return (
    <div
      className="
        fixed bottom-0 left-0 right-0
        bg-white z-50
        shadow-lg 
      "
    >
      <hr className="border-[1.5px] border-borderColor-1 w-full" />
      <div className="h-[70px] px-[24px] py-[16px] flex justify-center items-center">
        <div className="chat-button rounded-[24px] border-2 border-backGroundButton mx-[16px]">
          <button
            className="button-box text-borderColor-1 w-[327px] h-[50px] cursor-pointer"
            onClick={onClick}
          >
            {textButton}
          </button>
        </div>
      </div>
    </div>
  );
};

export default ChatButton;
```

================
FILE: src\components\common\Chat.tsx
================

```
// src/components/common/Chat.tsx
import React, { useState, useEffect, useRef } from "react";
import { sendMessage, getSessionDetails } from "../../api-chat";
import { ApiMessage, ChatSession } from "../../types/api";
import Toast from "./Toast";

interface Message {
  id: string;
  sender: "user" | "bot";
  text: string;
}

interface ChatProps {
  startSession: () => Promise<ChatSession>;
  setIsChatting: React.Dispatch<React.SetStateAction<boolean>>;
  onTypingStateChange: (isTyping: boolean) => void;
}

const mapApiMessageToUiMessage = (apiMessage: ApiMessage): Message => ({
  id: apiMessage.id,
  sender: apiMessage.sender_type === 'USER' ? 'user' : 'bot',
  text: apiMessage.content,
});

const Chat: React.FC<ChatProps> = ({ startSession, setIsChatting,  }) => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [inputMessage, setInputMessage] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);
  const [sessionId, setSessionId] = useState<string | null>(null);

  const messagesEndRef = useRef<HTMLDivElement>(null);
  const textareaRef = useRef<HTMLTextAreaElement>(null);



  useEffect(() => {
    const initChat = async () => {
      setIsChatting(true);
      setIsLoading(true);
      try {
        const response = await startSession();
        setSessionId(response.id);
        setMessages(response.messages.map(mapApiMessageToUiMessage));
      } catch (err) {
        setError("Ø®Ø·Ø§ Ø¯Ø± Ø´Ø±ÙˆØ¹ Ú¯ÙØªÚ¯Ùˆ. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.");
        console.error('Failed to start chat session:', err);
      } finally {
        setIsLoading(false);
      }
    };
    initChat();
  }, [startSession, setIsChatting]);

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);

  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = "auto";
      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;
    }
  }, [inputMessage]);

  const pollForResponse = (sid: string, originalMessageCount: number) => {
    const timeout = 20000;
    const interval = 1000;
    let pollTimeoutId: NodeJS.Timeout;

    const poller = setInterval(async () => {
      try {
        const sessionDetails = await getSessionDetails(sid);
        if (sessionDetails.messages.length > originalMessageCount) {
          const lastMessage = sessionDetails.messages[sessionDetails.messages.length - 1];
          if (lastMessage.sender_type === 'AI') {
            clearInterval(poller);
            clearTimeout(pollTimeoutId);
            setMessages(sessionDetails.messages.map(mapApiMessageToUiMessage));
            setIsLoading(false);
          }
        }
      } catch (err) {
        console.error("Polling error:", err);
      }
    }, interval);

    pollTimeoutId = setTimeout(() => {
      clearInterval(poller);
      if (isLoading) {
          setError("Ù¾Ø§Ø³Ø®ÛŒ Ø§Ø² Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.");
          setIsLoading(false);
      }
    }, timeout);
  };

  const handleSendMessage = async () => {
    if (!sessionId || inputMessage.trim() === "") return;

    const userMessageText = inputMessage.trim();
    const currentMessageCount = messages.length;
    
    const tempUserMessage: Message = {
        id: `temp-${Date.now()}`,
        sender: "user",
        text: userMessageText,
    };
    setMessages(prev => [...prev, tempUserMessage]);
    setInputMessage("");
    setIsLoading(true);

    try {
      await sendMessage(sessionId, userMessageText);
      pollForResponse(sessionId, currentMessageCount + 1);
    } catch (err) {
      setError("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù….");
      setIsLoading(false);
      setMessages(prev => prev.filter(m => m.id !== tempUserMessage.id));
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {
    if (e.key === "Enter" && !e.shiftKey && !isLoading) {
      e.preventDefault();
      handleSendMessage();
    }
  };

  const systemMessage = messages.find(m => m.sender === 'bot' && m.text.startsWith('CONTEXT:'));

  return (
    <div className='flex flex-col flex-grow bg-backGround-1'>
      {error && <Toast message={error} type="error" onClose={() => setError(null)} />}
      
      <div className="flex-1 overflow-y-auto p-4">
        {systemMessage && (
            <div className="text-xs text-gray-500 bg-gray-100 p-2 rounded-lg my-2 mx-2 whitespace-pre-wrap">
                {systemMessage.text}
            </div>
        )}
        {messages.filter(msg => msg.id !== systemMessage?.id).map((msg) => (
          <div key={msg.id} className={`flex my-2 ${msg.sender === "user" ? "justify-start" : "justify-end"}`}>
            <div className={`max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg p-3 rounded-2xl mx-2 ${msg.sender === "user" ? "bg-custom-purple text-white" : "bg-white text-gray-800 border border-borderColor-1"}`}>
              <p className="text-sm sm:text-base whitespace-pre-wrap">{msg.text}</p>
            </div>
          </div>
        ))}
        {isLoading && (
          <div className="flex justify-start mx-2 my-2">
            <div className="p-3 rounded-2xl bg-white border border-borderColor-1">
              <div className="flex items-center space-x-2">
                <div className="w-2 h-2 bg-gray-600 rounded-full animate-bounce" style={{ animationDelay: "0s" }}></div>
                <div className="w-2 h-2 bg-gray-600 rounded-full animate-bounce" style={{ animationDelay: "0.2s" }}></div>
                <div className="w-2 h-2 bg-gray-600 rounded-full animate-bounce" style={{ animationDelay: "0.4s" }}></div>
              </div>
            </div>
          </div>
        )}
        <div ref={messagesEndRef} />
      </div>

      <div className="bg-white p-4 w-full border-t border-borderColor-1">
        <div className="relative flex items-center">
          <textarea ref={textareaRef} rows={1} className="w-full py-3 pl-4 pr-14 rounded-full focus:outline-none bg-backGround-1 resize-none overflow-y-auto max-h-40" placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... " value={inputMessage} onChange={(e) => setInputMessage(e.target.value)} onKeyPress={handleKeyPress} disabled={isLoading || !sessionId} />
          <button onClick={handleSendMessage} disabled={isLoading || inputMessage.trim() === "" || !sessionId} className="absolute right-2 top-1/2 -translate-y-1/2 flex items-center justify-center bg-custom-purple text-white w-10 h-10 rounded-full shadow-lg transition duration-200 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed rotate-90">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" transform="rotate(180)">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  );
};

export default Chat;
```

================
FILE: src\teacher\components\home\ToolCard.tsx
================

```
import { FC } from "react";
import icon from './../../../assets/images/DarsYar.png'
 
interface ToolCardProps {
  
  title: string;
  description: string;
}

const ToolCard: FC<ToolCardProps> = ({  title, description }) => {
  return (
  <div >
   
   <div className="card-box cursor-pointer hover:transform hover:translate-y-1">
     <div className="flex flex-col items-center text-center  rounded-[24px] bg-white    p-[16px]  ">
      <img src={icon} className="   h-[56px] w-[56px]"/>
      <h3 className="font-extrabold text-[18px] mt-[16px]">{title}</h3>
      <p className="text-[10px] ">{description}</p>
    </div>
   </div>
  </div>
  );
};

export default ToolCard;

```

================
FILE: src\teacher\components\home\RecentChat.tsx
================

```
import React from 'react'
import darsyar from './../../../assets/images/DarsYar.png'

const RecentChatCard = () => {
  return (
    <div>
         <div className='card-box'>
            <div className='flex justify-start items-center bg-white rounded-[22px] p-[16px] gap-[16px] pl-[24px]'>
                <div>
                    <img className='w-[56px] h-[56px] ' src={darsyar}/>
                </div>
                <div className='flex flex-col gap-[4px] '>
                    <h1 className='font-extrabold line-clamp-1 w-[215px] text-[14px]'>ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÙØªÙˆØ³Ù†ØªØ² Ùˆ Ø¨Ù‚ÛŒÙ‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù‡Ù… Ùˆ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h1>
                    <div className='flex justify-start items-start gap-[4px]'>
                        <p className=' bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>Ø¯â€ŒØ±Ø³â€ŒÛŒØ§Ø±</p>
                    <p className='bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'> ÙØ§Ø±Ø³ÛŒ</p>
                    <p className='bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]' >19 Ø®Ø±Ø¯Ø§Ø¯</p>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
  )
}

export default RecentChatCard

```

================
FILE: src\teacher\components\home\ProgressQuestion.tsx
================

```
import React from 'react'
interface ProgressBarProps {
  progress: number; // The current progress percentage (0-100)
}

const ProgressQuestion:React.FC<ProgressBarProps> = ({ progress }) => {
     const clampedProgress = Math.max(0, Math.min(100, progress));
  return (
        <div className='mb-[12px]'>
         <div className='card-box'>
            <div className='flex flex-col items-center bg-white rounded-[22px] p-[16px] gap-[16px] pl-[24px]'>
             <div className='flex justify-between items-center'>
                <div>
                    <h1 className='text-[12px]'>
                        Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
                </h1>
                </div>
                <div className='mr-10 '>
                    <h1 className='bg-[#F2EFFF] rounded-[24px] text-backGroundButton py-[2px] px-[8px]'>
 50 Ø§Ø² 100
                </h1>
                </div>
             </div>
                <div className="w-full  rounded-full h-4 bg-backGround-1 overflow-hidden ">
      <div
        className="bg-gradient-to-l from-custom-purple via-custom-orange-1 to-custom-orange-2 h-4 rounded-full transition-all duration-500 ease-out"
        style={{ width: `${clampedProgress}%` }}
        role="progressbar"
        aria-valuenow={clampedProgress}
        aria-valuemin={0}
        aria-valuemax={100}
      ></div>
    </div>
            </div>
        </div>
    </div>
    
  )
}

export default ProgressQuestion

```

================
FILE: src\teacher\components\home\Classes.tsx
================

```
import React from 'react';
import darsYar from './../../../assets/images/DarsYar.png';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

// 1. Define an interface for the structure of each class item
//    It's important to know what properties your API response objects have.
//    Assuming your API returns an array of objects like:
//    [{ id: '...', name: '...', length: ... }, ...]
interface ClassItem {
  id: string | number; // Assuming 'id' can be string or number based on backend
  name: string;
  length: number; // Assuming this represents the number of students
  // Add any other properties that your class objects might have from the API
}

const Classes: React.FC = () => {
  // Use a type assertion or provide a generic type to useQuery for better type inference
  const {
    data,
    isLoading,
    isError, // Add isError to handle fetch errors
    error,   // Add error to get the error object
  } = useQuery<ClassItem[]>({ // Expecting an array of ClassItem
    queryKey: ['classes'],
    queryFn: async () => { // Make queryFn async
      const response = await axios.get<ClassItem[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/classes`);
      return response.data; // TanStack Query expects the actual data, not the full Axios response
    },
    // Optional: add refetchOnWindowFocus: false if you don't want it refetching on tab focus
    // refetchOnWindowFocus: false,
  });

  // Log data when not loading, for debugging (can be removed in production)
  // Check if data exists before logging its structure, as it's undefined initially
  if (!isLoading && data) {
    console.log("Fetched Data:", data);
  }

  // 2. Handle different states: Loading, Error, and Success

  // Loading state
  if (isLoading) {
    return <div className="p-4 text-center text-gray-600">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§...</div>; // "Loading classes..."
  }

  // Error state
  if (isError) {
    console.error("Error fetching classes:", error); // Log the error for debugging
    return <div className="p-4 text-center text-red-500">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§: {error?.message || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</div>; // "Error loading classes: ..."
  }

  // Success state: Data is available
  return (
    <>
      <div className="bg-backGround-1 p-4"> {/* A general container for the whole section */}
        {/* Check if data is an array and not empty before mapping */}
        {data && data.length > 0 ? (
          <div className=""> {/* Added space-y for consistent vertical spacing */}
            {data.map((classItem) => (
              <div key={classItem.id} className='mb-[12px]'> {/* key prop is essential */}
                <div className='card-box'> {/* Ensure .card-box is defined in your CSS */}
                  <div className='flex justify-start items-center bg-white rounded-[22px] p-[16px] gap-[16px] '>
                    <div>
                      <img className='w-[56px] h-[56px]' src={darsYar} alt={`ØªØµÙˆÛŒØ± ${classItem.name}`} /> {/* Dynamic alt text */}
                    </div>
                    <div className='flex flex-col '>
                      <h1 className='font-extrabold line-clamp-1 text-[14px]'>{classItem.name}</h1>
                      <div className='flex justify-start items-start'>
                        <p className='bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]'>
                          {classItem.length} Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ²
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          // Handle case where data is empty after loading
          <div className="p-4 text-center text-gray-500">Ú©Ù„Ø§Ø³ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div> // "No classes to display."
        )}
      </div>
    </>
  );
};

export default Classes;
```

================
FILE: src\teacher\components\contentContainer\StudentAlert.tsx
================

```
import React from 'react'

const StudentAlert = () => {
  return (
    <div className='py-[16px]'>
         <div className='alert-box '>
            <div className='flex justify-between items-center bg-[#FFF0F0] rounded-[16px] px-[16px] py-[12px] gap-[16px] pl-[24px] text-[#FE4C4A] text-[12px]'>
              
                <div className='flex flex-col gap-[4px] '>
                    <h1 className=' line-clamp-1 '>Ø¹Ù„ÛŒ Ø±ÙØªØ§Ø± Ù‡Ø§ÛŒ Ø®Ø·Ø±Ù†Ø§Ú©ÛŒ Ø¯Ø§Ø±Ø¯</h1>
                   
                </div>
                 <div className='flex flex-col gap-[4px] '>
                    <h1 className='font-extrabold line-clamp-1  '>Ø¨Ø±Ø±Ø³ÛŒ</h1>
                   
                </div>
                
            </div>
        </div>
        
    </div>
  )
}

export default StudentAlert
```

================
FILE: src\teacher\components\contentContainer\Navbar.tsx
================

```
import React from 'react';
import { NavLink } from 'react-router-dom';

const Navbar = () => {
  // This function will be called by NavLink to determine the className
  const getNavLinkClass = ({ isActive }) => {
    // Add a bold style or a different color if the link is active
    return isActive ? 'font-extrabold text-blue-600' : 'font-extrabold';
  };

  return (
    <div>
      <div className='flex justify-between items-center bg-white py-[8px] px-[16px] text-[12px]'>
        <div>
          <NavLink to="/teacher/students" className={getNavLinkClass}>
            Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ²Ø§Ù†
          </NavLink>
        </div>
        <div>
          <NavLink to="/teacher/reports" className={getNavLinkClass}>
            Ú¯Ø²Ø§Ø±Ø´Ø§Øª
          </NavLink>
        </div>
        <div>
          <NavLink to="/teacher/chat" className={getNavLinkClass}>
            Ú†Øª Ù‡Ø§
          </NavLink>
        </div>
      </div>
      <hr className="border-[2px] border-borderColor-1 w-full" />
    </div>
  );
};

export default Navbar;
```

================
FILE: src\teacher\components\contentContainer\Modal.tsx
================

```
// src/components/Modal.tsx
import React, { FC, useEffect, useRef } from 'react';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
  title?: string; // Optional title for the modal
}

const Modal: FC<ModalProps> = ({ isOpen, onClose, children, title }) => {
  const modalRef = useRef<HTMLDivElement>(null);

  // Close modal on escape key press
  useEffect(() => {
    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
    } else {
      document.removeEventListener('keydown', handleEscape);
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isOpen, onClose]);

  // Click outside to close (optional, if you want to explicitly close on backdrop click)
  const handleBackdropClick = (event: React.MouseEvent<HTMLDivElement>) => {
    if (modalRef.current && !modalRef.current.contains(event.target as Node)) {
      onClose();
    }
  };

  if (!isOpen) return null;

  return (
    // Backdrop
    <div
      className="fixed inset-0 bg-opacity-25 flex items-center justify-center "
      onClick={handleBackdropClick} // Only close if clicking on the backdrop, not the modal content itself
      aria-modal="true"
      role="dialog"
      aria-labelledby={title ? "modal-title" : undefined}
    >
      {/* Modal content */}
      <div
        ref={modalRef}
        className="bg-white rounded-[24px] p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all  rounded-b-none"
      >
        <div className="flex justify-center items-center pb-3 mb-4">
          {title && (
            <h2 id="modal-title" className="text-xl font-semibold text-gray-900">
              {title}
            </h2>
          )}
        </div>
        {children}
      </div>
    </div>
  );
};

export default Modal;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonWelcome.tsx
================

```
import { FC } from "react";
import Header from "../../../components/common/Header";

import ChatButton from "../../../components/common/ChatButton";
import HeroSection from "../../../student/components/tarkibKon/welcome/HeroSection";
import CardSection from "../../../student/components/tarkibKon/welcome/CardSection";
import { useNavigate } from "react-router-dom";
;



const TarkibkonWelcome:FC = () => {
    const navigate=useNavigate()
    const handleNewChat=()=>{
        navigate('/student/tarkibkon/study-selection')
    }
    return <div >
        <Header title={'ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†'}/>
        <div className="bg-backGround-1 h-full pb-10 ">
  <div className="mx-[32px] ">
      <HeroSection/>
    <CardSection/>
    
  </div>
        </div>
       
        <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat}/>
    </div>
};

export default TarkibkonWelcome;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonStudySelection.tsx
================

```
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { RootState } from "../../../store";
import Header from "../../../components/common/Header";
import DisableChatButton from "../../../components/common/DisableChatButton";
import ChatButton from "../../../components/common/ChatButton";
import HeroSection from "../../components/tarkibKon/studySelection/HeroSection";
import MainContent from "../../components/tarkibKon/studySelection/MainContent";

const TarkibkonStudySelection = () => {
  const navigate = useNavigate();
  const infoButton = useSelector((state: RootState) => state.tarkibkon.studySelectionButton);

  const handleNext = () => {
    navigate('/student/tarkibkon/learn-topic-selection');
  };

  return (
    <div className="h-screen">
      <Header title={'ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†'} />
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        <HeroSection />
        <MainContent />
      </div>
      {infoButton ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default TarkibkonStudySelection;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonRecentChat.tsx
================

```

import Header from '../../../components/common/Header'
import ChatButton from '../../../components/common/ChatButton'
import RecentChatCard from '../../../components/common/RecentChatCard'
import RecentChats from '../../../components/RecentChats'

const TarkibkonRecentChat = () => {
  return (
    <>
      <div className='bg-backGround-1'>
        <Header title={'ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†'}/>
        {/* Changed gap to 16px here */}
        <div className='gap-[16px] m-[16px]'> 
          <h1 className=' font-extrabold text-[14px] '>Ú†Øª Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h1>
        </div>
        <div className=' flex flex-col gap-[12px] mx-[16px]'>
          <RecentChats/>
           
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯'/>
    </>
  )
}

export default TarkibkonRecentChat
```

================
FILE: src\student\pages\tarkibKon\TarkibkonLearnTopic.tsx
================

```
import { useDispatch, useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { RootState } from "../../../store";
import { useEffect, useState } from "react";
import { activeButtonReducer, disableButtonReducer, setLearnTopic } from "../../../slice/tarkibkonSlice";
import Header from "../../../components/common/Header";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import MainContent from "../../components/tarkibKon/learnTopic/MainContent";
import TopicSearchBox from "../../components/tarkibKon/learnTopic/TopicSearchBox";
import HeroSection from "../../components/tarkibKon/learnTopic/HeroSection";

const TarkibkonLearnTopic = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const selectedStudy = useSelector((state: RootState) => state.tarkibkon.selectedStudy);
  // selectedTopic from Redux now represents the ID of the selected card
  const learnTopic = useSelector((state: RootState) => state.tarkibkon.learnTopic); 

  const [searchQuery, setSearchQuery] = useState<string>('');

  // Redirect if no study is selected
  useEffect(() => {
    if (!selectedStudy) {
      navigate('/student/tarkibkon/study-selection');
    }
  }, [selectedStudy, navigate]);

  // Combined effect for button activation based on selection OR search query
  useEffect(() => {
    const isActive = (learnTopic !== null && learnTopic !== "") || (searchQuery.trim() !== "");
    if (isActive) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [learnTopic, searchQuery, dispatch]); // Depend on selectedTopic and searchQuery

  const handleStartChat = () => {
    // Before navigating, you might want to decide if the chat is based on a selected topic
    // or the search query. This logic depends on your backend expectations.
    // For now, we'll just navigate if *either* is active.
    if ((learnTopic && learnTopic !== "") || searchQuery.trim() !== "") {
      navigate('/student/tarkibkon/favorite-topic-selection');
    }
  };

  const handleTopicSelect = (topicId: string | null) => {
    // If a topic card is selected, clear the search query.
    // This ensures only one mode of input (selection or search) triggers the button.
    if (topicId) {
      setSearchQuery(""); 
      dispatch(setLearnTopic(topicId));
    } else {
      dispatch(setLearnTopic("")); // Deselect
    }
  };

  const handleSearchQueryChange = (query: string) => {
    setSearchQuery(query);
    // If the user types in the search box, deselect any topic card.
    if (query.trim() !== "") {
      dispatch(setLearnTopic("")); 
    }
  };

  // Get button activation state from Redux (if you want to control it that way)
  const isButtonActive = useSelector((state: RootState) => state.tarkibkon.studySelectionButton);

  return (
    <div className="h-screen">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ'}/>
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        
        <HeroSection />
        <div className="bg-white rounded-[24px] rounded-b-none pb-40 border-[2px] border-borderColor-1">
          <TopicSearchBox 
            searchQuery={searchQuery} 
            setSearchQuery={handleSearchQueryChange} // Use the new handler
          />
          <MainContent 
            onTopicSelect={handleTopicSelect} 
            selectedTopicFromParent={learnTopic} // Pass the selected topic to MainContent
          />
        </div>
      </div>
      {isButtonActive ? (
        <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleStartChat} />
      ) : (
        <DisableChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' />
      )}
    </div>
  );
};

export default TarkibkonLearnTopic;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonFavoriteTopic.tsx
================

```
// src/pages/StudySelection.tsx

import { useEffect, useState } from "react"; // Import useState
import { useDispatch, useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import Header from "../../../components/common/Header";

import {  activeButtonReducer, disableButtonReducer, setFavoriteTopic } from "../../../slice/tarkibkonSlice"; // Import reducers
import { RootState } from "../../../store";
import HeroSection from "../../components/tarkibKon/favoriteTopic/HeroSection";
import TopicSearchBox from "../../components/tarkibKon/favoriteTopic/TopicSearchBox";
import MainContent from "../../components/tarkibKon/favoriteTopic/MainContent";


const TarkibkonFavoriteTopic = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const selectedStudy = useSelector((state: RootState) => state.tarkibkon.selectedStudy);
  // selectedTopic from Redux now represents the ID of the selected card
  const favoriteTopic = useSelector((state: RootState) => state.tarkibkon.favoriteTopic); 

  const [searchQuery, setSearchQuery] = useState<string>('');

  // Redirect if no study is selected
  useEffect(() => {
    if (!selectedStudy) {
      navigate('/student/tarkibkon/study-selection');
    }
  }, [selectedStudy, navigate]);

  // Combined effect for button activation based on selection OR search query
  useEffect(() => {
    const isActive = (favoriteTopic !== null && favoriteTopic !== "") || (searchQuery.trim() !== "");
    if (isActive) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [favoriteTopic, searchQuery, dispatch]); // Depend on selectedTopic and searchQuery

  const handleStartChat = () => {
    // Before navigating, you might want to decide if the chat is based on a selected topic
    // or the search query. This logic depends on your backend expectations.
    // For now, we'll just navigate if *either* is active.
    if ((favoriteTopic && favoriteTopic !== "") || searchQuery.trim() !== "") {
      navigate('/student/tarkibkon/chat');
    }
  };

  const handleTopicSelect = (topicId: string | null) => {
    // If a topic card is selected, clear the search query.
    // This ensures only one mode of input (selection or search) triggers the button.
    if (topicId) {
      setSearchQuery(""); 
      dispatch(setFavoriteTopic(topicId));
    } else {
      dispatch(setFavoriteTopic("")); // Deselect
    }
  };

  const handleSearchQueryChange = (query: string) => {
    setSearchQuery(query);
    // If the user types in the search box, deselect any topic card.
    if (query.trim() !== "") {
      dispatch(setFavoriteTopic("")); 
    }
  };

  // Get button activation state from Redux (if you want to control it that way)
  const isButtonActive = useSelector((state: RootState) => state.tarkibkon.studySelectionButton);

  return (
    <div className="h-screen">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ'}/>
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        
        <HeroSection />
        <div className="bg-white rounded-[24px] rounded-b-none pb-40 border-[2px] border-borderColor-1">
          <TopicSearchBox
            searchQuery={searchQuery} 
            setSearchQuery={handleSearchQueryChange} // Use the new handler
          />
          <MainContent 
            onTopicSelect={handleTopicSelect} 
            selectedTopicFromParent={favoriteTopic} // Pass the selected topic to MainContent
          />
        </div>
      </div>
      {isButtonActive ? (
        <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleStartChat} />
      ) : (
        <DisableChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' />
      )}
    </div>
  );
};

export default TarkibkonFavoriteTopic;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonChatBot.tsx
================

```
import { useState, useEffect, useCallback } from "react";
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import Header from "../../../components/common/Header";
import Chat from "../../../components/common/Chat";
import { startTarkibkonSession } from "../../../api-chat";
import { ChatSession } from "../../../types/api";

interface Study {
    id: string;
    name: string;
}

interface RootState {
  tarkibkon: {
    selectedStudy: Study | null;
    learnTopic: string;
    favoriteTopic: string;
  };
}

const TarkibkonChatBot = () => {
  const navigate = useNavigate();
  const [isChatting, setIsChatting] = useState(false);
  const { selectedStudy, learnTopic, favoriteTopic } = useSelector((state: RootState) => state.tarkibkon);

  useEffect(() => {
    if (!selectedStudy || !learnTopic || !favoriteTopic) {
      navigate('/student/tarkibkon/study-selection');
    }
  }, [selectedStudy, learnTopic, favoriteTopic, navigate]);
  
  const startSessionCallback = useCallback((): Promise<ChatSession> => {
    if (!selectedStudy || !learnTopic || !favoriteTopic) {
      return Promise.reject("Selections are not valid.");
    }
    return startTarkibkonSession(selectedStudy.id, learnTopic, favoriteTopic);
  }, [selectedStudy, learnTopic, favoriteTopic]);

  if (!selectedStudy || !learnTopic || !favoriteTopic) {
    return null;
  }

  return (
    <div className="bg-backGround-1 h-screen flex flex-col">
      <Header title={'ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†'} />
      <div className="flex-grow flex flex-col">
          <Chat 
            startSession={startSessionCallback}
            setIsChatting={setIsChatting} 
          />
      </div>
    </div>
  );
};

export default TarkibkonChatBot;
```

================
FILE: src\student\pages\darsYar\DarsyarStudySelection.tsx
================

```
import { useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import Header from '../../../components/common/Header';
import HeroSection from '../../components/darsYar/studySelection/HeroSection';
import MainContent from '../../components/darsYar/studySelection/MainContent';
import ChatButton from '../../../components/common/ChatButton';
import DisableChatButton from '../../../components/common/DisableChatButton';


const DarsyarStudySelection = () => {
  const navigate = useNavigate();
  const infoButton: boolean = useSelector((state: any) => state?.darsyar?.studySelectionButton);
   
  const handleNext = () => {
    navigate('/student/darsyar/lesson-selection');
  };

  return (
    <div className="h-screen">
      <Header title={'Ø¯Ø±Ø³â€ŒÛŒØ§Ø±'} />
      <div className='font-yekanBakh bg-backGround-1 pb-20'> {/* Increased pb to avoid overlap with draggable MainContent */}
        <HeroSection />
         <MainContent />
      </div>
      {infoButton ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default DarsyarStudySelection;
```

================
FILE: src\student\pages\darsYar\DarsyarStudyAssistant.tsx
================

```
import { FC } from "react";
import { useNavigate } from "react-router-dom";
import Header from "../../../components/common/Header";
import HeroSection from "../../components/darsYar/studyAssistant/HeroSection";
import CardSection from "../../components/darsYar/studyAssistant/CardSection";
import ChatButton from "../../../components/common/ChatButton";

const DarsyarWelcome: FC = () => {
  const navigate = useNavigate();
  

  const handleNewChat = () => {
    navigate("/student/darsyar/study-selection");
  };

  return (
    <div>
      <Header title={'Ø¯Ø±Ø³â€ŒÛŒØ§Ø±'} />
      <div className="bg-backGround-1 h-full pb-10">
        <div className="mx-[32px]">
          <HeroSection />
          <CardSection />
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat} />
    </div>
  );
};

export default DarsyarWelcome;
```

================
FILE: src\student\pages\darsYar\DarsyarRecentChat.tsx
================

```
import ChatButton from "../../../components/common/ChatButton"
import Header from "../../../components/common/Header"
import RecentChatCard from "../../../components/common/RecentChatCard"
import RecentChats from "../../../components/RecentChats"


const DarsyarRecentChat = () => {
  return (
    <>
      <div className='bg-backGround-1'>
        <Header title={'Ø¯Ø±Ø³â€ŒÛŒØ§Ø±'}/>
        {/* Changed gap to 16px here */}
        <div className='gap-[16px] m-[16px]'> 
          <h1 className=' font-extrabold text-[14px] '>Ú†Øª Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h1>
        </div>
        <div className=' flex flex-col gap-[12px] mx-[16px]'>
         <RecentChats/>
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯'/>
    </>
  )
}

export default DarsyarRecentChat
```

================
FILE: src\student\pages\darsYar\DarsyarLessonSelection.tsx
================

```
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { useState, useEffect } from "react";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import Header from "../../../components/common/Header";
import MainContent from "../../components/darsYar/lessonSelection/MainContent";
import HeroSection from "../../components/darsYar/lessonSelection/HeroSection";

interface RootState {
  darsyar: {
    studySelectionButton: boolean;
    selectedStudy: string | null;
    selectedLessons: string[];
    hasSelectedLessons: boolean;
  };
}

const DarsyarLessonSelection = () => {
  const navigate = useNavigate();
  const [shouldNavigate, setShouldNavigate] = useState(false);
  const selectedStudy = useSelector((state: RootState) => state.darsyar.selectedStudy);
  const selectedLessons = useSelector((state: RootState) => state.darsyar.selectedLessons);

    useEffect(() => {
    // Navigate to login page if selections are missing
    if (!selectedStudy ) {
      navigate('/'); 
    }
  }, [selectedStudy, navigate]);
  useEffect(() => {
    if (shouldNavigate && selectedStudy && selectedLessons.length > 0) {
      navigate('/student/darsyar/chat');
    }
  }, [shouldNavigate, selectedStudy, selectedLessons, navigate]);

  const handleStartChat = () => {
    setShouldNavigate(true);
  };

  // Check both conditions for button activation
  const isButtonActive = selectedStudy !== null && selectedLessons.length > 0;

  return (
    <div>
      <div>
        <Header title={'Ø¯Ø±Ø³â€ŒÛŒØ§Ø±'} />
        <div className='bg-backGround-1'>
          <HeroSection />
          <MainContent />
        </div>
        {isButtonActive ? (
          <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleStartChat} />
        ) : (
          <DisableChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' />
        )}
      </div>
    </div>
  );
};

export default DarsyarLessonSelection;

```

================
FILE: src\student\pages\darsYar\DarsyarChatWithBot.tsx
================

```
// src/student/pages/darsYar/DarsyarChatWithBot.tsx
import { useState, useEffect, useCallback } from "react";
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import LessonInformation from "../../components/darsYar/chatWithBot/LessonInformation";
import Header from "../../../components/common/Header";
import Chat from "../../../components/common/Chat";
import { startDarsYarSession } from "../../../api-chat";
import { ChatSession } from "../../../types/api";

interface Study {
  id: string;
  name: string;
}

interface RootState {
  darsyar: {
    selectedStudy: Study | null;
    selectedLessons: { id: string; name: string; }[];
  };
}

const DarsyarChatWithBot = () => {
  const navigate = useNavigate();
  const [isChatting, setIsChatting] = useState(false);
  const [showLessonInfo, setShowLessonInfo] = useState(true);
  const selectedStudy = useSelector((state: RootState) => state.darsyar.selectedStudy);
  const selectedLessons = useSelector((state: RootState) => state.darsyar.selectedLessons);

  useEffect(() => {
    // Navigate to login page if selections are missing
    if (!selectedStudy || selectedLessons.length === 0) {
      navigate('/'); 
    }
  }, [selectedStudy, selectedLessons, navigate]);
  
  const startSessionCallback = useCallback((): Promise<ChatSession> => {
    if (!selectedStudy || selectedLessons.length === 0) {
      return Promise.reject("Selections are not valid.");
    }
    return startDarsYarSession(
      selectedStudy.id,
      selectedLessons.map(lesson => lesson.id)
    );
  }, [selectedStudy, selectedLessons]);

  // const handleTypingStateChange = (isTyping: boolean) => {
  //   if(isTyping){
  //     setShowLessonInfo(!isTyping);
  //   }
  // };

  // Render nothing while redirecting
  if (!selectedStudy || selectedLessons.length === 0) {
    return null;
  }

  return (
    <div className="bg-backGround-1 h-screen flex flex-col">
      <Header title={'Ø¯Ø±Ø³â€ŒÛŒØ§Ø±'} />
      {showLessonInfo && (
        <LessonInformation 
          study={selectedStudy.name}
          lesson={selectedLessons.map(l => l.name).join('ØŒ ')}
        />
      )}
      <main className={`flex-grow flex flex-col transition-all duration-300 ${showLessonInfo ? 'pt-[92px]' : 'pt-[52px]'}`}>
          <Chat 
            startSession={startSessionCallback}
            setIsChatting={setIsChatting} 
            // onTypingStateChange={handleTypingStateChange}
          />
      </main>
    </div>
  );
};

export default DarsyarChatWithBot;
```

================
FILE: src\student\pages\konjKav\KonjkavWelcome.tsx
================

```
import { FC } from "react";
import Header from "../../../components/common/Header";

import ChatButton from "../../../components/common/ChatButton";
import HeroSection from "../../../student/components/konjKav/welcome/HeroSection";
import CardSection from "../../../student/components/konjKav/welcome/CardSection";
import { useNavigate } from "react-router-dom";



const KonjkavWelcome:FC = () => {
    const navigate=useNavigate()
    const handleNavigate=()=>{
        navigate('/student/konjkav/study-selection')
    }

    return <div >
        <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ'}/>
        <div className="bg-backGround-1 h-full pb-10 ">
  <div className="mx-[32px] ">
      <HeroSection/>
    <CardSection/>
    
  </div>
        </div>
       
        <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNavigate}/>
    </div>
};

export default KonjkavWelcome;
```

================
FILE: src\student\pages\konjKav\KonjkavTopicSelection.tsx
================

```
// src/pages/StudySelection.tsx

import { useEffect, useState } from "react"; // Import useState
import { useDispatch, useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import Header from "../../../components/common/Header";
import HeroSection from "../../components/konjKav/topicSelection/HeroSection";
import MainContent from "../../components/konjKav/topicSelection/MainContent";
import { setSelectedTopic, activeButtonReducer, disableButtonReducer } from "../../../slice/konjkavSlice"; // Import reducers
import { RootState } from "../../../store";
import TopicSearchBox from "../../components/konjKav/topicSelection/TopicSearchBox";

const KonjkavTopicSelection = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const selectedStudy = useSelector((state: RootState) => state.konjkav.selectedStudy);
  // selectedTopic from Redux now represents the ID of the selected card
  const selectedTopic = useSelector((state: RootState) => state.konjkav.selectedTopic); 

  const [searchQuery, setSearchQuery] = useState<string>('');

  // Redirect if no study is selected
  useEffect(() => {
    if (!selectedStudy) {
      navigate('/student/konjkav/study-selection');
    }
  }, [selectedStudy, navigate]);

  // Combined effect for button activation based on selection OR search query
  useEffect(() => {
    const isActive = (selectedTopic !== null && selectedTopic !== "") || (searchQuery.trim() !== "");
    if (isActive) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [selectedTopic, searchQuery, dispatch]); // Depend on selectedTopic and searchQuery

  const handleStartChat = () => {
    // Before navigating, you might want to decide if the chat is based on a selected topic
    // or the search query. This logic depends on your backend expectations.
    // For now, we'll just navigate if *either* is active.
    if ((selectedTopic && selectedTopic !== "") || searchQuery.trim() !== "") {
      navigate('/student/konjkav/chat');
    }
  };

  const handleTopicSelect = (topicId: string | null) => {
    // If a topic card is selected, clear the search query.
    // This ensures only one mode of input (selection or search) triggers the button.
    if (topicId) {
      setSearchQuery(""); 
      dispatch(setSelectedTopic(topicId));
    } else {
      dispatch(setSelectedTopic("")); // Deselect
    }
  };

  const handleSearchQueryChange = (query: string) => {
    setSearchQuery(query);
    // If the user types in the search box, deselect any topic card.
    if (query.trim() !== "") {
      dispatch(setSelectedTopic("")); 
    }
  };

  // Get button activation state from Redux (if you want to control it that way)
  const isButtonActive = useSelector((state: RootState) => state.konjkav.studySelectionButton);

  return (
    <div className="h-screen">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ'}/>
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        
        <HeroSection />
        <div className="bg-white rounded-[24px] rounded-b-none pb-40 border-[2px] border-borderColor-1">
          <TopicSearchBox 
            searchQuery={searchQuery} 
            setSearchQuery={handleSearchQueryChange} // Use the new handler
          />
          <MainContent 
            onTopicSelect={handleTopicSelect} 
            selectedTopicFromParent={selectedTopic} // Pass the selected topic to MainContent
          />
        </div>
      </div>
      {isButtonActive ? (
        <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleStartChat} />
      ) : (
        <DisableChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' />
      )}
    </div>
  );
};

export default KonjkavTopicSelection;
```

================
FILE: src\student\pages\konjKav\KonjkavTopicBot.tsx
================

```
import { useState, useEffect, useCallback } from "react";
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import Header from "../../../components/common/Header";
import Chat from "../../../components/common/Chat";
import { startKonjkavSession } from "../../../api-chat";
import { ChatSession } from "../../../types/api";

interface Study {
    id: string;
    name: string;
}

interface RootState {
  konjkav: {
    selectedStudy: Study | null;
    selectedTopic: string;
  };
}

const KonjkavTopicBot = () => {
  const navigate = useNavigate();
  const [isChatting, setIsChatting] = useState(false);
  const { selectedStudy, selectedTopic } = useSelector((state: RootState) => state.konjkav);

  useEffect(() => {
    if (!selectedStudy || !selectedTopic) {
      navigate('/student/konjkav/study-selection');
    }
  }, [selectedStudy, selectedTopic, navigate]);
  
  const startSessionCallback = useCallback((): Promise<ChatSession> => {
    if (!selectedStudy || !selectedTopic) {
      return Promise.reject("Selections are not valid.");
    }
    return startKonjkavSession(selectedStudy.id, selectedTopic);
  }, [selectedStudy, selectedTopic]);

  if (!selectedStudy || !selectedTopic) {
    return null;
  }

  return (
    <div className="bg-backGround-1 h-screen flex flex-col">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ'} />
      <div className="flex-grow flex flex-col">
          <Chat 
            startSession={startSessionCallback}
            setIsChatting={setIsChatting} 
          />
      </div>
    </div>
  );
};

export default KonjkavTopicBot;
```

================
FILE: src\student\pages\konjKav\KonjkavStudySelection.tsx
================

```
import { useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import Header from '../../../components/common/Header';
import HeroSection from '../../components/konjKav/studySelection/HeroSection';
import MainContent from '../../components/konjKav/studySelection/MainContent';
import ChatButton from '../../../components/common/ChatButton';
import DisableChatButton from '../../../components/common/DisableChatButton';
import { RootState } from '../../../store';

const KonjkavStudySelection = () => {
  const navigate = useNavigate();
  const infoButton = useSelector((state: RootState) => state.konjkav.studySelectionButton);

  const handleNext = () => {
    navigate('/student/konjkav/topic-selection');
  };

  return (
    <div className="h-screen">
      <Header title={'Ú©Ù†Ø¬Ú©Ø§Ùˆ'} />
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        <HeroSection />
        <MainContent />
      </div>
      {infoButton ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default KonjkavStudySelection;
```

================
FILE: src\student\pages\konjKav\KonjkavRecentChat.tsx
================

```
import ChatButton from "../../../components/common/ChatButton"
import Header from "../../../components/common/Header"

import RecentChats from "../../../components/RecentChats"

const KonjkavRecentChat = () => {
  return (
    <>
      <div className='bg-backGround-1'>
        <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ'}/>
        {/* Changed gap to 16px here */}
        <div className='gap-[16px] m-[16px]'> 
          <h1 className=' font-extrabold text-[14px] '>Ú†Øª Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h1>
        </div>
        <div className=' flex flex-col gap-[12px] mx-[16px]'>
          <RecentChats/>
          
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯'/>
    </>
  )
}

export default KonjkavRecentChat
```

================
FILE: src\student\components\home\ToolCard.tsx
================

```
import { FC } from "react";
import { useNavigate } from "react-router-dom";
import icon from './../../../assets/images/DarsYar.png';
 
interface ToolCardProps {
  
  title: string;
  description: string;
  tool: "DARS_YAR" | "KONJKAV" | "SOALYAR" | "AZMOON_SAZ" | "TARKIB_KON";
  hasRecentChats?: boolean;
}

const getToolRoute = (tool: string, hasRecentChats: boolean) => {
  switch (tool) {
    case "DARS_YAR":
      return hasRecentChats ? "/student/darsyar/recent-chat" : "/student/darsyar/study-assistant";
    case "KONJKAV":
      return hasRecentChats ? "/student/konjkav/recent-chat" : "/student/konjkav/welcome";
    case "TARKIB_KON":
      return hasRecentChats ? "/student/tarkibkon/recent-chat" : "/student/tarkibkon/welcome";
    case "SOALYAR":
      return hasRecentChats ? "/student/soalyar/recent-chat" : "/student/soalyar/welcome";
    case "AZMOON_SAZ":
      return hasRecentChats ? "/student/azmoon/recent-chat" : "/student/azmoon/welcome";
    default:
      return "/student";
  }
};

const ToolCard: FC<ToolCardProps> = ({  title, description, tool, hasRecentChats = false }) => {
  const navigate = useNavigate();

  const handleClick = () => {
    const route = getToolRoute(tool, hasRecentChats);
    navigate(route);
  };

  return (
  <div onClick={handleClick} >
   
   <div className="card-box cursor-pointer hover:transform hover:translate-y-1">
     <div className="flex flex-col items-center text-center  rounded-[24px] bg-white   relative p-[16px]  ">
      <img src={icon} className=" absolute -translate-y-11 h-[56px] w-[56px]" alt={title} />
      <h3 className="font-extrabold text-[18px] mt-[16px]">{title}</h3>
      <p className="text-[10px] ">{description}</p>
    </div>
   </div>
  </div>
  );
};

export default ToolCard;

```

================
FILE: src\student\components\home\RecentItem.tsx
================

```
import { FC } from "react";

interface RecentItemProps {
  icon: React.ReactNode;
  title: string;
  date: string;
}

const RecentItem: FC<RecentItemProps> = ({ icon, title, date }) => {
  return (
    <div className="flex items-center justify-between bg-white p-3 rounded-lg shadow">
      <div className="flex items-center gap-2">
        <div className="text-2xl">{icon}</div>
        <div className="flex flex-col">
          <span className="text-sm font-medium truncate">{title}</span>
          <span className="text-xs text-gray-500">{date}</span>
        </div>
      </div>
    </div>
  );
};

export default RecentItem;

```

================
FILE: src\student\components\home\HeroSection.tsx
================

```
import { FC } from "react";
import book from './../../../assets/images/book.png'
import hero from './../../../assets/images/heroSection.png'

const HeroSection: FC = () => {
  return (
   <div  className="bg-gradient-to-l from-custom-purple via-custom-orange-1 to-custom-orange-2 p-[2px] rounded-[18px] flex items-center justify-between h-25 ">
        <div className="flex h-full w-full bg-gradient-to-l from-purple-100 to-orange-100 rounded-[16px] ">
            <div className="flex flex-3/4 justify-center items-center flex-col">
       <div className="flex justify-center">
         <img src={book}/>
          <h2 className="font-bold text-lg text-center">Ø¯Ø±Ø³â€ŒÛŒØ§Ø±</h2>
       </div>
          <p className="text-sm text-gray-700">Ø¨Ù‡Øª Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ø¨Ù‡ØªØ± Ø¨ÙÙ‡Ù…ÛŒ!</p>
        </div>
        <div className="text-4xl flex flex-1/4 justify-end ml-4">
        <img  src={hero}/>
        </div>
        </div>
        
      </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\home\Header.tsx
================

```
import { FC, useState, useEffect } from "react";
import darsYar from './../../../assets/images/DarsYar.png'
const Header: FC = () => {
  const [isSticky, setIsSticky] = useState(false); // State to track stickiness

  useEffect(() => {
    const handleScroll = () => {
      // Determine the scroll position at which the header should become sticky.
      // A common approach is to make it sticky once it scrolls past its initial position.
      // For simplicity, let's say 10 pixels from the top. You might adjust this.
      const offset = window.scrollY;
      if (offset > 10) { // Or headerRef.current.offsetTop if you want it exact
        setIsSticky(true);
      } else {
        setIsSticky(false);
      }
    };

    // Add the scroll event listener when the component mounts
    window.addEventListener("scroll", handleScroll);

    // Clean up the event listener when the component unmounts
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []); // Empty dependency array means this effect runs once on mount and cleans up on unmount

  return (
    <div>
      <header
        className={`
          flex items-center justify-center bg-white py-[24px] px-[16px] h-[52px]
          transition-all duration-300 ease-in-out z-50
          ${isSticky ? "fixed top-0 w-full shadow-md" : ""}
        `}
      >
        <div className="rounded-md flex items-center justify-center ">
          {/* Your left content (e.g., menu icon) */}
        </div>
        <img src={darsYar} className="h-[24px] w-[24px] ml-[8px]"/>
        <div className="text-xl font-bold">Ú©ÛŒØ¯Ùˆ</div>
        
        {/* Your right content (e.g., user icon) */}
      </header>
      {/*
        This div acts as a "spacer" to prevent content from jumping up
        when the header becomes `position: fixed`.
        Its height should match the header's height (52px in your case).
      */}
      {isSticky && <div className="h-[52px]"></div>}
      <hr className="border-[1.5px] border-borderColor-1 w-full" />
    </div>
  );
};

export default Header;
```

================
FILE: src\teacher\components\contentContainer\students\StudentsActivities.tsx
================

```
import React from "react";
import StudentActivity from "./StudentActivity";

const StudentsActivities = () => {
  return (
    <div className="border-[2px] border-borderColor-1 rounded-[24px] bg-white">
      <StudentActivity/>
      <StudentActivity/>
      <StudentActivity/>

      <StudentActivity/>
       
    </div>
  );
};

export default StudentsActivities;

```

================
FILE: src\teacher\components\contentContainer\students\StudentActivity.tsx
================

```
import React from "react";
import darsyar from "./../../../../assets/images/DarsYar.png";
const StudentActivity = () => {
  return (
    <div >
      <div className="flex  p-[16px] gap-[16px]  items-center">
        <div >
          <img className="w-[32px] h-[32px] " src={darsyar} />
        </div>
        <div  className="flex flex-col">
          <div className="flex justify-between mb-[8px]">
           <div className="flex ">
             <h1 className="font-extrabold text-[14px]">Ø§Ù…ÛŒØ± Ø¹Ù„ÛŒ Ø±Ø³ØªÙ…ÛŒ</h1>
           </div>

           <div className="flex mr-10">
             <p className=" bg-backGround-1  px-[8px] rounded-[16px] text-[10px] py-[2px] mx-[2px]">
              ÙØ¹Ø§Ù„
            </p>
            <p className=" bg-backGround-1  px-[8px] rounded-[16px] text-[10px] py-[2px]">
              Ø®ÙˆØ´Ø­Ø§Ù„
            </p>
           </div>
          </div>
          <div className="flex justify-between ">
           <div className="flex ">
             <h1 className="font-extrabold text-[10px]"> Ø¢Ø®Ø±ÛŒÙ† ÙØ¹Ø§Ù„ÛŒØª : 22 Ø®Ø±Ø¯Ø§Ø¯ </h1>
           </div>

           <div className="flex mr-10">
            
            <p className=" bg-[#F2EFFF]  px-[8px] rounded-[16px] text-[10px] py-[2px]">
              Ø®ÙˆØ¨
            </p>
           </div>
          </div>
        </div>
        
      </div>
    </div>
  );
};

export default StudentActivity;

```

================
FILE: src\teacher\components\contentContainer\reports\StudentReports.tsx
================

```
import React, { useState } from "react";

import StudentModal from "./modals/StudentModal";

const StudentReports = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);

  const handleOpenModal = () => {
    setIsModalOpen(true);
  };

  const handleCloseModal = () => {
    setIsModalOpen(false);
  };
  return (
    <div className="mb-[32px]">
      <div className="mb-[8px] flex justify-between">
        <h1> Ø§Ù…ÛŒØ± Ø¹Ù„ÛŒ</h1>
        <img src={""} />
        <button className="rounded-[24px] px-[8px] py-[2px] " onClick={handleOpenModal}>  Ù…Ø´Ø§Ù‡Ø¯Ù‡</button>
      </div>
      <div>
        <h1 className="text-[12px]">
          Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ² Ø¯Ù†Ø¨Ø§Ù„ ØªÙ‚Ù„Ø¨ Ú©Ø±Ø¯Ù† Ø¯Ø± Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø§Ø³Øª Ùˆ Ù…ÛŒØ®ÙˆØ§Ø¯ Ù‡Ø±Ø¬ÙˆØ± Ø´Ø¯Ù‡ Ø¯Ø±Ø³ Ù†Ø®ÙˆÙ†Ù‡
          ÙˆÚ¯Ø±Ù†Ù‡ ØªÙ‡Ø¯ÛŒØ¯ Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø´ÛŒ Ù…ÛŒÚ©Ù†Ù‡!
        </h1>
    
      </div>
      <StudentModal handleCloseModal={handleCloseModal} isModalOpen={isModalOpen}/>
    </div>
  );
};

export default StudentReports;

```

================
FILE: src\teacher\components\contentContainer\reports\ReportTools.tsx
================

```
import React, { useState } from "react";
import LessonModal from "./modals/LessonModal";
import ToolsModal from "./modals/ToolsModal";

interface ReportType {
  title: string;
}

const ReportTools: React.FC<ReportType> = ({ title }) => {
  const [isModalOpen, setIsModalOpen] = useState(false);
  
    const handleOpenModal = () => {
      setIsModalOpen(true);
    };
  
    const handleCloseModal = () => {
      setIsModalOpen(false);
    };
  return (
    <div className="card-box">
      <div className="flex justify-start items-center bg-white rounded-[22px] p-[16px]  ">
       <button onClick={handleOpenModal}>
         <div className="flex   ">
          <h1 className="font-extrabold  text-[14px]"> {title}</h1>
        </div>
       </button>
       {title==='Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§' ? (<LessonModal handleCloseModal={handleCloseModal} isModalOpen={isModalOpen}/>) :(<ToolsModal handleCloseModal={handleCloseModal} isModalOpen={isModalOpen}/>)}
       
      </div>
    </div>
  );
};

export default ReportTools;

```

================
FILE: src\student\components\tarkibKon\welcome\HeroSection.tsx
================

```
import happyFace from './../../../../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='mb-[32px] pt-[16px]'>
        <div className='flex justify-center  p-4'>
        <img src={happyFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\student\components\tarkibKon\welcome\CardSection.tsx
================

```
import React from 'react'
import { studyAssistantConstatnt } from '../../../../constants/studyAssistantConstant'


const CardSection:React.FC = () => {
  return (
  <div className='h-screen'>
   {studyAssistantConstatnt.map(study=>(
        <div className='card-box mb-[12px] gap-[12px] '>
        <div className=' flex justify-center flex-col bg-white rounded-[22px] gap-[8px] p-[16px] '>
            <div className='gap-[8px] flex items-center justify-start'>
               <img src={study.logo}/>
                <h1 className='font-extrabold text-[14px]'> {study.title}   </h1>

            </div>
             <div>
           <p className=' text-justify  text-[14px]'>{study.description}</p>
        </div>
            
        </div>
       
     </div>
  )
   )}
  </div>)
}

export default CardSection
```

================
FILE: src\student\components\tarkibKon\studySelection\MainContent.tsx
================

```
import React from 'react';
import CardSelector from './CardSelector';

const MainContent: React.FC = () => {
  return (
    <div className='border-2 border-borderColor-1 bg-white rounded-[16px] p-4 h-full w-full overflow-y-auto flex flex-col'>
      <div> 
        <CardSelector />
      </div>
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\tarkibKon\studySelection\HeroSection.tsx
================

```
import React from 'react'
import darsYar from './../../../../assets/images/DarsYar.png'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col '>
      <img src={darsYar} className='w-[104px] h-[104px] mb-10 mt-5'/>
      <h1 className='mb-10'>
        Ù„Ø·ÙØ§ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø±Ø³ Ù‡Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\tarkibKon\studySelection\CardSelector.tsx
================

```
import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { setSelectedStudy } from '../../../../slice/tarkibkonSlice';
import CardContent from './CardContent';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface Subject {
  id: string;
  name: string;
}

const CardSelector: React.FC = () => {
    const dispatch = useDispatch();
    const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

    const { data: subjects, isLoading, isError } = useQuery<Subject[]>({
        queryKey: ['subjects'],
        queryFn: async () => {
            const response = await axios.get<Subject[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects`);
            return response.data;
        },
    });

    const handleCardClick = (subject: Subject) => {
        if (selectedCardId === subject.id) {
            setSelectedCardId(null);
            dispatch(setSelectedStudy(null));
        } else {
            setSelectedCardId(subject.id);
            dispatch(setSelectedStudy(subject));
        }
    };

    if (isLoading) return <div>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³...</div>;
    if (isError) return <div>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³.</div>;

    return (
        <div className="grid grid-cols-2 gap-[12px]">
            {subjects?.map((subject) => (
                <CardContent
                    key={subject.id}
                    name={subject.name}
                    isSelected={selectedCardId === subject.id}
                    onClick={() => handleCardClick(subject)}
                />
            ))}
        </div>
    );
};

export default CardSelector;
```

================
FILE: src\student\components\tarkibKon\studySelection\CardContent.tsx
================

```
import React, { useEffect } from "react";
import { useDispatch } from "react-redux";
import riazi from "./../../../../assets/images/riazi.png";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/tarkibkonSlice";

interface CardContentProps {
  name: string;
  isSelected: boolean;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({ name, isSelected, onClick }) => {
  const dispatch = useDispatch();

  useEffect(() => {
    if (isSelected) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [isSelected, dispatch]);

  return (
    <div className={`${isSelected ? `onClickedCard-box transform translate-y-1` : "card-box"}`}>
      <div
        className={`rounded-[22px] cursor-pointer transition-colors duration-200 flex flex-col overflow-hidden h-full ${isSelected ? `bg-backGroundCard` : "bg-white"}`}
        onClick={onClick}
      >
        <img src={riazi} className="w-full h-auto object-contain" alt={name}/>
        <div className="p-4 text-center">
          <h1 className="text-sm font-semibold">{name}</h1>
        </div>
      </div>
    </div>
  );
};

export default CardContent;
```

================
FILE: src\student\components\tarkibKon\learnTopic\TopicSelector.tsx
================

```
// src/student/pages/konjKav/topicSelection/TopicSelector.tsx
import React from 'react';
import TopicCard from './TopicCard'; // Assuming TopicCard is in the same directory

interface Card {
  id: string;
  title: string;
}

interface TopicSelectorProps {
  onSelectCard: (id: string | null) => void;
  selectedCardId: string | null; // This will now reflect the single selected card
  isDisabled: boolean;
}

const TopicSelector: React.FC<TopicSelectorProps> = ({ onSelectCard, selectedCardId, isDisabled }) => {
  const cards: Card[] = [
    { id: 'math', title: 'Ø±ÛŒØ§Ø¶ÛŒ' },
    { id: 'science', title: 'Ø¹Ù„ÙˆÙ…' },
    { id: 'history', title: 'ØªØ§Ø±ÛŒØ®' },
    { id: 'geography', title: 'Ø¬ØºØ±Ø§ÙÛŒØ§' },
    { id: 'literature', title: 'Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ ØªØ±' },
    { id: 'art', title: 'Ù‡Ù†Ø±' },
  ];

  const handleCardClick = (clickedId: string) => {
    if (!isDisabled) {
      // If the clicked card is already selected, deselect it. Otherwise, select it.
      onSelectCard(selectedCardId === clickedId ? null : clickedId);
    }
  };

  return (
    <div
      className={`
        flex flex-wrap gap-[12px]
        ${isDisabled ? 'opacity-60 pointer-events-none' : ''} // Visual feedback and prevent clicks
      `}
    >
      {cards.map((card) => (
        <TopicCard
          key={card.id}
          title={card.title}
          isSelected={selectedCardId === card.id} // Pass down the actual selected ID
          onClick={() => handleCardClick(card.id)}
          isDisabled={isDisabled}
        />
      ))}
    </div>
  );
};

export default TopicSelector;
```

================
FILE: src\student\components\tarkibKon\learnTopic\TopicSearchBox.tsx
================

```
import React from 'react';

interface TopicSearchBoxProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

const TopicSearchBox: React.FC<TopicSearchBoxProps> = ({ searchQuery, setSearchQuery }) => {
  return (
    <div className="mx-[16px] my-4 ">
      <div className="relative">
        <textarea
          rows={1}
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder=" Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³..."
          className="w-full bg-white text-[12px] border-borderColor-1 border-[2px] rounded-[24px] p-[16px] "
          style={{ direction: 'rtl' }}
        />
      </div>
    </div>
  );
};

export default TopicSearchBox;
```

================
FILE: src\student\components\tarkibKon\learnTopic\TopicCard.tsx
================

```
import React from "react";

interface TopicCardProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
  isDisabled?: boolean;
}

const TopicCard: React.FC<TopicCardProps> = ({ title, isSelected, onClick, isDisabled }) => {
  return (
    <div>
      <div
        className={`
          ${isSelected ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"}
          inline-block
          ${isDisabled ? 'pointer-events-none' : ''} // Prevent clicks when disabled
        `}
      >
        <div
          className={`
            py-[8px] px-[16px] rounded-[16px]
            ${isSelected ? "bg-backGroundCard" : "bg-white"}
            ${isDisabled ? 'cursor-not-allowed' : 'cursor-pointer'} 
          `}
          onClick={onClick}
        >
          <div className="flex justify-start items-center">
            <h1 className="text-[14px] font-extrabold whitespace-nowrap">
              {title}
            </h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopicCard;
```

================
FILE: src\student\components\tarkibKon\learnTopic\Topic.tsx
================

```
import React, { useState } from "react";

import TopicSelector from "./TopicSelector";

const Topic = () => {
  const [textAreaContent, setTextAreaContent] = useState<string>("");
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleTextAreaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const value = e.target.value;
    setTextAreaContent(value);
    // If user starts typing, unselect any card
    if (value.length > 0) {
      setSelectedCardId(null);
    }
  };

  const handleCardSelection = (id: string | null) => {
    setSelectedCardId(id);
    // If a card is selected, clear the textarea
    if (id !== null) {
      setTextAreaContent("");
    }
  };

  // Determine if textarea should be disabled
  const isTextAreaDisabled = selectedCardId !== null;
  // Determine if TopicSelector (cards) should be disabled
  const isTopicSelectorDisabled = textAreaContent.length > 0;

  return (
    <div className="flex justify-center bg-white  rounded-[24px] rounded-b-none p-[16px] flex-col pb-20">
      <textarea
        placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... "
        className="p-[16px] border-[2px] border-backGround-1 rounded-[16px] w-full text-[14px] resize-none overflow-hidden" // Added resize-none
        rows={1} // Made textarea smaller by setting rows
        value={textAreaContent}
        onChange={handleTextAreaChange}
        disabled={isTextAreaDisabled}
        style={isTextAreaDisabled ? { opacity: 0.6, cursor: 'not-allowed' } : {}} 
        
      />
      <h1 className="font-extrabold text-[14px] mt-[16px] mb-[12px]">
        Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
      </h1>
      <div className="flex flex-wrap gap-[12px]">
        <TopicSelector
          onSelectCard={handleCardSelection}
          selectedCardId={selectedCardId}
          isDisabled={isTopicSelectorDisabled}
        />
      </div>
    </div>
  );
};

export default Topic;
```

================
FILE: src\student\components\tarkibKon\learnTopic\MainContent.tsx
================

```
// src/student/pages/konjKav/topicSelection/MainContent.tsx
import React from 'react';
import { useDispatch } from 'react-redux';
import { activeButtonReducer, disableButtonReducer } from '../../../../slice/konjkavSlice';
import TopicSelector from './TopicSelector'

// This Topic interface isn't directly used by TopicSelector anymore,
// but it's good to keep if you plan to use these topics for filtering/search later.
interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

interface MainContentProps {
  onTopicSelect: (topicId: string | null) => void; // Now passes a single ID or null
  selectedTopicFromParent: string | null; // New prop to receive the currently selected topic
}

const MainContent: React.FC<MainContentProps> = ({ onTopicSelect, selectedTopicFromParent }) => {
  const dispatch = useDispatch();

 

  // handleTopicSelect now directly passes the selected ID to the parent via onTopicSelect
  const handleTopicSelect = (topicId: string | null) => {
    onTopicSelect(topicId); // Pass the ID directly to the parent
    
    // Logic for activating/deactivating button based on selection
    if (topicId) { // If something is selected
      dispatch(activeButtonReducer());
    } else { // If nothing is selected
      dispatch(disableButtonReducer());
    }
  };

  return (
    <div
      className='
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <TopicSelector
        onSelectCard={handleTopicSelect}
        selectedCardId={selectedTopicFromParent} // Pass the selected ID from parent to TopicSelector
        isDisabled={false} // Assuming TopicSelector itself is not disabled
      />
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\tarkibKon\learnTopic\HeroSection.tsx
================

```
import React from 'react';
import konjkav from './../../../../assets/images/konjkav.png';

const HeroSection = () => {
  return (
    <div className="flex justify-center items-center flex-col ">
      <img src={konjkav} className="w-[104px] h-[104px] mb-10 mt-5" />
      <h1 className="mb-10">Ù„Ø·ÙØ§ Ù…ÙˆØ¶ÙˆØ¹ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h1>
    </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\tarkibKon\favoriteTopic\TopicSelector.tsx
================

```
// src/student/pages/konjKav/topicSelection/TopicSelector.tsx
import React from 'react';
import TopicCard from './TopicCard'; // Assuming TopicCard is in the same directory

interface Card {
  id: string;
  title: string;
}

interface TopicSelectorProps {
  onSelectCard: (id: string | null) => void;
  selectedCardId: string | null; // This will now reflect the single selected card
  isDisabled: boolean;
}

const TopicSelector: React.FC<TopicSelectorProps> = ({ onSelectCard, selectedCardId, isDisabled }) => {
  const cards: Card[] = [
    { id: 'math', title: 'Ø±ÛŒØ§Ø¶ÛŒ' },
    { id: 'science', title: 'Ø¹Ù„ÙˆÙ…' },
    { id: 'history', title: 'ØªØ§Ø±ÛŒØ®' },
    { id: 'geography', title: 'Ø¬ØºØ±Ø§ÙÛŒØ§' },
    { id: 'literature', title: 'Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ ØªØ±' },
    { id: 'art', title: 'Ù‡Ù†Ø±' },
  ];

  const handleCardClick = (clickedId: string) => {
    if (!isDisabled) {
      // If the clicked card is already selected, deselect it. Otherwise, select it.
      onSelectCard(selectedCardId === clickedId ? null : clickedId);
    }
  };

  return (
    <div
      className={`
        flex flex-wrap gap-[12px]
        ${isDisabled ? 'opacity-60 pointer-events-none' : ''} // Visual feedback and prevent clicks
      `}
    >
      {cards.map((card) => (
        <TopicCard
          key={card.id}
          title={card.title}
          isSelected={selectedCardId === card.id} // Pass down the actual selected ID
          onClick={() => handleCardClick(card.id)}
          isDisabled={isDisabled}
        />
      ))}
    </div>
  );
};

export default TopicSelector;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\TopicSearchBox.tsx
================

```
import React from 'react';

interface TopicSearchBoxProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

const TopicSearchBox: React.FC<TopicSearchBoxProps> = ({ searchQuery, setSearchQuery }) => {
  return (
    <div className="mx-[16px] my-4 ">
      <div className="relative">
        <textarea
          rows={1}
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder=" Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³..."
          className="w-full bg-white text-[12px] border-borderColor-1 border-[2px] rounded-[24px] p-[16px] "
          style={{ direction: 'rtl' }}
        />
      </div>
    </div>
  );
};

export default TopicSearchBox;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\TopicCard.tsx
================

```
import React from "react";

interface TopicCardProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
  isDisabled?: boolean;
}

const TopicCard: React.FC<TopicCardProps> = ({ title, isSelected, onClick, isDisabled }) => {
  return (
    <div>
      <div
        className={`
          ${isSelected ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"}
          inline-block
          ${isDisabled ? 'pointer-events-none' : ''} // Prevent clicks when disabled
        `}
      >
        <div
          className={`
            py-[8px] px-[16px] rounded-[16px]
            ${isSelected ? "bg-backGroundCard" : "bg-white"}
            ${isDisabled ? 'cursor-not-allowed' : 'cursor-pointer'} 
          `}
          onClick={onClick}
        >
          <div className="flex justify-start items-center">
            <h1 className="text-[14px] font-extrabold whitespace-nowrap">
              {title}
            </h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopicCard;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\Topic.tsx
================

```
import React, { useState } from "react";

import TopicSelector from "./TopicSelector";

const Topic = () => {
  const [textAreaContent, setTextAreaContent] = useState<string>("");
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleTextAreaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const value = e.target.value;
    setTextAreaContent(value);
    // If user starts typing, unselect any card
    if (value.length > 0) {
      setSelectedCardId(null);
    }
  };

  const handleCardSelection = (id: string | null) => {
    setSelectedCardId(id);
    // If a card is selected, clear the textarea
    if (id !== null) {
      setTextAreaContent("");
    }
  };

  // Determine if textarea should be disabled
  const isTextAreaDisabled = selectedCardId !== null;
  // Determine if TopicSelector (cards) should be disabled
  const isTopicSelectorDisabled = textAreaContent.length > 0;

  return (
    <div className="flex justify-center bg-white  rounded-[24px] rounded-b-none p-[16px] flex-col pb-20">
      <textarea
        placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... "
        className="p-[16px] border-[2px] border-backGround-1 rounded-[16px] w-full text-[14px] resize-none overflow-hidden" // Added resize-none
        rows={1} // Made textarea smaller by setting rows
        value={textAreaContent}
        onChange={handleTextAreaChange}
        disabled={isTextAreaDisabled}
        style={isTextAreaDisabled ? { opacity: 0.6, cursor: 'not-allowed' } : {}} 
        
      />
      <h1 className="font-extrabold text-[14px] mt-[16px] mb-[12px]">
        Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
      </h1>
      <div className="flex flex-wrap gap-[12px]">
        <TopicSelector
          onSelectCard={handleCardSelection}
          selectedCardId={selectedCardId}
          isDisabled={isTopicSelectorDisabled}
        />
      </div>
    </div>
  );
};

export default Topic;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\MainContent.tsx
================

```
// src/student/pages/konjKav/topicSelection/MainContent.tsx
import React from 'react';
import { useDispatch } from 'react-redux';
import { activeButtonReducer, disableButtonReducer } from '../../../../slice/konjkavSlice';
import TopicSelector from './TopicSelector'

// This Topic interface isn't directly used by TopicSelector anymore,
// but it's good to keep if you plan to use these topics for filtering/search later.
interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

interface MainContentProps {
  onTopicSelect: (topicId: string | null) => void; // Now passes a single ID or null
  selectedTopicFromParent: string | null; // New prop to receive the currently selected topic
}

const MainContent: React.FC<MainContentProps> = ({ onTopicSelect, selectedTopicFromParent }) => {
  const dispatch = useDispatch();

 

  // handleTopicSelect now directly passes the selected ID to the parent via onTopicSelect
  const handleTopicSelect = (topicId: string | null) => {
    onTopicSelect(topicId); // Pass the ID directly to the parent
    
    // Logic for activating/deactivating button based on selection
    if (topicId) { // If something is selected
      dispatch(activeButtonReducer());
    } else { // If nothing is selected
      dispatch(disableButtonReducer());
    }
  };

  return (
    <div
      className='
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <TopicSelector
        onSelectCard={handleTopicSelect}
        selectedCardId={selectedTopicFromParent} // Pass the selected ID from parent to TopicSelector
        isDisabled={false} // Assuming TopicSelector itself is not disabled
      />
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\HeroSection.tsx
================

```
import React from 'react';
import konjkav from './../../../../assets/images/konjkav.png';

const HeroSection = () => {
  return (
    <div className="flex justify-center items-center flex-col ">
      <img src={konjkav} className="w-[104px] h-[104px] mb-10 mt-5" />
      <h1 className="mb-10">Ù„Ø·ÙØ§ Ù…ÙˆØ¶ÙˆØ¹ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h1>
    </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\konjKav\welcome\HeroSection.tsx
================

```
import happyFace from './../../../../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='mb-[32px] pt-[16px]'>
        <div className='flex justify-center  p-4'>
        <img src={happyFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\student\components\konjKav\welcome\CardSection.tsx
================

```
import React from 'react'
import { studyAssistantConstatnt } from '../../../../constants/studyAssistantConstant'


const CardSection:React.FC = () => {
  return (
  <div className='h-screen'>
   {studyAssistantConstatnt.map(study=>(
        <div className='card-box mb-[12px] gap-[12px] '>
        <div className=' flex justify-center flex-col bg-white rounded-[22px] gap-[8px] p-[16px] '>
            <div className='gap-[8px] flex items-center justify-start'>
               <img src={study.logo}/>
                <h1 className='font-extrabold text-[14px]'> {study.title}   </h1>

            </div>
             <div>
           <p className=' text-justify  text-[14px]'>{study.description}</p>
        </div>
            
        </div>
       
     </div>
  )
   )}
  </div>)
}

export default CardSection
```

================
FILE: src\student\components\konjKav\topicSelection\TopicSelector.tsx
================

```
// src/student/pages/konjKav/topicSelection/TopicSelector.tsx
import React from 'react';
import TopicCard from './TopicCard'; // Assuming TopicCard is in the same directory

interface Card {
  id: string;
  title: string;
}

interface TopicSelectorProps {
  onSelectCard: (id: string | null) => void;
  selectedCardId: string | null; // This will now reflect the single selected card
  isDisabled: boolean;
}

const TopicSelector: React.FC<TopicSelectorProps> = ({ onSelectCard, selectedCardId, isDisabled }) => {
  const cards: Card[] = [
    { id: 'math', title: 'Ø±ÛŒØ§Ø¶ÛŒ' },
    { id: 'science', title: 'Ø¹Ù„ÙˆÙ…' },
    { id: 'history', title: 'ØªØ§Ø±ÛŒØ®' },
    { id: 'geography', title: 'Ø¬ØºØ±Ø§ÙÛŒØ§' },
    { id: 'literature', title: 'Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ ØªØ±' },
    { id: 'art', title: 'Ù‡Ù†Ø±' },
  ];

  const handleCardClick = (clickedId: string) => {
    if (!isDisabled) {
      // If the clicked card is already selected, deselect it. Otherwise, select it.
      onSelectCard(selectedCardId === clickedId ? null : clickedId);
    }
  };

  return (
    <div
      className={`
        flex flex-wrap gap-[12px]
        ${isDisabled ? 'opacity-60 pointer-events-none' : ''} // Visual feedback and prevent clicks
      `}
    >
      {cards.map((card) => (
        <TopicCard
          key={card.id}
          title={card.title}
          isSelected={selectedCardId === card.id} // Pass down the actual selected ID
          onClick={() => handleCardClick(card.id)}
          isDisabled={isDisabled}
        />
      ))}
    </div>
  );
};

export default TopicSelector;
```

================
FILE: src\student\components\konjKav\topicSelection\TopicSearchBox.tsx
================

```
import React from 'react';

interface TopicSearchBoxProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

const TopicSearchBox: React.FC<TopicSearchBoxProps> = ({ searchQuery, setSearchQuery }) => {
  return (
    <div className="mx-[16px] my-4 ">
      <div className="relative">
        <textarea
          rows={1}
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder=" Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³..."
          className="w-full bg-white text-[12px] border-borderColor-1 border-[2px] rounded-[24px] p-[16px] "
          style={{ direction: 'rtl' }}
        />
      </div>
    </div>
  );
};

export default TopicSearchBox;
```

================
FILE: src\student\components\konjKav\topicSelection\TopicCard.tsx
================

```
import React from "react";

interface TopicCardProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
  isDisabled?: boolean;
}

const TopicCard: React.FC<TopicCardProps> = ({ title, isSelected, onClick, isDisabled }) => {
  return (
    <div>
      <div
        className={`
          ${isSelected ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"}
          inline-block
          ${isDisabled ? 'pointer-events-none' : ''} // Prevent clicks when disabled
        `}
      >
        <div
          className={`
            py-[8px] px-[16px] rounded-[16px]
            ${isSelected ? "bg-backGroundCard" : "bg-white"}
            ${isDisabled ? 'cursor-not-allowed' : 'cursor-pointer'} 
          `}
          onClick={onClick}
        >
          <div className="flex justify-start items-center">
            <h1 className="text-[14px] font-extrabold whitespace-nowrap">
              {title}
            </h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopicCard;
```

================
FILE: src\student\components\konjKav\topicSelection\Topic.tsx
================

```
import React, { useState } from "react";
import TopicCard from "./TopicCard"; // Make sure the path is correct
import TopicSelector from "./TopicSelector";

const Topic = () => {
  const [textAreaContent, setTextAreaContent] = useState<string>("");
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleTextAreaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const value = e.target.value;
    setTextAreaContent(value);
    // If user starts typing, unselect any card
    if (value.length > 0) {
      setSelectedCardId(null);
    }
  };

  const handleCardSelection = (id: string | null) => {
    setSelectedCardId(id);
    // If a card is selected, clear the textarea
    if (id !== null) {
      setTextAreaContent("");
    }
  };

  // Determine if textarea should be disabled
  const isTextAreaDisabled = selectedCardId !== null;
  // Determine if TopicSelector (cards) should be disabled
  const isTopicSelectorDisabled = textAreaContent.length > 0;

  return (
    <div className="flex justify-center bg-white  rounded-[24px] rounded-b-none p-[16px] flex-col pb-20">
      <textarea
        placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... "
        className="p-[16px] border-[2px] border-backGround-1 rounded-[16px] w-full text-[14px] resize-none overflow-hidden" // Added resize-none
        rows={1} // Made textarea smaller by setting rows
        value={textAreaContent}
        onChange={handleTextAreaChange}
        disabled={isTextAreaDisabled}
        style={isTextAreaDisabled ? { opacity: 0.6, cursor: 'not-allowed' } : {}} 
        
      />
      <h1 className="font-extrabold text-[14px] mt-[16px] mb-[12px]">
        Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
      </h1>
      <div className="flex flex-wrap gap-[12px]">
        <TopicSelector
          onSelectCard={handleCardSelection}
          selectedCardId={selectedCardId}
          isDisabled={isTopicSelectorDisabled}
        />
      </div>
    </div>
  );
};

export default Topic;
```

================
FILE: src\student\components\konjKav\topicSelection\MainContent.tsx
================

```
// src/student/pages/konjKav/topicSelection/MainContent.tsx
import React from 'react';
import { useDispatch } from 'react-redux';
import { activeButtonReducer, disableButtonReducer } from '../../../../slice/konjkavSlice';
import TopicSelector from './TopicSelector';

// This Topic interface isn't directly used by TopicSelector anymore,
// but it's good to keep if you plan to use these topics for filtering/search later.
interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

interface MainContentProps {
  onTopicSelect: (topicId: string | null) => void; // Now passes a single ID or null
  selectedTopicFromParent: string | null; // New prop to receive the currently selected topic
}

const MainContent: React.FC<MainContentProps> = ({ onTopicSelect, selectedTopicFromParent }) => {
  const dispatch = useDispatch();

 

  // handleTopicSelect now directly passes the selected ID to the parent via onTopicSelect
  const handleTopicSelect = (topicId: string | null) => {
    onTopicSelect(topicId); // Pass the ID directly to the parent
    
    // Logic for activating/deactivating button based on selection
    if (topicId) { // If something is selected
      dispatch(activeButtonReducer());
    } else { // If nothing is selected
      dispatch(disableButtonReducer());
    }
  };

  return (
    <div
      className='
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <TopicSelector
        onSelectCard={handleTopicSelect}
        selectedCardId={selectedTopicFromParent} // Pass the selected ID from parent to TopicSelector
        isDisabled={false} // Assuming TopicSelector itself is not disabled
      />
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\konjKav\topicSelection\HeroSection.tsx
================

```
import React from 'react';
import konjkav from './../../../../assets/images/konjkav.png';

const HeroSection = () => {
  return (
    <div className="flex justify-center items-center flex-col ">
      <img src={konjkav} className="w-[104px] h-[104px] mb-10 mt-5" />
      <h1 className="mb-10">Ù„Ø·ÙØ§ Ù…ÙˆØ¶ÙˆØ¹ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h1>
    </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\konjKav\studySelection\MainContent.tsx
================

```
import React from 'react';
import CardSelector from './CardSelector';

const MainContent: React.FC = () => {
  return (
    <div
      className='
        border-2 border-borderColor-1 bg-white rounded-[16px]
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <div> 
        <CardSelector />
      </div>
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\konjKav\studySelection\HeroSection.tsx
================

```
import React from 'react'
import konjkav from './../../../../assets/images/konjkav.png'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col '>
      <img src={konjkav} className='w-[104px] h-[104px] mb-10 mt-5'/>
      <h1 className='mb-10'>
        Ù„Ø·ÙØ§ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø±Ø³ Ù‡Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\konjKav\studySelection\CardSelector.tsx
================

```
import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { setSelectedStudy } from '../../../../slice/konjkavSlice';
import CardContent from './CardContent';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';
import { useNavigate } from 'react-router-dom';

interface Subject {
  id: string;
  name: string;
}

const CardSelector: React.FC = () => {
  const navigate=useNavigate()
  const dispatch = useDispatch();
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const { data: subjects, isLoading, isError } = useQuery<Subject[]>({
    queryKey: ['subjects'],
    queryFn: async () => {
      const response = await axios.get<Subject[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects`);
      console.log(response)
      return response.data;
    },
  });

  // if(subjects?.status===401){
     
  //     // Navigate to login page if selections are missing
     
  //       navigate('/'); 
    
  // }

  const handleCardClick = (subject: Subject) => {
    if (selectedCardId === subject.id) {
      setSelectedCardId(null);
      dispatch(setSelectedStudy(null));
    } else {
      setSelectedCardId(subject.id);
      dispatch(setSelectedStudy(subject));
    }
  };

  if (isLoading) return <div>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³...</div>;
  if (isError) return <div>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³.</div>;

  return (
    <div className="grid grid-cols-2 gap-[12px]">
      {subjects?.map((subject) => (
        <CardContent
          key={subject.id}
          title={subject.name}
          isSelected={selectedCardId === subject.id}
          onClick={() => handleCardClick(subject)}
        />
      ))}
    </div>
  );
};

export default CardSelector;
```

================
FILE: src\student\components\konjKav\studySelection\CardContent.tsx
================

```
import React, { useEffect } from "react";
import { useDispatch } from "react-redux";
import riazi from "./../../../../assets/images/riazi.png";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/konjkavSlice";

interface CardContentProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({ title, isSelected, onClick }) => {
  const dispatch = useDispatch();

  useEffect(() => {
    if (isSelected) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [isSelected, dispatch]);

  return (
    <div className={`${isSelected ? `onClickedCard-box transform translate-y-1` : "card-box"}`}>
      <div
        className={`rounded-[22px] cursor-pointer transition-colors duration-200 flex flex-col overflow-hidden h-full ${isSelected ? `bg-backGroundCard` : "bg-white"}`}
        onClick={onClick}
      >
        <img
          src={riazi}
          className="w-full h-auto object-contain"
          alt={title}
        />
        <div className="p-4 text-center">
          <h1 className="text-sm font-semibold">{title}</h1>
        </div>
      </div>
    </div>
  );
};

export default CardContent;
```

================
FILE: src\student\components\konjKav\recentChat\RecentChat.tsx
================

```

```

================
FILE: src\student\components\darsYar\studySelection\MainContent.tsx
================

```
// MainContent.tsx
import React from 'react';
import CardSelector from './CardSelector'; // CardContent is not directly used here


const MainContent: React.FC = () => {
  return (
    <div
      className='
        border-2 border-borderColor-1 bg-white rounded-[16px]
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      {/* The `gap-[12px] pt-[16px] h-full` on the outer div were a bit ambiguous.
          Moved padding and adjusted gap/flex behavior here. */}
      <div> {/* This div acts as a wrapper for CardSelector */}
        <CardSelector />
      </div>
      
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\darsYar\studySelection\HeroSection.tsx
================

```
import React from 'react'
import darsYar from './../../../../assets/images/DarsYar.png'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col '>
      <img src={darsYar} className='w-[104px] h-[104px] mb-10 mt-5'/>
      <h1 className='mb-10'>
        Ù„Ø·ÙØ§ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø±Ø³ Ù‡Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\darsYar\studySelection\CardSelector.tsx
================

```
// CardSelector.tsx
import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { setSelectedStudy, clearSelections } from '../../../../slice/darsyarSlice';
import CardContent from './CardContent';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface Card {
  id: string;
  name: string;
}

const CardSelector: React.FC = () => {

   const {
    data,
    isLoading,
    isError, 
    error,   
  } = useQuery<Card[]>({ 
    queryKey: ['classes'],
    queryFn: async () => { 
      const response = await axios.get<Card[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects`);
      return response.data; 
    },
    });
   if (!isLoading){
     console.log(data)
   }
  const dispatch = useDispatch();
 

  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleCardClick = (clickedId: string, name: string) => {
    const newSelectedId = selectedCardId === clickedId ? null : clickedId;
    setSelectedCardId(newSelectedId);
    
    if (newSelectedId) {
      dispatch(setSelectedStudy({
        id: clickedId,
        name: name
      }));
    } else {
      // When deselecting, we set the study to null
      dispatch(clearSelections());
    }
  };

  return (
   (!isLoading) &&  <div className="grid grid-cols-2 gap-[12px]">
      {data?.map((card) => (
        <CardContent
          key={card.id}
          name={card.name}
          isSelected={selectedCardId === card.id}
          onClick={() => handleCardClick(card.id, card.name)}
        />
      ))}
    </div>
  );
};

export default CardSelector;
```

================
FILE: src\student\components\darsYar\studySelection\CardContent.tsx
================

```
// CardContent.tsx
import React, { useEffect } from "react"; // Import useEffect
import riazi from "./../../../../assets/images/riazi.png";
import { useDispatch } from "react-redux";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/darsyarSlice";

interface CardContentProps {
  name: string;
  isSelected: boolean;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({
  name,
  isSelected,
  onClick,
}) => {
  const dispatch = useDispatch();


  useEffect(() => {
    if (isSelected) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [isSelected, dispatch]); 

  return (
    <div className={`${isSelected ? `onClickedCard-box transform translate-y-1` : "card-box"}`}>
      {" "}
      <div
        className={`
          rounded-[22px] cursor-pointer
          transition-colors duration-200 
          flex flex-col 
          overflow-hidden 
          h-full 
          ${isSelected ? `bg-backGroundCard` : "bg-white"}
        `}
        onClick={onClick}
      >
        <img
          src={riazi}
          className=" w-full h-auto object-contain"
          alt={name}
        />

        <div
          className="
          p-4 sm:p-6 md:p-8 lg:p-10 xl:p-12 
          text-center flex flex-col justify-center items-center 
        "
        >
          <h1
            className="
            text-sm 
            font-semibold
            pb-0 mt-0 
          "
          >
            {name}
          </h1>
        </div>
      </div>
    </div>
  );
};

export default CardContent;
```

================
FILE: src\student\components\darsYar\studyAssistant\HeroSection.tsx
================

```

import kiddoFace from './../../../../assets/images/happyFace.png'




const HeroSection = () => {
  return (
    <div className='mb-[32px] pt-[16px]'>
        <div className='flex justify-center  p-4'>
        <img src={kiddoFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ Ø¯Ø±Ø³â€ŒÛŒØ§Ø± Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\student\components\darsYar\studyAssistant\CardSection.tsx
================

```
import React from 'react'
import { studyAssistantConstatnt } from '../../../../constants/studyAssistantConstant'

const CardSection:React.FC = () => {
  return (
  <div className='h-screen'>
   {studyAssistantConstatnt.map((study,index)=>(
        <div className='card-box mb-[12px] gap-[12px] ' key={index}>
        <div className=' flex justify-center flex-col bg-white rounded-[22px] gap-[8px] p-[16px] '>
            <div className='gap-[8px] flex items-center justify-start'>
               <img src={study.logo}/>
                <h1 className='font-extrabold text-[14px]'> {study.title}   </h1>

            </div>
             <div>
           <p className=' text-justify  text-[14px]'>{study.description}</p>
        </div>
            
        </div>
       
     </div>
  )
   )}
  </div>)
}

export default CardSection
```

================
FILE: src\student\components\darsYar\lessonSelection\MainContent.tsx
================

```
// MainContent.tsx
import React, { useState } from "react";
import { useDispatch, useSelector } from "react-redux";
import { setSelectedLesson } from "../../../../slice/darsyarSlice";
import CardContent from "./CardContent";
import axios from "axios";
import { useQuery } from "@tanstack/react-query";

// Interface for the API response
interface LessonResponse {
  id: string;
  title: string;
}


const MainContent: React.FC = () => {
  const dispatch = useDispatch();
  const [selectedLessons, setSelectedLessons] = useState<string[]>([]);
  const subject = useSelector((state: any) => state.darsyar.selectedStudy?.id);
  console.log('Selected subject:', subject);
  console.log('Selected lessons:', selectedLessons);
   const {
    data,
    isLoading,
    isError, 
    error,   
  } = useQuery<LessonResponse[]>({ 
    queryKey: ['classes', subject],
    queryFn: async () => { 
      const response = await axios.get<LessonResponse[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects/${subject}/chapters/`);
      return response.data; 
    },
    enabled: !!subject
    });
  


  const handleLessonSelect = (id: string) => {
    setSelectedLessons(prev => {
      const isSelected = prev.includes(id);
      const newSelection = isSelected 
        ? prev.filter(lessonId => lessonId !== id)
        : [...prev, id];
      
      // Update Redux state with selected lessons including both id and name
      const selectedLessonsData = newSelection
        .map(selectedId => data?.find(l => l.id === selectedId))
        .filter((lesson): lesson is LessonResponse => lesson !== undefined)
        .map(lesson => ({
          id: lesson.id,
          name: lesson.title
        }));
      
      dispatch(setSelectedLesson(selectedLessonsData));
      return newSelection;
    });
  };

  return (
    (!isLoading) && (
      <div className="border-borderColor-1 bg-white h-screen flex flex-col gap-[12px]">
        <div className="bg-white gap-[16px] mt-[16px] mx-[16px]">
          {data?.map((lesson) => (
            <CardContent
              key={lesson.id}
              title={lesson.title} // CardContent still expects title prop
              isSelected={selectedLessons.includes(lesson.id)}
              onClick={() => handleLessonSelect(lesson.id)}
            />
          ))}
        </div>
      </div>
    ) 
  );
};

export default MainContent;

```

================
FILE: src\student\components\darsYar\lessonSelection\HeroSection.tsx
================

```
import React from 'react'
import darsYar from './../../../../assets/images/DarsYar.png'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col gap-[32px] pt-[16px]'>
      <img src={darsYar} className='w-[104px] h-[104px]'/>
      <h1 className='mb-10 text-[16px] font-yekanBakhText'>
        Ù„Ø·ÙØ§ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø±Ø³ Ù‡Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\darsYar\lessonSelection\CardContent.tsx
================

```
import React, { useEffect, useState } from "react";
import { useDispatch } from "react-redux";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/darsyarSlice";

interface CardContentProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({ title, isSelected, onClick }) => {
  const dispatch = useDispatch();
  const [isClicked, setIsClicked] = useState(false);
  
 

  const handleClick = () => {
    onClick();
    setIsClicked(!isClicked); // Toggles the state
  };

  useEffect(() => {
    if (isClicked) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [isClicked, dispatch]); 

  return (
    // Changed m-2 to mb-[16px] for a bottom margin of 16px
    <div className="flex flex-col justify-center mb-[12px] ">
      <div
        className={` ${
          isClicked ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"
        }  `}
      >
        <div
          className={`gap-[8px] p-[16px] rounded-[16px] cursor-pointer ${
            isClicked ? "bg-backGroundCard" : "bg-white"
          }`}
          onClick={handleClick}
        >
          <div className="flex justify-start items-center ">
            <h1 className="text-[14px] font-extrabold">{title}</h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CardContent;

```

================
FILE: src\student\components\darsYar\chatWithBot\LessonInformation.tsx
================

```
// src/student/components/darsYar/chatWithBot/LessonInformation.tsx
import React from "react";

interface LessonInformationProps {
  study: string;
  lesson: string;
}

const LessonInformation: React.FC<LessonInformationProps> = ({ study, lesson }) => {
  return (
    <div className="flex justify-between items-center py-[8px] infoGradient px-[16px] fixed w-full top-[52px] z-40">
      <div>
        <h1 className="text-[14px]">Ù¾Ø§Ø³Ø® Ú¯ÙˆÛŒÛŒ Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ú©ØªØ§Ø¨ {study}</h1>
      </div>
      <div className="bg-white rounded-[16px] px-[16px] py-[4px]">
        <h1 className="text-[14px] font-extrabold">{lesson}</h1>
      </div>
    </div>
  );
};

export default LessonInformation;
```

================
FILE: src\student\components\darsYar\chatWithBot\HeroSection.tsx
================

```
import React from 'react'
import happyFace from './../../../../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='flex justify-center h-screen items-center flex-col'>
      <img src={happyFace} className='mb-[32px]'/>
      <h1 className='text-[16px] font-extrabold'>Ú†Ø·ÙˆØ± Ù…ÛŒØªÙˆÙ†Ù… Ú©Ù…Ú©ØªÙˆÙ† Ú©Ù†Ù…</h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\teacher\components\contentContainer\reports\modals\ToolsModal.tsx
================

```
// src/components/ToolsModal/ToolsModal.tsx
import React, { useState } from 'react';

import Tools from './Tools';
import ChatButton from '../../../../../components/common/ChatButton';
import Modal from '../../Modal';

interface StudentModalProps {
  isModalOpen: boolean;
  handleCloseModal: () => void;
}

const ToolsModal: React.FC<StudentModalProps> = ({ isModalOpen, handleCloseModal }) => {
  const [activeTool, setActiveTool] = useState<string | null>(null); // State to hold the name of the active tool

  const handleToolClick = (toolName: string) => {
    setActiveTool(prevActiveTool =>
      prevActiveTool === toolName ? null : toolName
    );
  };

  const toolsList = [
    { name: "Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡Ø§" },
    { name: "Ø§Ø¨Ø²Ø§Ø± A" },
    { name: "Ø§Ø¨Ø²Ø§Ø± B" },
    { name: "Ø§Ø¨Ø²Ø§Ø± C" },
    { name: "Ø§Ø¨Ø²Ø§Ø± D" },
  ];

  return (
    <div>
      <Modal isOpen={isModalOpen} onClose={handleCloseModal} title="Ù„Ø·ÙØ§ Ø§Ø¨Ø²Ø§Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯">
        {toolsList.map((tool) => (
          <Tools
            key={tool.name} // Important for lists in React
            name={tool.name}
            isActive={activeTool === tool.name}
            onClick={handleToolClick}
          />
        ))}

         <div onClick={handleCloseModal}>
          <ChatButton textButton={'ØªØ§ÛŒÛŒØ¯'} />
        </div>
      </Modal>
    </div>
  );
}

export default ToolsModal;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\Tools.tsx
================

```
// src/components/ToolsModal/Tools.tsx
import React from 'react';

interface ToolsProps {
  name: string; // Add a name prop to identify each tool
  isActive: boolean;
  onClick: (name: string) => void;
}

const Tools: React.FC<ToolsProps> = ({ name, isActive, onClick }) => {
console.log(isActive)
  const handleClick = () => {
    onClick(name);
  };

  return (
    <div className='mb-[12px] ' onClick={handleClick}>
      <div className={` ${isActive ? 'onClickedButton-box transform translate-y-1' : 'buttonClicked-box'}  `}> {/* Added a class for active state */}
        <div className={`${isActive ? 'bg-backGroundCard' : 'bg-white'} flex justify-start items-center  rounded-[16px] p-[16px] gap-[16px] pl-[24px]`}>
          <h1>{name}</h1> 
        </div>
      </div>
    </div>
  );
};

export default Tools;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\StudentModal.tsx
================

```
import React from 'react'
import Modal from '../../Modal';
import ChatButton from '../../../../../components/common/ChatButton';
interface StudentModalProps {
  isModalOpen: boolean;
  handleCloseModal: () => void;
}

const StudentModal:React.FC<StudentModalProps> = ({isModalOpen,handleCloseModal}) => {
  return (
    <div >
      <Modal isOpen={isModalOpen} onClose={handleCloseModal} title="">
       <div className='flex flex-col justify-center items-center gap-[8px] '>
        <img src={''}/>
        <h1>Ù†Ø±Ú¯Ø³ Ø´Ø±ÛŒÙÛŒ</h1>
        <div className='flex justify-between'>
          <p className=' bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>22 Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ²</p>
          <p className=' bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>22 Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ²</p>
        </div>
        <h1>Ø¨Ù‡ Ø´Ø¯Øª Ù†Ú¯Ø±Ø§Ù† ÙˆØ¶Ø¹ Ø³Ù„Ø§Ù…ØªÛŒ Ù¾Ø¯Ø±Ø´ Ø§Ø³Øª Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù…Ú© Ø¯Ø§Ø±Ø¯</h1>
        <div>
          <h1>ØªÙˆØ¶ÛŒØ­Ø§Øª</h1>
          <p>ÛŒØ³Ø¨Ù…Ù†ØªÛŒØ³ Ø®Ù…Ù†Ø¨ØªÙ…Ù‡ ØªØ®Ù… Ù„ØªØ®Ù…Ø¦Ù„ Ø®Ù…Ù‚Ø¦Ù Ø¦Ù‚ÙØ­ Ù†Ù„Ø¨Ù…Ø®Ù†Ø®Ù…Ø¨Ù„Ø¦Ø§ Ø®Ù‚ÙØ¨Øª Ø§Ø®Ø«ØªØ®Ø´ØªÙ„Ø®ØªÛŒØ® ØªØ®Ø³ÛŒØªÙ„Ø³Ø®Ú©Øª Ù„Ø®ÙØªØ®Ø³ØªØ®Ù„ÛŒÙØªØ®Ù‡Ù„Ø§ØªØ¨Ø®Ø§ØªØ¨Ù„Ø®Ù…Ø§ ØªØ¦Ø«Ø®Ù…ØªØ®Ø§Ù‡ØµÙ‚ØªØ§Ú©ÙÙ‚ØªØ§ Ø®Ù…ÛŒØ¨Ø²ØªØ§Ø®Ù‚ÛŒØªØ®ØªØ® ØªØ® ØªÙ‚Ø® ØªÙ‚Ø§ÙØ® ØªØ®Ù‚Ù ØªØ§Ø®Ù‚ Øª</p>
        </div>
       </div>
        
       <div onClick={handleCloseModal}>
          <ChatButton textButton={'Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú†Øª'} />
        </div>
      </Modal>
    </div>
  )
}

export default StudentModal

```

================
FILE: src\teacher\components\contentContainer\reports\modals\Lessons.tsx
================

```
// src/components/ToolsModal/Tools.tsx
import React from 'react';

interface ToolsProps {
  name: string; // Add a name prop to identify each tool
  isActive: boolean;
  onClick: (name: string) => void;
}

const Tools: React.FC<ToolsProps> = ({ name, isActive, onClick }) => {
console.log(isActive)
  const handleClick = () => {
    onClick(name);
  };

  return (
   <div >
     <div className='mb-[12px] ' onClick={handleClick}>
      <div className={` ${isActive ? 'onClickedButton-box transform translate-y-1' : 'buttonClicked-box'}  `}> {/* Added a class for active state */}
        <div className={`${isActive ? 'bg-backGroundCard' : 'bg-white'} flex justify-start items-center  rounded-[16px] p-[16px] gap-[16px] pl-[24px]`}>
          <h1>{name}</h1> 
        </div>
      </div>
    </div>
  
   </div>
  )
};

export default Tools;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\LessonModal.tsx
================

```
// src/components/ToolsModal/ToolsModal.tsx
import React, { useState } from 'react';
import Modal from '../../Modal';
import Tools from './Tools';
import ChatButton from '../../../../../components/common/ChatButton';

interface StudentModalProps {
  isModalOpen: boolean;
  handleCloseModal: () => void;
}

const ToolsModal: React.FC<StudentModalProps> = ({ isModalOpen, handleCloseModal }) => {
  const [activeTool, setActiveTool] = useState<string | null>(null);
  console.log("Current Active Tool:", activeTool); // More descriptive console log

  const handleToolClick = (toolName: string) => {
    // If the clicked tool is already active, deactivate it (set to null)
    // Otherwise, set the clicked tool as the new active tool
    setActiveTool(prevActiveTool =>
      prevActiveTool === toolName ? null : toolName
    );
    console.log("Clicked Tool:", toolName); // More descriptive console log
  };

  const toolsList = [
    { name: "Ø§Ø¨Ø²Ø§Ø± A" },
    { name: "Ø§Ø¨Ø²Ø§Ø± B" },
    { name: "Ø§Ø¨Ø²Ø§Ø± C" },
    { name: "Ø§Ø¨Ø²Ø§Ø± D" },
  ];

  const allToolsOptionName = "Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§";

  return (
    <div >
      <Modal isOpen={isModalOpen} onClose={handleCloseModal} title="Ù„Ø·ÙØ§ Ø¯Ø±Ø³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯">

        
       <div className='pb-35'>
         <div
          className='mb-[12px] cursor-pointer '
          onClick={() => handleToolClick(allToolsOptionName)}
        >
          <div className={`
            ${activeTool === allToolsOptionName ? 'onClickedButton-box transform translate-y-1' : 'buttonClicked-box'}
          `}>
            <div className={`
              flex justify-start items-center rounded-[16px] p-[16px] gap-[16px] pl-[24px]
              ${activeTool === allToolsOptionName ? 'bg-backGroundCard' : 'bg-white'}
            `}>
              <h1>Ù‡Ù…Ù‡ Ø¯Ø±Ø³</h1>
            </div>
          </div>
        </div>

        {/* Grid for other tools */}
        <div className='grid grid-cols-2'>
          {toolsList.map((tool) => (
            <Tools
              key={tool.name}
              name={tool.name}
              isActive={activeTool === tool.name}
              onClick={handleToolClick}
            />
          ))}
        </div>

        <div onClick={handleCloseModal}>
          <ChatButton textButton={'ØªØ§ÛŒÛŒØ¯'} />
        </div>
       </div>
      </Modal>
    </div>
  );
};

export default ToolsModal;
```

