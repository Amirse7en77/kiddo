PROJECT CONTEXT

================
DIRECTORY STRUCTURE
================

kiddo-project
â”œâ”€â”€ README.md
â”œâ”€â”€ backend
â”‚   â””â”€â”€ api-docs.md
â”œâ”€â”€ eslint.config.js
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ manifest.json
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ apiClient.ts
â”‚   â”‚   â”œâ”€â”€ authApi.ts
â”‚   â”‚   â””â”€â”€ chatApi.ts
â”‚   â”œâ”€â”€ api-chat-details.ts
â”‚   â”œâ”€â”€ api-chat.ts
â”‚   â”œâ”€â”€ api-teacher.ts
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ assets
â”‚   â”‚   â”œâ”€â”€ fonts
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh 3.1 Help Fa.pdf
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh 3.1 Licenses.pdf
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh Family
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ otf
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ttf
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ webfonts
â”‚   â”‚   â”‚   â”œâ”€â”€ Yekan Bakh NoEn
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ otf
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ttf
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ webfonts
â”‚   â”‚   â”‚   â””â”€â”€ YekanBakhFaNum
â”‚   â”‚   â”‚       â”œâ”€â”€ otf
â”‚   â”‚   â”‚       â”œâ”€â”€ ttf
â”‚   â”‚   â”‚       â””â”€â”€ webfonts
â”‚   â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”‚   â”œâ”€â”€ DarsYar.png
â”‚   â”‚   â”‚   â”œâ”€â”€ azmon.webp
â”‚   â”‚   â”‚   â”œâ”€â”€ book.png
â”‚   â”‚   â”‚   â”œâ”€â”€ class.webp
â”‚   â”‚   â”‚   â”œâ”€â”€ darsyar.webp
â”‚   â”‚   â”‚   â”œâ”€â”€ farsi.png
â”‚   â”‚   â”‚   â”œâ”€â”€ happyFace.png
â”‚   â”‚   â”‚   â”œâ”€â”€ happyface.webp
â”‚   â”‚   â”‚   â”œâ”€â”€ header.png
â”‚   â”‚   â”‚   â”œâ”€â”€ hediye.png
â”‚   â”‚   â”‚   â”œâ”€â”€ heroSection.png
â”‚   â”‚   â”‚   â”œâ”€â”€ konjkav.png
â”‚   â”‚   â”‚   â”œâ”€â”€ konjkav.webp
â”‚   â”‚   â”‚   â”œâ”€â”€ logos
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ alienLogo.png
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ emojiLogo.png
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rocketLogo.png
â”‚   â”‚   â”‚   â”œâ”€â”€ oloom.png
â”‚   â”‚   â”‚   â”œâ”€â”€ recent.png
â”‚   â”‚   â”‚   â”œâ”€â”€ regularBook.png
â”‚   â”‚   â”‚   â”œâ”€â”€ reportsPage
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.png
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lesson.png
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ report.png
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ student.png
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ tool.png
â”‚   â”‚   â”‚   â”œâ”€â”€ riazi.png
â”‚   â”‚   â”‚   â”œâ”€â”€ smallhappyface.png
â”‚   â”‚   â”‚   â””â”€â”€ tarkibkon.webp
â”‚   â”‚   â””â”€â”€ react.svg
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ RecentChats.tsx
â”‚   â”‚   â””â”€â”€ common
â”‚   â”‚       â”œâ”€â”€ Chat.tsx
â”‚   â”‚       â”œâ”€â”€ ChatButton.tsx
â”‚   â”‚       â”œâ”€â”€ DisableChatButton.tsx
â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚       â”œâ”€â”€ RecentChatCard.tsx
â”‚   â”‚       â””â”€â”€ Toast.tsx
â”‚   â”œâ”€â”€ constants
â”‚   â”‚   â”œâ”€â”€ azmonWelcomeConstant.tsx
â”‚   â”‚   â”œâ”€â”€ konjkavWelcomConstant.tsx
â”‚   â”‚   â”œâ”€â”€ studyAssistantConstant.tsx
â”‚   â”‚   â””â”€â”€ tarkibkonWelcomeConstant.tsx
â”‚   â”œâ”€â”€ hooks
â”‚   â”‚   â”œâ”€â”€ useChatSessions.ts
â”‚   â”‚   â””â”€â”€ useClientInfo.ts
â”‚   â”œâ”€â”€ index.css
â”‚   â”œâ”€â”€ layout
â”‚   â”‚   â””â”€â”€ ClassLayout.tsx
â”‚   â”œâ”€â”€ login
â”‚   â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”‚   â”œâ”€â”€ InputGroup.tsx
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â””â”€â”€ LoginButton.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ router
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”œâ”€â”€ slice
â”‚   â”‚   â”œâ”€â”€ chatSlice.ts
â”‚   â”‚   â”œâ”€â”€ dangerStudentsSlice.ts
â”‚   â”‚   â”œâ”€â”€ darsyarSlice.ts
â”‚   â”‚   â”œâ”€â”€ konjkavSlice.ts
â”‚   â”‚   â”œâ”€â”€ tarkibkonSlice.ts
â”‚   â”‚   â””â”€â”€ userSlice.ts
â”‚   â”œâ”€â”€ store
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ student
â”‚   â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”‚   â”œâ”€â”€ darsYar
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chatWithBot
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lessonSelection
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ recentChat
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ studyAssistant
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ studySelection
â”‚   â”‚   â”‚   â”œâ”€â”€ home
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecentItem.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ToolCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ konjKav
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ recentChat
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ studySelection
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ topicSelection
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ welcome
â”‚   â”‚   â”‚   â””â”€â”€ tarkibKon
â”‚   â”‚   â”‚       â”œâ”€â”€ chatBot
â”‚   â”‚   â”‚       â”œâ”€â”€ favoriteTopic
â”‚   â”‚   â”‚       â”œâ”€â”€ learnTopic
â”‚   â”‚   â”‚       â”œâ”€â”€ recentChat
â”‚   â”‚   â”‚       â”œâ”€â”€ studySelection
â”‚   â”‚   â”‚       â””â”€â”€ welcome
â”‚   â”‚   â””â”€â”€ pages
â”‚   â”‚       â”œâ”€â”€ StudentHome.tsx
â”‚   â”‚       â”œâ”€â”€ darsYar
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarChatWithBot.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarLessonSelection.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarRecentChat.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DarsyarStudyAssistant.tsx
â”‚   â”‚       â”‚   â””â”€â”€ DarsyarStudySelection.tsx
â”‚   â”‚       â”œâ”€â”€ konjKav
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavRecentChat.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavStudySelection.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavTopicBot.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ KonjkavTopicSelection.tsx
â”‚   â”‚       â”‚   â””â”€â”€ KonjkavWelcome.tsx
â”‚   â”‚       â””â”€â”€ tarkibKon
â”‚   â”‚           â”œâ”€â”€ TarkibkonChatBot.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonFavoriteTopic.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonLearnTopic.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonRecentChat.tsx
â”‚   â”‚           â”œâ”€â”€ TarkibkonStudySelection.tsx
â”‚   â”‚           â””â”€â”€ TarkibkonWelcome.tsx
â”‚   â”œâ”€â”€ teacher
â”‚   â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”‚   â”œâ”€â”€ contentContainer
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentAlert.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chats
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ reports
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ students
â”‚   â”‚   â”‚   â””â”€â”€ home
â”‚   â”‚   â”‚       â”œâ”€â”€ Classes.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ ProgressQuestion.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ RecentChat.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ToolCard.tsx
â”‚   â”‚   â””â”€â”€ pages
â”‚   â”‚       â”œâ”€â”€ ClassChat.tsx
â”‚   â”‚       â”œâ”€â”€ ContentContainer.tsx
â”‚   â”‚       â”œâ”€â”€ ReportsPage.tsx
â”‚   â”‚       â””â”€â”€ TeacherHome.tsx
â”‚   â”œâ”€â”€ types
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ chat.ts
â”‚   â”‚   â”œâ”€â”€ state.ts
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ tsconfig.app.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ watch-context.js

================
FILE: package.json
================

```
{
  "name": "kiddo-project",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@lobehub/fluent-emoji": "^2.0.0",
    "@react-spring/web": "^10.0.1",
    "@reduxjs/toolkit": "^2.8.2",
    "@tailwindcss/vite": "^4.1.11",
    "@tanstack/react-query": "^5.82.0",
    "@use-gesture/react": "^10.3.1",
    "axios": "^1.10.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-draggable": "^4.5.0",
    "react-fluentui-emoji": "^1.2.1",
    "react-markdown": "^10.1.0",
    "react-redux": "^9.2.0",
    "react-router-dom": "^7.6.3",
    "remark-gfm": "^4.0.1",
    "tailwindcss": "^4.1.11"
  },
  "devDependencies": {
    "@eslint/js": "^9.21.0",
    "@tailwindcss/typography": "^0.5.16",
    "@types/react": "^19.0.10",
    "@types/react-dom": "^19.0.4",
    "@vitejs/plugin-react": "^4.3.4",
    "chokidar": "^4.0.3",
    "eslint": "^9.21.0",
    "eslint-plugin-react-hooks": "^5.1.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "glob": "^11.0.3",
    "globals": "^15.15.0",
    "tree-node-cli": "^1.6.0",
    "typescript": "~5.7.2",
    "typescript-eslint": "^8.24.1",
    "vite": "^6.2.0",
    "vite-plugin-pwa": "^1.0.1"
  }
}

```

================
FILE: tsconfig.json
================

```
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}

```

================
FILE: README.md
================

```
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/README.md) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default tseslint.config({
  extends: [
    // Remove ...tseslint.configs.recommended and replace with this
    ...tseslint.configs.recommendedTypeChecked,
    // Alternatively, use this for stricter rules
    ...tseslint.configs.strictTypeChecked,
    // Optionally, add this for stylistic rules
    ...tseslint.configs.stylisticTypeChecked,
  ],
  languageOptions: {
    // other options...
    parserOptions: {
      project: ['./tsconfig.node.json', './tsconfig.app.json'],
      tsconfigRootDir: import.meta.dirname,
    },
  },
})
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default tseslint.config({
  plugins: {
    // Add the react-x and react-dom plugins
    'react-x': reactX,
    'react-dom': reactDom,
  },
  rules: {
    // other rules...
    // Enable its recommended typescript rules
    ...reactX.configs['recommended-typescript'].rules,
    ...reactDom.configs.recommended.rules,
  },
})
```
#   k i d d o  
 
```

================
FILE: src\vite-env.d.ts
================

```
/// <reference types="vite/client" />

```

================
FILE: src\main.tsx
================

```
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import './index.css';
import { RouterProvider } from 'react-router-dom';
import { router } from './router';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { Provider } from 'react-redux';
import { store } from './store';
import { setupAxiosInterceptors, getMe } from './api';
import { setUser } from './slice/userSlice';

const queryClient = new QueryClient();

// Function to initialize the app state
const initializeApp = async () => {
  setupAxiosInterceptors();

  const token = localStorage.getItem('authToken');
  if (token) {
    try {
      // Fetch user data if token exists
      const userData = await getMe();
      store.dispatch(setUser(userData));
    } catch (error) {
      console.error("Failed to restore session:", error);
      // If getMe fails (e.g., expired token), the interceptor will handle logout.
    }
  }

  // Render the app after attempting to restore session
  createRoot(document.getElementById('root')!).render(
    <StrictMode>
       <QueryClientProvider client={queryClient}>
        <Provider store={store}>
          <RouterProvider router={router}/>
        </Provider>
      </QueryClientProvider>
    </StrictMode>,
  );
};

initializeApp();

// Register service worker for PWA
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js').catch(registrationError => {
      console.log('SW registration failed: ', registrationError);
    });
  });
}
```

================
FILE: src\index.css
================

```
@import "tailwindcss";

@font-face {
  font-family: "YekanBakh";
  src: url("./assets/fonts/YekanBakhFaNum/webfonts/woff/YekanBakhFaNum-Regular.woff")
    format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "YekanBakhText";
  src: url("./assets/fonts/YekanBakhFaNum/webfonts/woff2/YekanBakhFaNum-ExtraBlack.woff2")
    format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@theme {
  --color-custom-purple: rgba(98, 72, 255, 1);
  --color-custom-orange-1: rgba(255, 107, 72, 1);
  --color-custom-orange-2: rgba(254, 76, 74, 1);
  --color-backGround-1: #f1f0ee;
  --color-borderColor-1: #dcdcdc;
  --color-chatButton-1: #6248ff;
  --color-backGroundButton: #4432b3;
  --color-backGroundCard: #f2efff;
  --color-backdrop: rgba(0, 0, 0, 0.2);
  /* Declare your custom font here */
  --font-yekanBakh: YekanBakh, sans-serif;
  --font-yekanBakhText: YekanBakhText, sans-serif;

  /* Your gradients are CSS variables, which is fine, but they don't directly create utility classes */
  --gradient-border-main: linear-gradient(
    to right,
    var(--color-custom-purple),
    var(--color-custom-orange-1)
  );
  --gradient-border-alt: linear-gradient(
    135deg,
    var(--color-custom-purple) 0%,
    var(--color-custom-orange-2) 100%
  );
}

.image-with-border {
  border: 2px solid #3498db; /* 2px solid blue border */
  padding: 5px; /* Optional: adds space between the image and the border */
  border-radius: 8px; /* Optional: rounds the corners of the border */
}
.card-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #dcdcdc;
  border-radius: 26px;
}
.buttonClicked-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #dcdcdc;
  border-radius: 18px;
}
.onClicked-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #6248ff;
  border-radius: 18px;
}
.chat-button {
  background-color: #4432b3;

  padding-bottom: 4px;
  border-radius: 18px;
}
.button-box {
  background-color: #6248ff;
  border-radius: 16px;
}
.disableButton-box {
  background-color: #dcdcdc;
 padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  border-radius: 18px;
}
.disableChat-button {
  background-color: white;
 
  
  border-radius: 16px;
}
.onClickedCard-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 2px;
  background-color: #6248ff;
  border-radius: 26px;
}
.onClickedButton-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 2px;
  background-color: #6248ff;
  border-radius: 18px;
}
.alert-box {
  padding-top: 2px;
  padding-right: 2px;
  padding-left: 2px;
  padding-bottom: 4px;
  background-color: #fe4c4a;
  border-radius: 18px;
}

.infoGradient {
  background-image: linear-gradient(
    to left,
    rgba(98, 72, 255, 0.1),
    /* #6248FF with 10% opacity */ rgba(254, 76, 74, 0.1),
    /* #FE4C4A with 10% opacity */ rgba(255, 107, 72, 0.1)
      /* #FF6B48 with 10% opacity */
  );
}

/* Custom styles for react-markdown output */
.prose {
  --tw-prose-body: #333;
  --tw-prose-headings: #111;
  --tw-prose-links: var(--color-custom-purple);
  --tw-prose-bold: #000;
  --tw-prose-bullets: #666;
  --tw-prose-hr: var(--color-borderColor-1);
  --tw-prose-quotes: #444;
  --tw-prose-quote-borders: var(--color-borderColor-1);
  --tw-prose-code: #111;
  --tw-prose-pre-code: #111;
  --tw-prose-pre-bg: var(--color-backGround-1);
}

.prose-invert {
  --tw-prose-body: #e5e7eb;
  --tw-prose-headings: #fff;
  --tw-prose-links: #fff;
  --tw-prose-bold: #fff;
  --tw-prose-bullets: #a1a1aa;
  --tw-prose-hr: #4b5563;
  --tw-prose-quotes: #d1d5db;
  --tw-prose-quote-borders: #4b5563;
  --tw-prose-code: #fff;
  --tw-prose-pre-code: #e5e7eb;
  --tw-prose-pre-bg: rgba(0,0,0,0.2);
}

/* Fix for RTL list indentation */
.prose :where(ul, ol):not(:where([class~="not-prose"] *)) {
  padding-right: 1.625em;
  padding-left: 0;
}
```

================
FILE: src\App.tsx
================

```




import { Outlet } from 'react-router-dom'


function App() {

  return (
    <div className='font-yekanBakh'>
    
<Outlet/>

    </div>
  )
}

export default App

```

================
FILE: src\api.ts
================

```
import axios, { AxiosError } from 'axios';
import { router } from './router'; 
import { store } from './store'; 
import { clearUser, setUser } from './slice/userSlice'; 
import { UserState } from './slice/userSlice';

const API_BASE_URL = 'https://kiddo2.pythonanywhere.com';

interface LoginResponse {
  token: string;
  user: {
    id: string;
    username: string;
    first_name: string;
    last_name: string;
    role: 'STUDENT' | 'STAFF';
  };
}

export const login = async (username: string, password: string): Promise<LoginResponse> => {
  console.log("API CALL: login", { username });
  try {
    const response = await axios.post<LoginResponse>(`${API_BASE_URL}/api/v1/accounts/login/`, {
      username,
      password,
    });
    
    // Store token for future requests and persistence
    axios.defaults.headers.common['Authorization'] = `Token ${response.data.token}`;
    localStorage.setItem('authToken', response.data.token); // <-- Store token in localStorage

    console.log("API RESPONSE: login success", response.data.user);
    return response.data;
  } catch (error) {
    const axiosError = error as AxiosError;
     console.error("API ERROR: login", axiosError.response?.data);
    if (axiosError.response?.status === 400) {
      throw new Error('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
    }
    throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
  }
};

/**
 * Fetches the current user's data using the stored token.
 * @returns A promise that resolves to the user data.
 */
export const getMe = async (): Promise<UserState> => {
    console.log("API CALL: getMe");
    const token = localStorage.getItem('authToken');
    if (!token) {
      return Promise.reject("No token found");
    }
    axios.defaults.headers.common['Authorization'] = `Token ${token}`;
    const response = await axios.get(`${API_BASE_URL}/api/v1/accounts/me/`);
    const user = response.data;
    console.log("API RESPONSE: getMe success", user);
    // Return the full UserState structure including the token
    return { ...user, token };
};

/**
 * Logs the user out by clearing credentials.
 */
export const logout = () => {
    console.log("ACTION: Logging out");
    localStorage.removeItem('authToken'); // <-- Clear token from localStorage
    delete axios.defaults.headers.common['Authorization'];
    store.dispatch(clearUser()); // Clear user from redux
    router.navigate('/'); // Redirect to login
};

// This function sets up the global interceptor
export const setupAxiosInterceptors = () => {
  axios.interceptors.response.use(
    (response) => response,
    (error: AxiosError) => {
      if (error.response?.status === 401) {
        console.log('Global 401 Unauthorized error detected. Logging out.');
        // If a 401 happens, it means the token is invalid, so perform a full logout
        logout();
      }
      return Promise.reject(error);
    }
  );
};
```

================
FILE: src\api-teacher.ts
================

```

// src/api-teacher.ts
import axios from 'axios';
import { ChatEvent, ChatEventDetail } from './types/api';


const API_BASE_URL = 'https://kiddo2.pythonanywhere.com/api/v1';

/**
 * Fetches the list of chat events for the staff member.
 * @returns A promise that resolves to an array of chat events.
 */
export const fetchChatEvents = async (): Promise<ChatEvent[]> => {
  console.log('API CALL: fetchChatEvents');
  try {
    const response = await axios.get<ChatEvent[]>(`${API_BASE_URL}/chat/events/`);
    console.log('API RESPONSE: fetchChatEvents', response.data);
    return response.data;
  } catch (error) {
    console.error('API ERROR: fetchChatEvents', error);
    throw error;
  }
};

/**
 * Fetches the detailed information for a specific chat event.
 * @param eventId The ID of the event.
 * @returns A promise that resolves to the detailed chat event object.
 */
export const fetchEventDetails = async (eventId: string): Promise<ChatEventDetail> => {
  console.log('API CALL: fetchEventDetails', { eventId });
  try {
    const response = await axios.get<ChatEventDetail>(`${API_BASE_URL}/chat/events/${eventId}/`);
    console.log('API RESPONSE: fetchEventDetails', response.data);
    return response.data;
  } catch (error) {
    console.error('API ERROR: fetchEventDetails', error);
    throw error;
  }
};
```

================
FILE: src\api-chat.ts
================

```
// src/api-chat.ts
import axios from 'axios';
import { ApiMessage, ChatSession } from './types/api';

const API_BASE_URL = 'https://kiddo2.pythonanywhere.com/api/v1';

// Remember that the auth token is set globally in api.ts after login

/**
 * Starts a new DarsYar chat session.
 * @param subjectId The ID of the selected subject.
 * @param chapterIds An array of chapter IDs.
 * @returns The newly created chat session.
 */
export const startDarsYarSession = async (subjectId: string, chapterIds: string[]): Promise<ChatSession> => {
  console.log('API CALL: startDarsYarSession', { subjectId, chapterIds });
  try {
    const response = await axios.post<ChatSession>(`${API_BASE_URL}/tools/dars-yar/start/`, {
      subject_id: subjectId,
      chapter_ids: chapterIds,
    });
    console.log('API RESPONSE: startDarsYarSession', response.data);
    return response.data;
  } catch (error) {
    console.error('API ERROR: startDarsYarSession', error);
    throw error;
  }
};

/**
 * Starts a new Konjkav Sho chat session.
 * @param subjectId The ID of the selected subject.
 * @param initialTopic The initial topic from the user.
 * @returns The newly created chat session.
 */
export const startKonjkavSession = async (subjectId: string, initialTopic: string): Promise<ChatSession> => {
    console.log('API CALL: startKonjkavSession', { subjectId, initialTopic });
    try {
        const response = await axios.post<ChatSession>(`${API_BASE_URL}/tools/konjkav-sho/start/`, {
            subject_id: subjectId,
            initial_topic: initialTopic,
        });
        console.log('API RESPONSE: startKonjkavSession', response.data);
        return response.data;
    } catch (error) {
        console.error('API ERROR: startKonjkavSession', error);
        throw error;
    }
};

/**
 * Starts a new Tarkib Kon chat session.
 * @param subjectId The ID of the selected subject.
 * @param topic The topic to learn.
 * @param theme The theme for the explanation.
 * @returns The newly created chat session.
 */
export const startTarkibkonSession = async (subjectId: string, topic: string, theme: string): Promise<ChatSession> => {
    console.log('API CALL: startTarkibkonSession', { subjectId, topic, theme });
    try {
        const response = await axios.post<ChatSession>(`${API_BASE_URL}/tools/tarkib-kon/start/`, {
            subject_id: subjectId,
            topic: topic,
            theme: theme,
        });
        console.log('API RESPONSE: startTarkibkonSession', response.data);
        return response.data;
    } catch (error) {
        console.error('API ERROR: startTarkibkonSession', error);
        throw error;
    }
};

/**
 * Sends a message to an existing chat session.
 * @param sessionId The ID of the chat session.
 * @param content The text of the message to send.
 * @returns The message object created for the user.
 */
export const sendMessage = async (sessionId: string, content: string): Promise<ApiMessage> => {
  console.log('API CALL: sendMessage', { sessionId, content });
  try {
    const response = await axios.post<ApiMessage>(`${API_BASE_URL}/chat/sessions/${sessionId}/messages/`, {
      content,
    });
    console.log('API RESPONSE: sendMessage', response.data);
    return response.data;
  } catch (error) {
    console.error('API ERROR: sendMessage', error);
    throw error;
  }
};

/**
 * Fetches the details and all messages for a given session.
 * @param sessionId The ID of the chat session.
 * @returns The full session details with all messages.
 */
export const getSessionDetails = async (sessionId: string): Promise<ChatSession> => {
  console.log('API CALL: getSessionDetails', { sessionId });
  try {
    const response = await axios.get<ChatSession>(`${API_BASE_URL}/chat/sessions/${sessionId}/`);
    console.log('API RESPONSE: getSessionDetails', response.data);
    return response.data;
  } catch(error) {
    console.error('API ERROR: getSessionDetails', error);
    throw error;
  }
}
```

================
FILE: src\api-chat-details.ts
================

```

```

================
FILE: backend\api-docs.md
================

```
# Ù…Ø³ØªÙ†Ø¯Ø§Øª API Ú©ÛŒØ¯Ùˆ

## ÙÙ‡Ø±Ø³Øª
- [Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª](#Ø§Ø­Ø±Ø§Ø²-Ù‡ÙˆÛŒØª)
- [Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯Ùˆ](#Ù…Ø¯ÛŒØ±ÛŒØª-Ø¬Ù„Ø³Ø§Øª-Ú¯ÙØªÚ¯Ùˆ)
- [Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ](#Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ-Ø¢Ù…ÙˆØ²Ø´ÛŒ)
- [Ù¾Ù†Ù„ Ú©Ø§Ø±Ú©Ù†Ø§Ù†](#Ù¾Ù†Ù„-Ú©Ø§Ø±Ú©Ù†Ø§Ù†)
- [Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§](#Ú©Ø¯Ù‡Ø§ÛŒ-Ø®Ø·Ø§)

## Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª

ØªÙ…Ø§Ù…ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ù‡ API (Ø¨Ù‡ Ø¬Ø² Login) Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆÚ©Ù† Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ø§Ø±Ù†Ø¯. ØªÙˆÚ©Ù† Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù‡Ø¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø´Ú©Ù„ Ø²ÛŒØ± Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯:

```
Authorization: Token YOUR_TOKEN_HERE
```

### ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
`POST /api/v1/accounts/login/`

Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù†.

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "username": "student_user",
    "password": "password123"
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "token": "9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b",
    "user": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "username": "student_user",
        "first_name": "Ø³Ø§Ø±Ø§",
        "last_name": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
        "role": "STUDENT"
    }
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `401 Unauthorized`: Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- `400 Bad Request`: ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯

### Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…
`POST /api/v1/accounts/logout/`

Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ùˆ Ø¨Ø§Ø·Ù„ Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù† ÙØ¹Ù„ÛŒ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
- `204 No Content`

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ
`GET /api/v1/accounts/me/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "username": "student_user",
    "first_name": "Ø³Ø§Ø±Ø§",
    "last_name": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
    "role": "STUDENT"
}
```

## Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯Ùˆ

### Ù„ÛŒØ³Øª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯Ùˆ
`GET /api/v1/chat/sessions/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø¬Ù„Ø³Ø§Øª Ú¯ÙØªÚ¯ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "tool": "DARS_YAR",
        "title": "Ø¯Ø±Ø³ ÛŒØ§Ø± on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
        "subject": "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
        "updated_at": "2025-07-10T12:00:00Z"
    }
]
```

### Ø¬Ø²Ø¦ÛŒØ§Øª ÛŒÚ© Ø¬Ù„Ø³Ù‡
`GET /api/v1/chat/sessions/{session_id}/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù…Ù„ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ú¯ÙØªÚ¯Ùˆ Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "tool": "DARS_YAR",
    "title": "Ø¯Ø±Ø³ ÛŒØ§Ø± on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "SYSTEM",
            "content": "CONTEXT:\n--- Ù…ØªÙ† Ø§Ø² ÙØµÙ„: Ø§ØªÙ…â€ŒÙ‡Ø§ ---\nÙ…Ø­ØªÙˆØ§ÛŒ ÙØµÙ„...",
            "timestamp": "2025-07-10T12:00:00Z"
        },
        {
            "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
            "sender_type": "USER",
            "content": "Ø§ØªÙ… Ú†ÛŒØ³ØªØŸ",
            "timestamp": "2025-07-10T12:01:00Z"
        },
        {
            "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
            "sender_type": "AI",
            "content": "Ø§ØªÙ… Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† Ø°Ø±Ù‡...",
            "timestamp": "2025-07-10T12:01:01Z",
            "raw_ai_response": {
                "answer": "Ø§ØªÙ… Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† Ø°Ø±Ù‡...",
                "student_mood": {
                    "emoji": "ğŸ¤”",
                    "text": "Ú©Ù†Ø¬Ú©Ø§Ùˆ"
                }
            }
        }
    ]
}
```

### Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¯Ø± Ø¬Ù„Ø³Ù‡
`POST /api/v1/chat/sessions/{session_id}/messages/`

Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø¯Ø± ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ú¯ÙØªÚ¯Ùˆ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "content": "Ø³ÙˆØ§Ù„ Ù…Ù† Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø§ØªÙ…â€ŒÙ‡Ø§ Ø§ÛŒÙ† Ø§Ø³Øª..."
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
    "sender_type": "USER",
    "content": "Ø³ÙˆØ§Ù„ Ù…Ù† Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø§ØªÙ…â€ŒÙ‡Ø§ Ø§ÛŒÙ† Ø§Ø³Øª...",
    "timestamp": "2025-07-10T12:01:00Z"
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `404 Not Found`: Ø¬Ù„Ø³Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯
- `403 Forbidden`: Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø§ÛŒÙ† Ø¬Ù„Ø³Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯
- `400 Bad Request`: Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ§Ù… Ø®Ø§Ù„ÛŒ Ø§Ø³Øª

## Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ Ø¯Ø±Ø³â€ŒÛŒØ§Ø±
`POST /api/v1/tools/dars-yar/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± Ø¯Ø±Ø³â€ŒÛŒØ§Ø±.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "chapter_ids": [
        "7d793789-c00c-4c91-99fb-89e1ba7562e4",
        "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b"
    ]
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "DARS_YAR",
    "title": "Ø¯Ø±Ø³ ÛŒØ§Ø± on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "SYSTEM",
            "content": "CONTEXT:\n--- Ù…ØªÙ† Ø§Ø² ÙØµÙ„: Ø§ØªÙ…â€ŒÙ‡Ø§ ---\nÙ…Ø­ØªÙˆØ§ÛŒ ÙØµÙ„...",
            "timestamp": "2025-07-10T12:00:00Z"
        }
    ]
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `400 Bad Request`: 
  - Ø¯Ø±Ø³ ÛŒØ§ ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù‡Ø³ØªÙ†Ø¯
  - ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø¯Ø±Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†ÛŒØ³ØªÙ†Ø¯
  - Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¯Ø±Ø³ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯
- `403 Forbidden`: Ú©Ø§Ø±Ø¨Ø± Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø±Ø§ Ù†Ø¯Ø§Ø±Ø¯

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø²
`POST /api/v1/tools/azmoon-saz/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø².

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "chapter_ids": ["7d793789-c00c-4c91-99fb-89e1ba7562e4"],
    "difficulty": "Ù…ØªÙˆØ³Ø·",
    "num_questions": 10
}
```

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:**
- `difficulty`: ÛŒÚ©ÛŒ Ø§Ø² Ù…Ù‚Ø§Ø¯ÛŒØ± "Ø¢Ø³Ø§Ù†"ØŒ "Ù…ØªÙˆØ³Ø·" ÛŒØ§ "Ø³Ø®Øª"
- `num_questions`: ÛŒÚ©ÛŒ Ø§Ø² Ù…Ù‚Ø§Ø¯ÛŒØ± 5ØŒ 10 ÛŒØ§ 20

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "AZMOON_SAZ",
    "title": "Ø¢Ø²Ù…ÙˆÙ† Ø³Ø§Ø² on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "SYSTEM",
            "content": "CONTEXT:\n--- Ù…ØªÙ† Ø§Ø² ÙØµÙ„: Ø§ØªÙ…â€ŒÙ‡Ø§ ---\nÙ…Ø­ØªÙˆØ§ÛŒ ÙØµÙ„...",
            "timestamp": "2025-07-10T12:00:00Z"
        },
        {
            "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
            "sender_type": "SYSTEM",
            "content": "Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡ØŒ Ù„Ø·ÙØ§Ù‹ 10 Ø³ÙˆØ§Ù„ Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ÛŒ 'Ù…ØªÙˆØ³Ø·' Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†.",
            "timestamp": "2025-07-10T12:00:01Z"
        },
        {
            "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
            "sender_type": "AI",
            "content": "Ø¨Ø³ÛŒØ§Ø± Ø®Ø¨! Ø§ÛŒÙ† Ù‡Ù… Ø¢Ø²Ù…ÙˆÙ† Ø´Ù…Ø§:",
            "timestamp": "2025-07-10T12:00:02Z",
            "raw_ai_response": {
                "questions": [
                    {
                        "question_text": "Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§ØªÙ… Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ",
                        "options": ["Ú¯Ø²ÛŒÙ†Ù‡ 1", "Ú¯Ø²ÛŒÙ†Ù‡ 2", "Ú¯Ø²ÛŒÙ†Ù‡ 3", "Ú¯Ø²ÛŒÙ†Ù‡ 4"],
                        "correct_answer": "Ú¯Ø²ÛŒÙ†Ù‡ 2"
                    }
                ]
            }
        }
    ]
}
```

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ
`POST /api/v1/tools/konjkav-sho/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "initial_topic": "Ú†Ø±Ø§ Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø§Ø³ØªØŸ"
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "KONJKAV_SHO",
    "title": "Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "USER",
            "content": "Ú†Ø±Ø§ Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø§Ø³ØªØŸ",
            "timestamp": "2025-07-10T12:00:00Z"
        },
        {
            "id": "9d8e3af1-96d4-4c4c-8f9a-2b6a8f5e9c3b",
            "sender_type": "AI",
            "content": "Ø¢Ø³Ù…Ø§Ù† Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù¾Ø±Ø§Ú©Ù†Ø¯Ú¯ÛŒ Ù†ÙˆØ±...",
            "timestamp": "2025-07-10T12:00:01Z",
            "raw_ai_response": {
                "explanation": "Ø¢Ø³Ù…Ø§Ù† Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù¾Ø±Ø§Ú©Ù†Ø¯Ú¯ÛŒ Ù†ÙˆØ±...",
                "follow_up_questions": [
                    "Ú†Ø±Ø§ Ø¯Ø± ØºØ±ÙˆØ¨ Ø¢Ø³Ù…Ø§Ù† Ù‚Ø±Ù…Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ",
                    "Ø¢ÛŒØ§ Ø¯Ø± Ù…Ø§Ù‡ Ù‡Ù… Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø§Ø³ØªØŸ",
                    "Ù†ÙˆØ± Ú†Ú¯ÙˆÙ†Ù‡ Ø¯Ø± Ø¬Ùˆ Ù¾Ø±Ø§Ú©Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ"
                ],
                "student_mood": {
                    "emoji": "ğŸ¤”",
                    "text": "Ú©Ù†Ø¬Ú©Ø§Ùˆ"
                }
            }
        }
    ]
}
```

### Ø´Ø±ÙˆØ¹ Ø¬Ù„Ø³Ù‡ ØªØ±Ú©ÛŒØ¨ Ú©Ù†
`POST /api/v1/tools/tarkib-kon/start/`

Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø± ØªØ±Ú©ÛŒØ¨ Ú©Ù†.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "subject_id": "550e8400-e29b-41d4-a716-446655440000",
    "topic": "Ø§Ù‡Ø±Ù…â€ŒÙ‡Ø§",
    "theme": "Ù…Ø§ÛŒÙ†Ú©Ø±ÙØª"
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "tool": "TARKIB_KON",
    "title": "ØªØ±Ú©ÛŒØ¨ Ú©Ù† on Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "messages": [
        {
            "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
            "sender_type": "USER",
            "content": "Ù…ÙˆØ¶ÙˆØ¹ Â«Ø§Ù‡Ø±Ù…â€ŒÙ‡Ø§Â» Ø±Ø§ Ø¯Ø± ÙØ¶Ø§ Ùˆ Ù„Ø­Ù† Â«Ù…Ø§ÛŒÙ†Ú©Ø±ÙØªÂ» ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯Ù‡.",
            "timestamp": "2025-07-10T12:00:00Z"
        }
    ]
}
```

## Ù¾Ù†Ù„ Ú©Ø§Ø±Ú©Ù†Ø§Ù†

### Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
`GET /api/v1/academics/classes/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ø³Ù‡ Ú©Ø§Ø±Ù…Ù†Ø¯.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "Ø´Ø´Ù… - Ø§Ù„Ù",
        "grade_level": 6
    }
]
```

### Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ú©Ù„Ø§Ø³
`GET /api/v1/academics/classes/{class_id}/students/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† ÛŒÚ© Ú©Ù„Ø§Ø³.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "full_name": "Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
        "last_activity_at": "2025-07-10T12:00:00Z",
        "activity_status": "Active",
        "current_mood": {
            "emoji": "ğŸ¤”",
            "text": "Ú©Ù†Ø¬Ú©Ø§Ùˆ"
        }
    }
]
```

### Ù„ÛŒØ³Øª Ùˆ ÙÛŒÙ„ØªØ± Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
`GET /api/v1/chat/events/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù…Ø¯Ø±Ø³Ù‡.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query:**
- `level`: ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø·Ø­ Ø±ÙˆÛŒØ¯Ø§Ø¯ (INFO, CONCERN, DANGER)
- `is_resolved`: ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ¶Ø¹ÛŒØª Ø±Ø³ÛŒØ¯Ú¯ÛŒ (true/false)

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
[
    {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "student_name": "Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
        "overview": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù†Ú¯Ø±Ø§Ù†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯",
        "emoji": "ğŸš¨",
        "level": "DANGER",
        "subject_name": "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
        "created_at": "2025-07-10T12:00:00Z",
        "is_resolved": false
    }
]
```

### Ø¬Ø²Ø¦ÛŒØ§Øª Ø±ÙˆÛŒØ¯Ø§Ø¯
`GET /api/v1/chat/events/{event_id}/`

Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù…Ù„ ÛŒÚ© Ø±ÙˆÛŒØ¯Ø§Ø¯.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "student_name": "Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²",
    "overview": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù†Ú¯Ø±Ø§Ù†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯",
    "emoji": "ğŸš¨",
    "level": "DANGER",
    "subject_name": "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
    "created_at": "2025-07-10T12:00:00Z",
    "is_resolved": false,
    "explanation": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø§Ø² Ø¹Ø¨Ø§Ø±Øª 'Ø®Ø·Ø±Ù†Ø§Ú©' Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø§Ø±Ø¯.",
    "session_id": "1a2b3c4d-5e6f-7g8h-9i0j-k1l2m3n4o5p6",
    "resolved_by": null
}
```

### ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø±ÙˆÛŒØ¯Ø§Ø¯
`PATCH /api/v1/chat/events/{event_id}/`

Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø±Ø³ÛŒØ¯Ú¯ÛŒ Ø¨Ù‡ ÛŒÚ© Ø±ÙˆÛŒØ¯Ø§Ø¯.

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "is_resolved": true
}
```

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "is_resolved": true,
    "resolved_by": {
        "id": "7d793789-c00c-4c91-99fb-89e1ba7562e4",
        "username": "staff_user"
    },
    ...
}
```

### Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
`POST /api/v1/accounts/students/{student_user_id}/reset-password/`

Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÛŒÚ© Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ².

**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªÙˆÚ©Ù†:** Ø¨Ù„Ù‡  
**Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù†Ù‚Ø´:** STAFF

**ÙˆØ±ÙˆØ¯ÛŒ:**
```json
{
    "new_password": "new_secure_password_123"
}
```

**Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:**
- Ø·ÙˆÙ„ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø­Ø¯Ø§Ù‚Ù„ 8 Ú©Ø§Ø±Ø§Ú©ØªØ±

**Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚:**
```json
{
    "message": "Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø³Ø§Ø±Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯."
}
```

**Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:**
- `404 Not Found`: Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯
- `403 Forbidden`: Ú©Ø§Ø±Ù…Ù†Ø¯ Ø§Ø¬Ø§Ø²Ù‡ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±Ø§ Ù†Ø¯Ø§Ø±Ø¯
- `400 Bad Request`: Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª

## Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø§

### Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
- `400 Bad Request`: Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- `401 Unauthorized`: Ø¹Ø¯Ù… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
- `403 Forbidden`: Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ
- `404 Not Found`: Ù…Ù†Ø¨Ø¹ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± ÛŒØ§ÙØª Ù†Ø´Ø¯
- `405 Method Not Allowed`: Ù…ØªØ¯ HTTP Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- `500 Internal Server Error`: Ø®Ø·Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø³Ø±ÙˆØ±

### Ù†Ù…ÙˆÙ†Ù‡ Ø®Ø·Ø§
```json
{
    "error": "Permission denied.",
    "detail": "You do not have permission to perform this action."
}
```

### Ù†Ú©Ø§Øª Ù…Ù‡Ù…
1. ØªÙ…Ø§Ù…ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ `Content-Type: application/json` Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆÙ†Ø¯.
2. ØªÙ…Ø§Ù…ÛŒ timestampâ€ŒÙ‡Ø§ Ø¯Ø± ÙØ±Ù…Øª UTC Ù‡Ø³ØªÙ†Ø¯.
3. Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø§Ø¨Ø¹ (id) Ø§Ø² Ù†ÙˆØ¹ UUID Ù‡Ø³ØªÙ†Ø¯.
4. Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ø®Ø·Ø§ØŒ Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ÛŒ Ù…Ø¹Ù†Ø§Ø¯Ø§Ø± Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

```

================
FILE: src\types\user.ts
================

```
ï¿½ï¿½ 
 e x p o r t   i n t e r f a c e   U s e r   {  
     i d :   s t r i n g ;  
     u s e r n a m e :   s t r i n g ;  
     f i r s t _ n a m e :   s t r i n g ;  
     l a s t _ n a m e :   s t r i n g ;  
     r o l e :   " S T U D E N T "   |   " S T A F F " ;  
 }  
  
 e x p o r t   i n t e r f a c e   A u t h S t a t e   {  
     u s e r :   U s e r   |   n u l l ;  
     t o k e n :   s t r i n g   |   n u l l ;  
     s t a t u s :   ' i d l e '   |   ' l o a d i n g '   |   ' s u c c e e d e d '   |   ' f a i l e d ' ;  
     e r r o r :   s t r i n g   |   n u l l ;  
 } 
```

================
FILE: src\types\state.ts
================

```
export interface RootState {
  darsyar: {
    studySelectionButton: boolean;
    selectedStudy: string | null;
    selectedLesson: string | null;
  };
  konjkav: {
    studySelectionButton: boolean;
    selectedStudy: string | null;
    selectedTopics: string[];
    hasSelectedTopics: boolean;
  };
}

export interface Lesson {
  id: string;
  title: string;
}

export interface Study {
  id: string;
  title: string;
}

export interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

```

================
FILE: src\types\chat.ts
================

```
export interface RecentChat {
    id: string;
    title: string;
    lastMessage?: string;
    timestamp?: string;
    tool?: string;
    subject?: string;
    date?: string;
    iconUrl?: string;
}

```

================
FILE: src\types\auth.ts
================

```
ï¿½ï¿½i m p o r t   {   U s e r   }   f r o m   " . / u s e r " ;  
  
 e x p o r t   i n t e r f a c e   L o g i n C r e d e n t i a l s   {  
         u s e r n a m e ? :   s t r i n g ;  
         p a s s w o r d ? :   s t r i n g ;  
 }  
  
 e x p o r t   i n t e r f a c e   L o g i n R e s p o n s e   {  
         t o k e n :   s t r i n g ;  
         u s e r :   U s e r ;  
 } 
```

================
FILE: src\types\api.ts
================

```
// src/types/api.ts

// Based on GET /api/v1/chat/sessions/{session_id}/
export interface ApiMessage {
  id: string;
  sender_type: 'SYSTEM' | 'USER' | 'AI';
  content: string;
  timestamp: string;
  raw_ai_response?: any; // Define more strictly if needed
}

// Based on POST /api/v1/tools/dars-yar/start/
export interface ChatSession {
  id: string; // This is the crucial session_id
  tool: string;
  title: string;
  messages: ApiMessage[];
}

// Based on GET /api/v1/chat/events/
export interface ChatEvent {
  id: string;
  student_name: string;
  overview: string;
  emoji: string;
  level: 'INFO' | 'CONCERN' | 'DANGER';
  subject_name: string;
  created_at: string;
  is_resolved: boolean;
}

// Based on GET /api/v1/chat/events/{event_id}/
export interface ChatEventDetail extends ChatEvent {
  explanation: string;
  session_id: string;
  resolved_by: {
    id: string;
    username: string;
  } | null;
}
```

================
FILE: src\store\index.ts
================

```
import { configureStore } from '@reduxjs/toolkit';
import { useDispatch } from 'react-redux';
import darsyarReducer from './../slice/darsyarSlice';
import konjkavReducer from './../slice/konjkavSlice';
import tarkibkonReducer from './../slice/tarkibkonSlice';
import userReducer from './../slice/userSlice';
import dangerStudentsReducer from './../slice/dangerStudentsSlice'

export const store = configureStore({
  reducer: {
    darsyar: darsyarReducer,
    konjkav: konjkavReducer,
    tarkibkon:tarkibkonReducer,
    user:userReducer,
    dangerStudents: dangerStudentsReducer
  },
});

export type RootState = ReturnType<typeof store.getState>;

export type AppDispatch = typeof store.dispatch;

export const useAppDispatch = () => useDispatch<AppDispatch>();
```

================
FILE: src\router\index.tsx
================

```
// src/router/index.tsx
import { createBrowserRouter, Outlet } from "react-router-dom";

// ... (all other imports remain the same)
import App from "../App";
import Login from "../login/Login";

// ... (import all your other components)
import TeacherHome from "../teacher/pages/TeacherHome";
import StudentHome from "../student/pages/StudentHome";
import ClassLayout from "../layout/ClassLayout";
import StudentsActivities from "../teacher/components/contentContainer/students/StudentsActivities";
import ClassChat from "../teacher/pages/ClassChat";
import DarsyarRecentChat from "../student/pages/darsYar/DarsyarRecentChat";
import DarsyarWelcome from "../student/pages/darsYar/DarsyarStudyAssistant";
import DarsyarStudySelection from "../student/pages/darsYar/DarsyarStudySelection";
import DarsyarLessonSelection from "../student/pages/darsYar/DarsyarLessonSelection";
import DarsyarChatWithBot from "../student/pages/darsYar/DarsyarChatWithBot";
import KonjkavWelcome from "../student/pages/konjKav/KonjkavWelcome";
import KonjkavRecentChat from "../student/pages/konjKav/KonjkavRecentChat";
import KonjkavStudySelection from "../student/pages/konjKav/KonjkavStudySelection";
import KonjkavTopicSelection from "../student/pages/konjKav/KonjkavTopicSelection";
import KonjkavTopicBot from "../student/pages/konjKav/KonjkavTopicBot";
import TarkibkonWelcome from "../student/pages/tarkibKon/TarkibkonWelcome";
import TarkibkonRecentChat from "../student/pages/tarkibKon/TarkibkonRecentChat";
import TarkibkonLearnTopic from "../student/pages/tarkibKon/TarkibkonLearnTopic";
import TarkibkonFavoriteTopic from "../student/pages/tarkibKon/TarkibkonFavoriteTopic";
import TarkibkonChatBot from "../student/pages/tarkibKon/TarkibkonChatBot";
import TarkibkonStudySelection from "../student/pages/tarkibKon/TarkibkonStudySelection";
import ReportsPage from "../teacher/pages/ReportsPage";

// The only change is to export the router instance
export const router = createBrowserRouter([
  {
    path: "/",
    element: <App />, 
    children: [
      {
        index: true,
        element: <Login />,
      },
      // ... (all other routes remain exactly the same)
      {
        path: "teacher", 
        element: <TeacherHome />,
      },
      {
        path: "teacher", 
        element: <ClassLayout />,
        children: [
          {
            path: "students", 
            element: <StudentsActivities />,
          },
          {
            path: "reports",
            element: <ReportsPage />,
          },
          {
            path: "chat", 
            element: <ClassChat />,
          },
          
        ],
      },
      {
        path: "student",
        children: [
          {
            index: true,
            element: <StudentHome />,
          },
          {
            path: "darsyar",
            element: <Outlet />,
            children: [
              { path: "recent-chat", element: <DarsyarRecentChat /> },
              { path: "study-assistant", element: <DarsyarWelcome /> },
              { path: "study-selection", element: <DarsyarStudySelection /> },
              { path: "lesson-selection", element: <DarsyarLessonSelection /> },
              { path: "chat", element: <DarsyarChatWithBot /> },
            ],
          },
          {
            path: "konjkav",
            element: <Outlet />,
            children: [
              { path: "welcome", element: <KonjkavWelcome /> },
              { path: "recent-chat", element: <KonjkavRecentChat /> },
              { path: "study-selection", element: <KonjkavStudySelection /> },
              { path: "topic-selection", element: <KonjkavTopicSelection /> },
              { path: "chat", element: <KonjkavTopicBot /> },
            ],
          },
          {
            path: "tarkibkon",
            element: <Outlet />,
            children: [
              { path: "welcome", element: <TarkibkonWelcome /> },
              { path: "recent-chat", element: <TarkibkonRecentChat /> },
              { path: "study-selection", element: <TarkibkonStudySelection /> },
              { path: "learn-topic-selection", element: <TarkibkonLearnTopic /> },
              { path: "favorite-topic-selection", element: <TarkibkonFavoriteTopic /> },
              { path: "chat", element: <TarkibkonChatBot /> },
            ],
          },
        ],
      },
    ],
  },
], {
  basename: "/kiddo",
});
```

================
FILE: src\slice\userSlice.ts
================

```
import { createSlice, PayloadAction } from '@reduxjs/toolkit';

export interface UserState {
  id: string | null;
  username: string | null;
  first_name: string | null;
  last_name: string | null;
  role: 'STUDENT' | 'STAFF' | null;
  token: string | null;
}

const initialState: UserState = {
  id: null,
  username: null,
  first_name: null,
  last_name: null,
  role: null,
  token: null,
};

const userSlice = createSlice({
  name: 'user',
  initialState,
  reducers: {
    setUser: (state, action: PayloadAction<UserState>) => {
      return { ...action.payload };
    },
    clearUser: () => initialState,
  },
  
});


export const { setUser, clearUser } = userSlice.actions;
export default userSlice.reducer;

```

================
FILE: src\slice\tarkibkonSlice.ts
================

```
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

interface Study {
    id: string;
    name: string;
}

interface TarkibkonState {
  selectedStudy: Study | null;
  learnTopic: string;
  favoriteTopic: string;
  studySelectionButton: boolean;
}

const initialState: TarkibkonState = {
  selectedStudy: null,
  learnTopic: "",
  favoriteTopic: '',
  studySelectionButton: false,
};

const tarkibkonSlice = createSlice({
  name: "tarkibkon",
  initialState,
  reducers: {
    setSelectedStudy: (state, action: PayloadAction<Study | null>) => {
      state.selectedStudy = action.payload;
      state.studySelectionButton = !!action.payload;
    },
    setLearnTopic: (state, action: PayloadAction<string>) => {
      state.learnTopic = action.payload;
    },
     setFavoriteTopic: (state, action: PayloadAction<string>) => {
      state.favoriteTopic = action.payload;
    },
    resetSelection: (state) => {
      state.selectedStudy = null;
      state.learnTopic = "";
      state.favoriteTopic='';
      state.studySelectionButton = false;
    },
    activeButtonReducer: (state) => {
      state.studySelectionButton = true;
    },
    disableButtonReducer: (state) => {
      state.studySelectionButton = false;
    },
  },
});

export const {
  setSelectedStudy,
  setLearnTopic,
  setFavoriteTopic,
  resetSelection,
  activeButtonReducer,
  disableButtonReducer,
} = tarkibkonSlice.actions;

export default tarkibkonSlice.reducer;
```

================
FILE: src\slice\konjkavSlice.ts
================

```
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

interface Study {
  id: string;
  name: string;
}

interface KonjkavState {
  selectedStudy: Study | null;
  selectedTopic: string;
  studySelectionButton: boolean;
}

const initialState: KonjkavState = {
  selectedStudy: null,
  selectedTopic: "",
  studySelectionButton: false,
};

const konjkavSlice = createSlice({
  name: "konjkav",
  initialState,
  reducers: {
    setSelectedStudy: (state, action: PayloadAction<Study | null>) => {
      state.selectedStudy = action.payload;
      if (action.payload) {
        state.studySelectionButton = true;
      } else {
        state.studySelectionButton = false;
      }
    },
    setSelectedTopic: (state, action: PayloadAction<string>) => {
      state.selectedTopic = action.payload;
    },
    resetSelection: (state) => {
      state.selectedStudy = null;
      state.selectedTopic = "";
      state.studySelectionButton = false;
    },
    activeButtonReducer: (state) => {
      state.studySelectionButton = true;
    },
    disableButtonReducer: (state) => {
      state.studySelectionButton = false;
    },
  },
});

export const {
  setSelectedStudy,
  setSelectedTopic,
  resetSelection,
  activeButtonReducer,
  disableButtonReducer,
} = konjkavSlice.actions;

export default konjkavSlice.reducer;
```

================
FILE: src\slice\darsyarSlice.ts
================

```
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

interface Study {
  id: string;
  name: string;
}

interface Lesson {
  id: string;
  title: string;
}

interface DarsyarState {
  studySelectionButton: boolean;
  selectedStudy: Study | null;
  studyName: string | null;
  selectedLessons: Lesson[];
  hasSelectedLessons: boolean;
}

const initialState: DarsyarState = {
  studySelectionButton: false,
  selectedStudy: null,
  studyName: null,
  selectedLessons: [],
  hasSelectedLessons: false
};

const darsyarSlice = createSlice({
  name: 'darsyar',
  initialState,
  reducers: {
    activeButtonReducer: (state) => {
      state.studySelectionButton = true;
    },
    disableButtonReducer: (state) => {
      state.studySelectionButton = false;
    },
    setSelectedStudy: (state, action: PayloadAction<Study>) => {
      state.selectedStudy = action.payload;
      state.studyName = action.payload.name;
    },
    setSelectedLesson: (state, action: PayloadAction<Lesson[]>) => {
      state.selectedLessons = action.payload;
      state.hasSelectedLessons = action.payload.length > 0;
    },
    clearSelections: (state) => {
      state.selectedStudy = null;
      state.studyName = null;
      state.selectedLessons = [];
      state.studySelectionButton = false;
      state.hasSelectedLessons = false;
    }
  }
});

export const {
  activeButtonReducer,
  disableButtonReducer,
  setSelectedStudy,
  setSelectedLesson,
  clearSelections
} = darsyarSlice.actions;

export default darsyarSlice.reducer;
```

================
FILE: src\slice\dangerStudentsSlice.ts
================

```
import { createSlice, PayloadAction } from '@reduxjs/toolkit';

interface DangerEvent {
  id: string;
  student_name: string;
  subject_name: string;
  level: 'DANGER' | 'CONCERN' | 'INFO';
  explanation: string;
  emoji: string;
  created_at: string;
  session_id?: string;
}

interface DangerStudentsState {
  dangerEvents: DangerEvent[];
  lastUpdated: string | null;
  isLoading: boolean;
}

const initialState: DangerStudentsState = {
  dangerEvents: [],
  lastUpdated: null,
  isLoading: false,
};

const dangerStudentsSlice = createSlice({
  name: 'dangerStudents',
  initialState,
  reducers: {
    setDangerEvents: (state, action: PayloadAction<DangerEvent[]>) => {
      state.dangerEvents = action.payload;
      state.lastUpdated = new Date().toISOString();
      state.isLoading = false;
    },
    addDangerEvent: (state, action: PayloadAction<DangerEvent>) => {
      const existingIndex = state.dangerEvents.findIndex(
        event => event.id === action.payload.id
      );
      
      if (existingIndex !== -1) {
        // Update existing event
        state.dangerEvents[existingIndex] = action.payload;
      } else {
        // Add new event
        state.dangerEvents.push(action.payload);
      }
      state.lastUpdated = new Date().toISOString();
    },
    removeDangerEvent: (state, action: PayloadAction<string>) => {
      state.dangerEvents = state.dangerEvents.filter(
        event => event.id !== action.payload
      );
      state.lastUpdated = new Date().toISOString();
    },
    clearDangerEvents: (state) => {
      state.dangerEvents = [];
      state.lastUpdated = null;
    },
    setLoading: (state, action: PayloadAction<boolean>) => {
      state.isLoading = action.payload;
    },
  },
});

export const {
  setDangerEvents,
  addDangerEvent,
  removeDangerEvent,
  clearDangerEvents,
  setLoading,
} = dangerStudentsSlice.actions;

export default dangerStudentsSlice.reducer;

// Selectors
export const selectDangerEvents = (state: { dangerStudents: DangerStudentsState }) => 
  state.dangerStudents.dangerEvents;

export const selectDangerEventsCount = (state: { dangerStudents: DangerStudentsState }) => 
  state.dangerStudents.dangerEvents.length;

export const selectLastUpdated = (state: { dangerStudents: DangerStudentsState }) => 
  state.dangerStudents.lastUpdated;

export const selectIsLoading = (state: { dangerStudents: DangerStudentsState }) => 
  state.dangerStudents.isLoading;
```

================
FILE: src\slice\chatSlice.ts
================

```

```

================
FILE: src\login\LoginButton.tsx
================

```
import React from 'react'

interface LoginButtonProps {
  disabled?: boolean
}

const LoginButton: React.FC<LoginButtonProps> = ({ disabled }) => {
  return (
    <div className="flex justify-center items-center bg-white w-full hover:transform hover:translate-y-1">
      <div className={`chat-button border-b-2 border-backGroundButton w-full ${disabled ? 'opacity-50' : ''} `}>
        <button 
          type="submit"
          disabled={disabled}
          className="button-box text-white cursor-pointer p-[16px] w-full disabled:cursor-not-allowed "
        >
          {disabled ? 'Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...' : 'ÙˆØ±ÙˆØ¯'}
        </button>
      </div>
    </div>
  )
}

export default LoginButton

```

================
FILE: src\login\Login.tsx
================

```
import React from 'react'
import HeroSection from './HeroSection'
import InputGroup from './InputGroup'

const Login = () => {
  return (
    <div className='bg-backGround-1 '>
      <HeroSection/>
      <InputGroup/>
    </div>
  )
}

export default Login

```

================
FILE: src\login\InputGroup.tsx
================

```
import { useState } from 'react'
import { useDispatch } from 'react-redux'
import LoginButton from './LoginButton'
import { login } from '../api'
import { setUser } from '../slice/userSlice'
import { useNavigate } from 'react-router-dom'

const InputGroup = () => {
  const [username, setUsername] = useState('')
  const [password, setPassword] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const dispatch = useDispatch()
  const navigate = useNavigate()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    setLoading(true)

    try {
      const response = await login(username, password)
      
      dispatch(setUser({
        id: response.user.id,
        username: response.user.username,
        first_name: response.user.first_name,
        last_name: response.user.last_name,
        role: response.user.role,
        token: response.token
      }))
      
      // Navigate based on role
      if (response.user.role === 'STUDENT') {
        navigate('/student')
      } else if (response.user.role === 'STAFF') {
        navigate('/teacher')
      }
    } catch (err: any) {
      setError(err.response?.data?.message || 'Ø®Ø·Ø§ Ø¯Ø± ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…')
    } finally {
      setLoading(false)
    }
  }

  return (
    <form onSubmit={handleSubmit} className='flex flex-col justify-center items-center rounded-[24px] p-[40px] space-y-6 bg-white border-[2px] border-borderColor-1 rounded-b-none'>
      {error && (
        <div className='w-full text-right text-red-500 text-sm mb-4'>
          {error}
        </div>
      )}
      <div className='w-full mb-[16px]'>
        <p className='mb-[12px] text-right text-[14px] font-extrabold'>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
        <input
          value={username}
          onChange={(e) => setUsername(e.target.value)}
          className='p-[16px] rounded-[16px] w-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-chatButton-1'
          required
        />
      </div>
      <div className='w-full mb-[40px]'>
        <p className='mb-[12px] text-right text-[14px] font-extrabold'>Ú©Ø¯ ÙˆØ±ÙˆØ¯</p>
        <input
          type="password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
          className='p-[16px] rounded-[16px] border border-gray-300 w-full focus:outline-none focus:ring-2 focus:ring-chatButton-1'
          required
        />
      </div>
      <LoginButton disabled={loading} />
    </form>
  )
}

export default InputGroup
```

================
FILE: src\login\HeroSection.tsx
================

```
import happyFace from './../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='pb-[32px] pt-[16px]   flex justify-center items-center flex-col h-[60vh]'>
        <div className=' p-4'>
        <img src={happyFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ Ú©ÛŒÙ€Ù€Ù€Ù€Ø¯Ùˆ  Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\layout\ClassLayout.tsx
================

```
import React from 'react';
import { Outlet } from 'react-router-dom';
import Header from '../components/common/Header';
import Navbar from '../teacher/components/contentContainer/Navbar';
import StudentAlert from '../teacher/components/contentContainer/StudentAlert';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

// Define an interface for the class data structure
interface TeacherClass {
  id: string;
  name: string;
  grade_level: number;
}

const ClassLayout = () => {
  // Fetch the classes for the teacher using react-query
  const { data: classes, isLoading } = useQuery<TeacherClass[]>({
        queryKey: ['teacherClasses'], // Using a consistent key to leverage caching
        queryFn: async () => {
            console.log("API CALL: fetching classes for Header");
            const res = await axios.get('https://kiddo2.pythonanywhere.com/api/v1/academics/classes/');
            console.log("API RESPONSE: fetching classes for Header success", res.data);
            return res.data;
        },
        staleTime: 300000, // Cache data for 5 minutes
    });

  // Determine the header title based on the fetching state
  const headerTitle = isLoading 
    ? 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...' 
    : (classes && classes.length > 0 ? classes[0].name : 'Ú©Ù„Ø§Ø³ Ù…Ù†');
    
    
      
  return (
    <div>
      <Header title={headerTitle} />
      <Navbar />
      <div className='bg-backGround-1 min-h-screen'>
        <div className='mx-[16px] '>
          <StudentAlert />
          <main>
            <Outlet />
          </main>
        </div>
      </div>
    </div>
  );
};

export default ClassLayout;
```

================
FILE: src\hooks\useClientInfo.ts
================

```
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface ClientInfo {
  id: string;
  username: string;
  first_name: string;
  last_name: string;
  role: string;
}

const fetchClientInfo = async (): Promise<ClientInfo> => {
  const response = await axios.get('/api/v1/accounts/me/', {
    headers: {
      Authorization: `Token ${localStorage.getItem('token')}`,
    },
  });

  return response.data;
};

export const useClientInfo = () => {
  return useQuery({
    queryKey: ['clientInfo'],
    queryFn: fetchClientInfo,
  });
};

```

================
FILE: src\hooks\useChatSessions.ts
================

```
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

const API_BASE_URL = 'https://kiddo2.pythonanywhere.com';

interface ChatSession {
  id: string;
  tool: string;
  title: string;
  subject: string;
  updated_at: string;
}

const fetchChatSessions = async (): Promise<ChatSession[]> => {
  console.log("API CALL: fetchChatSessions");
  // The token is handled by the global axios interceptor.
  const response = await axios.get(`${API_BASE_URL}/api/v1/chat/sessions/`);
  console.log("API RESPONSE: fetchChatSessions success", response.data);
  // Ensure we always return an array
  return Array.isArray(response.data) ? response.data : [];
};

export const useChatSessions = () => {
  return useQuery({
    queryKey: ['chatSessions'],
    queryFn: fetchChatSessions,
    staleTime: 60000, // Cache for 1 minute
  });
};
```

================
FILE: src\constants\tarkibkonWelcomeConstant.tsx
================

```
import { FluentEmoji } from '@lobehub/fluent-emoji';
import { ReactElement } from 'react';

export const tarkibkonWelcomeConstant:TarkibkonType[] = [
  {
    logo: <FluentEmoji emoji='ğŸ§ª' size={24}  type='anim'/>,
    title: 'ØªØ±Ú©ÛŒØ¨ Ø´Ú¯ÙØªâ€ŒØ§Ù†Ú¯ÛŒØ²',
    description:
      'Ø¯Ø±Ø³â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø§ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ØŒ ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ Ùˆ Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¹Ø§Ø´Ù‚Ø´ÛŒØŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±. Ø§ÛŒÙ†Ø¬Ø§ Ø¹Ù„Ù… Ùˆ Ø³Ø±Ú¯Ø±Ù…ÛŒ Ø¨Ø§ Ù‡Ù… ØªØ±Ú©ÛŒØ¨ Ù…ÛŒØ´Ù†!',
  },
  {
    logo:<FluentEmoji emoji='ğŸ•¹ï¸' size={24}  type='anim'/>,
    title: 'Ø®Ø¯Ø§Ø­Ø§ÙØ¸ÛŒ Ø¨Ø§ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø®Ø³ØªÙ‡â€ŒÚ©Ù†Ù†Ø¯Ù‡',
    description:
     'Ø³Ø®Øªâ€ŒØªØ±ÛŒÙ† Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¯Ø±Ø³ÛŒ Ø±Ùˆ Ø¨Ø§ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø² Ø¯Ù†ÛŒØ§ÛŒ Ù…Ø§ÛŒÙ†Ú©Ø±ÙØªØŒ ÙÙˆØªØ¨Ø§Ù„ ÛŒØ§ Ù‡Ø±ÛŒ Ù¾Ø§ØªØ± Ø¨Ø±Ø§Øª ØªÙˆØ¶ÛŒØ­ Ù…ÛŒØ¯ÛŒÙ….',
  },
  {
    logo: <FluentEmoji emoji='ğŸ”­' size={24}  type='anim'/>,
    title: 'Ø§Ø² Ø²Ø§ÙˆÛŒÙ‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø¨ÛŒÙ†',
    description:
      'Ø§Ø±ØªØ¨Ø§Ø·â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù‡Ø§Ù† Ø¨ÛŒÙ† Ø¯Ø±Ø³ Ùˆ Ø¯Ù†ÛŒØ§ÛŒ Ø§Ø·Ø±Ø§ÙØª Ø±Ùˆ Ú©Ø´Ù Ú©Ù† Ùˆ Ø¨Ø¨ÛŒÙ† Ú†Ø·ÙˆØ± Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¨Ù‡ Ù‡Ù… Ø±Ø¨Ø· Ø¯Ø§Ø±Ù‡.',
  },
];
export interface TarkibkonType{
   logo:ReactElement ,
    title: string,
    description:string
}

```

================
FILE: src\constants\studyAssistantConstant.tsx
================

```
import { FluentEmoji } from "@lobehub/fluent-emoji";
import { ReactElement } from "react";

export const studyAssistantConstatnt: studyAssistantType[] = [
  {
    logo: (
      <FluentEmoji
        emoji="ğŸš€"

        size={24}
        type={"anim"}
        
      />
    ),
    title: "Ù‡ÛŒÚ† Ø¯Ø±Ø³ÛŒ Ø¯ÛŒÚ¯Ù‡ Ø³Ø®Øª Ù†ÛŒØ³Øª",
    description:
      "Ø¨Ø§ Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ø§Ø± Ù‡Ø± Ù…Ø¨Ø­Ø« Ø³Ø®ØªÛŒ Ø§Ø² Ú©ØªØ§Ø¨ Ø±Ùˆ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù‡ Ø²Ø¨ÙˆÙ† Ø³Ø§Ø¯Ù‡ Ùˆ Ø³Ø±ÛŒØ¹ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±.",
  },
  {
    logo: <FluentEmoji emoji="ğŸ˜" size={24} type="anim" />,
    title: "Ù…Ø¹Ù„Ù… Ø®ØµÙˆØµÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡",
    description:
      "Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ø§Ø± Ù‡Ù…ÛŒØ´Ù‡ Ù‡Ù…Ø±Ø§Ù‡ ØªÙˆ! Ù‡Ø± Ø²Ù…Ø§Ù† Ùˆ Ù‡Ø±Ú©Ø¬Ø§ØŒ Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§ØªØª Ø¬ÙˆØ§Ø¨ ÙÙˆØ±ÛŒ Ø¨Ú¯ÛŒØ±.",
  },
  {
    logo: <FluentEmoji emoji="ğŸ‘½" size={24} type="anim" />,
    title: "Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ø¢Ø³ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",
    description:
      "Ø¨Ø§ Ø®Ù„Ø§ØµÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ù†Ú©ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†ÛŒØŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø§Ø² Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ùˆ.",
  },
];
export interface studyAssistantType {
  logo: ReactElement;
  title: string;
  description: string;
}

```

================
FILE: src\constants\konjkavWelcomConstant.tsx
================

```
import { ReactElement } from "react";
import { FluentEmoji } from '@lobehub/fluent-emoji';


export const konjkavWelcomeConstant:KonjkavType[] = [
  {
    logo: <FluentEmoji emoji='ğŸ•µï¸' size={24}  type='3d'/>,
    title: 'Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡Ù Ø¯Ø§Ù†Ø´ Ø´Ùˆ',
    description:
      "ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø±Ùˆ Ø¨Ø§ Ù¾Ø±Ø³ÛŒØ¯Ù† Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ Ù‡ÛŒØ¬Ø§Ù†â€ŒØ§Ù†Ú¯ÛŒØ² Ø´Ø±ÙˆØ¹ Ú©Ù† Ùˆ Ù…Ø«Ù„ ÛŒÚ© Ú©Ø§Ø±Ø¢Ú¯Ø§Ù‡ Ø¨Ù‡ Ø¹Ù…Ù‚ Ù‡Ø± Ù…ÙˆØ¶ÙˆØ¹ÛŒ Ø³ÙØ± Ú©Ù†.",
  },
  {
    logo:<FluentEmoji emoji='ğŸŒŒ' size={24}  type='anim'/>,
    title: 'Â Ø§Ø² ÛŒÚ© Ú©Ù„Ù…Ù‡ ØªØ§ ÛŒÚ© Ú©Ù‡Ú©Ø´Ø§Ù†',
    description:
      'ÙÙ‚Ø· ÛŒÚ© Ù…ÙˆØ¶ÙˆØ¹ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù† ØªØ§ Ú©ÛŒØ¯Ùˆ Ø¨Ø§ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ØŒ Ø±Ø§Ù‡ Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ú©Ø´Ùâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ØªØ± Ø¨Ø±Ø§Øª Ø¨Ø§Ø² Ú©Ù†Ù‡.',
  },
  {
    logo: <FluentEmoji emoji='ğŸ—ºï¸' size={24}  type='anim'/>,
    title: 'Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆÛŒÛŒ Ø¯Ø± Ø³Ø±Ø²Ù…ÛŒÙ† Ø¹Ù„Ù…',
    description:
    'Ù‡ÛŒÚ†ÙˆÙ‚Øª Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯Ø±ÙØªÙ† Ù…ØªÙˆÙ‚Ù Ù†Ø´ÙˆØ› Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ø³ÙˆØ§Ù„ Ø¬Ø§Ù„Ø¨ Ùˆ ÛŒÚ© Ù…Ø³ÛŒØ± Ú©Ø´Ù Ù†Ø´Ø¯Ù‡ Ù…Ù†ØªØ¸Ø±ØªÙ‡!',
  },
];
export interface KonjkavType{
   logo:ReactElement ,
    title: string,
    description:string
}

```

================
FILE: src\constants\azmonWelcomeConstant.tsx
================

```
// import { FluentEmoji } from '@lobehub/fluent-emoji';
// import { ReactElement } from 'react';

// export const azmonWelcomeConstant:AzmonType[] = [
//   {
//     logo: <FluentEmoji emoji='ğŸ†' size={24}  type='anim'/>,
//     title: 'Ù‚Ù‡Ø±Ù…Ø§Ù† Ø§Ù…ØªØ­Ø§Ù† Ø®ÙˆØ¯Øª Ø¨Ø§Ø´',
//     description:
//       'Ø¨Ø§ Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø² Ø§Ø² Ù‡Ø± Ø¯Ø±Ø³ Ùˆ ÙØµÙ„ÛŒ Ú©Ù‡ Ø¨Ø®ÙˆØ§ÛŒØŒ Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø³Ø§Ø² Ùˆ Ù†Ù‚Ø§Ø· Ù‚ÙˆØª Ùˆ Ø¶Ø¹ÙØª Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù†.',
//   },
//   {
//     logo:<FluentEmoji emoji='ğŸšï¸' size={24}  type='anim'/>,
//     title: 'Â Ø³Ø·Ø­ Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø³Øª Ø®ÙˆØ¯ØªÙ‡â€¨',
//     description:'Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø§ Ø³Ø®ØªÛŒ Ø¯Ù„Ø®ÙˆØ§Ù‡Øª Ø¨Ø³Ø§Ø²ØŒ Ø§Ø² Ø³ÙˆØ§Ù„Ø§ÛŒ Ø¢Ø³ÙˆÙ† Ø´Ø±ÙˆØ¹ Ú©Ù† Ùˆ Ø¨Ø§ Ø³Ø®Øªâ€ŒØªØ±ÛŒÙ†â€ŒÙ‡Ø§ Ø¨Ù‡ØªØ± ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±.',
//   },
//   {
//     logo:<FluentEmoji emoji='ğŸ˜Œ' size={24}  type='anim'/>,
//     title: 'Ø¨Ø§ Ù†Ù…Ø±Ù‡ Û²Û° ØºØ§ÙÙ„Ú¯ÛŒØ±Ø´ÙˆÙ† Ú©Ù†',
//     description:
//      'Ø¨Ø§ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ Ø´Ø¨ÛŒÙ‡ Ø¨Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ø§ØµÙ„ÛŒ ØªÙ…Ø±ÛŒÙ† Ú©Ù† ØªØ§ Ø³Ø± Ø¬Ù„Ø³Ù‡ØŒ Ø¬ÙˆØ§Ø¨â€ŒÙ‡Ø§ Ø±Ùˆ Ú†Ø´Ù…â€ŒØ¨Ø³ØªÙ‡ Ø¨Ø²Ù†ÛŒ!',
//   },
// ];
// export interface AzmonType{
//    logo:ReactElement ,
//     title: string,
//     description:string
// }
```

================
FILE: src\components\RecentChats.tsx
================

```
import React from 'react';
import { useChatSessions } from '../hooks/useChatSessions';
import RecentChatCard from './common/RecentChatCard';

const RecentChats: React.FC = () => {
  const { data: chatSessions, isLoading, isError } = useChatSessions();

  if (isLoading) {
    return <div className="text-center py-4">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>;
  }

  if (isError) {
    return <div className="text-center text-red-500 py-4">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú†Øªâ€ŒÙ‡Ø§</div>;
  }

  if (!chatSessions || chatSessions.length === 0) {
    return (
      <div className="flex flex-col items-center justify-center p-6 text-center">
        <p className="text-gray-500">Ú†Øª Ø§Ø®ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>
      </div>
    );
  }
  
  return (
    <div className="space-y-[12px]">
      {chatSessions.map((session) => (
        <RecentChatCard
          key={session.id}
          id={session.id}
          title={session.title}
          tool={session.tool}
          subject={session.subject}
          updatedAt={session.updated_at}
        />
      ))}
    </div>
  );
};

export default RecentChats;
```

================
FILE: src\api\chatApi.ts
================

```
import darsyarIcon from "../assets/images/darsyar.webp";
import konjkavIcon from "../assets/images/konjkav.png";
import tarkibkonIcon from "../assets/images/hediye.png";
import { RecentChat } from "../types/chat";

// Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ API Ø±Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
export const fetchRecentChats = async (): Promise<RecentChat[]> => {
  console.log("Fetching recent chats from API...");
  // ØªØ§Ø®ÛŒØ± Ø¹Ù…Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¨Ú©Ù‡
  await new Promise((resolve) => setTimeout(resolve, 1000));

  // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÚ¯ÛŒ
  const mockChats: RecentChat[] = [
    {
      id: "1",
      title: "ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÙØªÙˆØ³Ù†ØªØ² Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù‡Ù…",
      tool: "Ø¯Ø±Ø³â€ŒÛŒØ§Ø±",
      subject: "Ø¹Ù„ÙˆÙ…",
      date: "Û±Û¹ Ø®Ø±Ø¯Ø§Ø¯",
      iconUrl: darsyarIcon,
    },
    {
      id: "2",
      title: "Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø¯Ø±Ø¬Ù‡ Ø¯Ùˆ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ø¢Ù†",
      tool: "Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ",
      subject: "Ø±ÛŒØ§Ø¶ÛŒ",
      date: "Û±Û¸ Ø®Ø±Ø¯Ø§Ø¯",
      iconUrl: konjkavIcon,
    },
    {
      id: "3",
      title: "Ø®Ù„Ø§ØµÙ‡ Ù†ÙˆÛŒØ³ÛŒ Ø¯Ø±Ø³ ØªØ§Ø±ÛŒØ® Ù…Ø¹Ø§ØµØ± Ø§ÛŒØ±Ø§Ù†",
      tool: "ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†",
      subject: "ØªØ§Ø±ÛŒØ®",
      date: "Û±Û· Ø®Ø±Ø¯Ø§Ø¯",
      iconUrl: tarkibkonIcon,
    },
  ];

  return mockChats;
};
```

================
FILE: src\api\authApi.ts
================

```
ï¿½ï¿½ 
 
```

================
FILE: src\api\apiClient.ts
================

```

```

================
FILE: src\student\pages\StudentHome.tsx
================

```
import Header from "../components/home/Header";
import ToolCard from "../components/home/ToolCard";
import { useClientInfo } from "../../hooks/useClientInfo";
import RecentChatCard from "../../components/common/RecentChatCard";
import { useChatSessions } from "../../hooks/useChatSessions";
import darsyar from "./../../assets/images/darsyar.webp";
import azmon from "./../../assets/images/azmon.webp";
import konjkav from "./../../assets/images/konjkav.webp";
import tarkibkon from "./../../assets/images/tarkibkon.webp";

const StudentHome = () => {
  const { data: chatSessions = [], isLoading: chatsLoading } =
    useChatSessions();

  const hasRecentChatsForTool = (tool: string) => {
    return chatSessions.some((session) => session.tool === tool);
  };

  return (
    <div className="h-screen bg-backGround-1">
      <Header />

      <div className=" mx-[24px]  pt-[32px]">
        <h1>Ø§Ø¨Ø²Ø§Ø±â€ŒÙ‡Ø§</h1>
      </div>

      <div className="bg-backGround-1 ">
        <div className="p-[24px]">
          <h1 className="mb-[40px] font-extrabold text-[14px]">Ø§Ø¨Ø²Ø§Ø±â€ŒÙ‡Ø§</h1>

          <div className="mb-[24px]">
            <div className="flex justify-center items-stretch mb-[40px] gap-[12px]">
              <ToolCard
                title="Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±"
                description="Ø¨Ù‡Øª Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ø¨Ù‡ØªØ± Ø¨ÙÙ‡Ù…ÛŒ!"
                tool="DARS_YAR"
                hasRecentChats={hasRecentChatsForTool("SOALYAR")}
                image={darsyar}
              />
              <ToolCard
                title="Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ù€Ù€Ù€Ø§Ø²"
                description="Ú©Ù„ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø³ÙˆØ§Ù„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§Øª Ø·Ø±Ø§Ø­ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù‡!"
                tool="AZMOON_SAZ"
                hasRecentChats={hasRecentChatsForTool("AZMOON_SAZ")}
                image={azmon}
              />
            </div>
            <div className="flex justify-center items-stretch gap-[12px]">
              <ToolCard
                title="ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†"
                description="Ø¯Ø±Ø³Ø§Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø®ÙˆØ¯Øª Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯Ø¨Ú¯ÛŒØ±."
                tool="TARKIB_KON"
                hasRecentChats={hasRecentChatsForTool("DARS_YAR")}
                image={tarkibkon}
              />
              <ToolCard
                title="Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ"
                description="Ù‡Ù…Ø±Ø§Ù‡ Ø®ÙˆØ¨ ØªÙˆ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯Ø±ÙØªÙ† Ú†ÛŒØ²Ø§ÛŒ Ø¬Ø¯ÛŒØ¯!"
                tool="KONJKAV"
                hasRecentChats={hasRecentChatsForTool("KONJKAV")}
                image={konjkav}
              />
            </div>
          </div>
        </div>

        <h3 className="font-extrabold text-right text-[14px] mr-[16px] mb-[16px]">
          Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
        </h3>
        <div className="space-y-[12px] mx-[24px]">
          {chatsLoading ? (
            <div className="text-center py-4">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
          ) : chatSessions.length === 0 ? (
            <div className="text-center text-gray-500 py-4">
              Ù‡ÛŒÚ† Ú†Øª Ø§Ø®ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
            </div>
          ) : (
            chatSessions.map((session) => (
              <RecentChatCard
                key={session.id}
                title={session.title}
                tool={session.tool}
                subject={session.subject}
                updatedAt={session.updated_at}
              />
            ))
          )}
        </div>
      </div>
    </div>
  );
};

export default StudentHome;

```

================
FILE: src\teacher\pages\TeacherHome.tsx
================

```
import React from "react";
import Header from "../../student/components/home/Header";
import Classes from "../components/home/Classes";
import ToolCard from './../components/home/ToolCard'
import RecentChatCard from "../../components/common/RecentChatCard";
import ProgressQuestion from "../components/home/ProgressQuestion";
import { useChatSessions } from "../../hooks/useChatSessions";
import { useNavigate } from "react-router-dom";
import darsyar from './../../assets/images/darsyar.webp'
import azmon from './../../assets/images/azmon.webp'
import tarkibkon from './../../assets/images/tarkibkon.webp'
import konjkav from './../../assets/images/konjkav.webp'

const TeacherHome = () => {
  const navigate=useNavigate()
  const { data: chatSessions = [], isLoading, isError } = useChatSessions();

  const hasRecentChatsForTool = (tool: string) => {
    return chatSessions.some((session) => session.tool === tool);
  };
  const handleClasses=()=>{
    navigate('/teacher/students')
  }

  return (
    <div>
      <Header />
      <div className="bg-backGround-1 h-full">
        <div className="p-[24px] gap-[16px] ">
          <div >
            <h1 className="mb-[16px] mt-12">Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</h1>
            <div onClick={handleClasses}>
              <Classes />
            </div>
           
          </div>
          <div>
            <h1 className="pt-[20px] pb-[32px]">Ø§Ø¨Ø²Ø§Ø±â€ŒÙ‡Ø§</h1>
            <div className="mb-[24px]">
              <div className="flex justify-center items-stretch mb-[12px] gap-[12px]">
                    <ToolCard
                  title="Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±"
                  description='Ø¨Ù‡Øª Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ø¨Ù‡ØªØ± Ø¨ÙÙ‡Ù…ÛŒ!'
                  tool="DARS_YAR"
                  hasRecentChats={hasRecentChatsForTool("SOALYAR")}
                  image={darsyar}
                />
                <ToolCard
                  title="Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ù€Ù€Ù€Ø§Ø²"
                  description='Ú©Ù„ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø³ÙˆØ§Ù„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§Øª Ø·Ø±Ø§Ø­ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù‡!'
                  tool="AZMOON_SAZ"
                  hasRecentChats={hasRecentChatsForTool("AZMOON_SAZ")}
                  image={azmon}
                />
               
              </div>
              <div className="flex justify-center items-stretch gap-[12px]">
             <ToolCard 
                  title="ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†"
                  description='Ø¯Ø±Ø³Ø§Ø±Ùˆ Ù‡Ù…ÙˆÙ†Ø·ÙˆØ±ÛŒ Ú©Ù‡ Ø®ÙˆØ¯Øª Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ ÛŒØ§Ø¯Ø¨Ú¯ÛŒØ±.'
                  tool="TARKIB_KON"
                  hasRecentChats={hasRecentChatsForTool("DARS_YAR")}
                  image={tarkibkon}
                />
                <ToolCard
                  title="Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ"
                  description='Ù‡Ù…Ø±Ø§Ù‡ Ø®ÙˆØ¨ ØªÙˆ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯Ø±ÙØªÙ† Ú†ÛŒØ²Ø§ÛŒ Ø¬Ø¯ÛŒØ¯!'
                  tool="KONJKAV"
                  hasRecentChats={hasRecentChatsForTool("KONJKAV")}
                  image={konjkav}
                />
              </div>
            </div>
          </div>
          {/* <div>
            <h1 className="mb-[16px]">ÙˆØ¶Ø¹ÛŒØª Ù…ØµØ±Ù</h1>
            <ProgressQuestion progress={50} />
          </div> */}

          <h3 className="font-extrabold text-right text-[14px] mt-[32px] mb-[16px]">
            Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
          </h3>
          <div className="space-y-[12px]">
            {isLoading ? (
              <div className="text-center py-4">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
            ) : isError ? (
              <div className="text-center text-red-500 py-4">
                Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú†Øªâ€ŒÙ‡Ø§
              </div>
            ) : chatSessions.length === 0 ? (
              <div className="text-center text-gray-500 py-4">
                Ù‡ÛŒÚ† Ú†Øª Ø§Ø®ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
              </div>
            ) : (
              chatSessions.map((session) => (
                <RecentChatCard
                  key={session.id}
                  title={session.title}
                  tool={session.tool}
                  subject={session.subject}
                  updatedAt={session.updated_at}
                />
              ))
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default TeacherHome;

```

================
FILE: src\teacher\pages\ReportsPage.tsx
================

```
// src/teacher/pages/ReportsPage.tsx
import React, { useState, useEffect } from 'react';
import { useQuery } from '@tanstack/react-query';
import ReportTools from '../components/contentContainer/reports/ReportTools';
import StudentReports from '../components/contentContainer/reports/StudentReports';
import ReportDetailModal from '../components/contentContainer/reports/modals/ReportDetailModal';
import { fetchChatEvents } from '../../api-teacher';
import LessonModal from '../components/contentContainer/reports/modals/LessonModal';
import ToolsModal from '../components/contentContainer/reports/modals/ToolsModal';
import StudentAlert from '../components/contentContainer/StudentAlert';
import tool from './../../assets/images/reportsPage/tool.png'
import lesson from './../../assets/images/reportsPage/lesson.png'

const ReportsPage = () => {
  const [selectedEventId, setSelectedEventId] = useState<string | null>(null);
  
  // State to manage which modal is open
  const [openModal, setOpenModal] = useState<'lessons' | 'tools' | null>(null);
  
  // State for selected filters - initialize from localStorage
  const [selectedLesson, setSelectedLesson] = useState(() => {
    return localStorage.getItem('reportsPage_selectedLesson') || 'Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§';
  });
  const [selectedTool, setSelectedTool] = useState(() => {
    return localStorage.getItem('reportsPage_selectedTool') || 'Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡Ø§';
  });

  // Save to localStorage whenever filters change
  useEffect(() => {
    localStorage.setItem('reportsPage_selectedLesson', selectedLesson);
  }, [selectedLesson]);

  useEffect(() => {
    localStorage.setItem('reportsPage_selectedTool', selectedTool);
  }, [selectedTool]);

  const { data: events, isLoading, isError } = useQuery({
    queryKey: ['chatEvents'],
    queryFn: fetchChatEvents,
  });

  // Filter events based on selected lesson and tool
  const filteredEvents = events?.filter(event => {
    const lessonMatch = selectedLesson === 'Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§' || event.subject_name === selectedLesson;
    // Since ChatEvent doesn't have tool_name, we'll just filter by lesson for now
    // You may need to add tool filtering logic based on your actual data structure
    return lessonMatch;
  }) || [];

  const handleOpenDetailModal = (eventId: string) => {
    setSelectedEventId(eventId);
  };

  const handleCloseDetailModal = () => {
    setSelectedEventId(null);
  };

  const handleConfirmLesson = (lesson: string) => {
    setSelectedLesson(lesson);
    setOpenModal(null);
  };
  
  const handleConfirmTool = (tool: string) => {
    setSelectedTool(tool);
    setOpenModal(null);
  };

  return (
    <>
      
      
      
      <div className='flex justify-center items-center gap-[12px] mb-[16px]'>
        <ReportTools 
          title={selectedLesson} 
          onClick={() => setOpenModal('lessons')} 
          image={lesson}
          isSelected={selectedLesson !== 'Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§'}
        />
        <ReportTools 
          title={selectedTool} 
          onClick={() => setOpenModal('tools')} 
          image={tool}
          isSelected={selectedTool !== 'Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡Ø§'}
        />
      </div>

      <div className='border-[2px] border-borderColor-1 rounded-[24px] bg-white p-[16px]'>
        {isLoading && <p className='text-center py-4'>Ø¯Ø± Ø­Ø§Ù„ bØ§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´Ø§Øª...</p>}
        {isError && <p className='text-center py-4 text-red-500'>Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´Ø§Øª.</p>}
        {filteredEvents && filteredEvents.length === 0 && <p className='text-center py-4 text-gray-500'>Ú¯Ø²Ø§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>}
        
        <div className='space-y-4 divide-y divide-gray-100'>
            {filteredEvents?.map((event) => (
              <div key={event.id} className="pt-4 first:pt-0">
                <StudentReports event={event} onOpenModal={handleOpenDetailModal} />
              </div>
            ))}
        </div>
      </div>
      
      <ReportDetailModal 
        eventId={selectedEventId}
        onClose={handleCloseDetailModal}
      />

      <LessonModal
        isModalOpen={openModal === 'lessons'}
        handleCloseModal={() => setOpenModal(null)}
        initialSelection={selectedLesson}
        onConfirm={handleConfirmLesson}
      />
      
      <ToolsModal
        isModalOpen={openModal === 'tools'}
        handleCloseModal={() => setOpenModal(null)}
        initialSelection={selectedTool}
        onConfirm={handleConfirmTool}
      />
    </>
  );
};

export default ReportsPage;
```

================
FILE: src\teacher\pages\ContentContainer.tsx
================

```

import StudentsActivities from '../components/contentContainer/students/StudentsActivities'


const ContentContainer = () => {
  return (
    <div>
     
      <StudentsActivities/>
      
     
    </div>
  )
}

export default ContentContainer

```

================
FILE: src\teacher\pages\ClassChat.tsx
================

```
import RecentChats from '../../components/RecentChats'

const ClassChat = () => {
  return (
     <div className="py-4">
        <RecentChats />
    </div>
  )
}

export default ClassChat
```

================
FILE: src\components\common\Toast.tsx
================

```
import React, { useEffect } from 'react';

interface ToastProps {
  message: string;
  type: 'success' | 'error';
  onClose: () => void;
}

const Toast: React.FC<ToastProps> = ({ message, type, onClose }) => {
  useEffect(() => {
    const timer = setTimeout(() => {
      onClose();
    }, 5000); // Close after 5 seconds

    return () => {
      clearTimeout(timer);
    };
  }, [onClose]);

  const baseClasses = 'fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white z-50 animate-pulse';
  const typeClasses = type === 'success' ? 'bg-green-500' : 'bg-red-500';

  return (
    <div className={`${baseClasses} ${typeClasses}`}>
      <span>{message}</span>
      <button onClick={onClose} className="ml-4 font-bold">X</button>
    </div>
  );
};

export default Toast;
```

================
FILE: src\components\common\RecentChatCard.tsx
================

```
import React from 'react';

// Import tool icons
import darsyarIcon from './../../assets/images/darsyar.webp';
import konjkavIcon from './../../assets/images/konjkav.webp';
import tarkibkonIcon from './../../assets/images/tarkibkon.webp';
import azmonIcon from './../../assets/images/azmon.webp';
import defaultIcon from './../../assets/images/happyface.webp';

interface RecentChatCardProps {
  id: string;
  title: string;
  tool: string;
  subject: string;
  updatedAt: string;
}

const toolInfoMap: { [key: string]: { name: string; icon: string } } = {
  DARS_YAR: { name: 'Ø¯Ø±Ø³â€ŒÛŒØ§Ø±', icon: darsyarIcon },
  KONJKAV_SHO: { name: 'Ú©Ù†Ø¬Ú©Ø§Ùˆ', icon: konjkavIcon },
  TARKIB_KON: { name: 'ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù†', icon: tarkibkonIcon },
  AZMOON_SAZ: { name: 'Ø¢Ø²Ù…ÙˆÙ†â€ŒØ³Ø§Ø²', icon: azmonIcon },
};

const RecentChatCard: React.FC<RecentChatCardProps> = ({ id, title, tool, subject, updatedAt }) => {
  
  const formatDate = (dateString: string) => {
    try {
      if (!dateString) return '';
      const date = new Date(dateString);
      if (isNaN(date.getTime())) return '';
      const options: Intl.DateTimeFormatOptions = { month: 'long', day: 'numeric' };
      return new Intl.DateTimeFormat('fa-IR', options).format(date);
    } catch (error) {
      console.error('Error formatting date:', error);
      return '';
    }
  };

  const toolDetails = toolInfoMap[tool] || { name: tool, icon: defaultIcon };

  const handleClick = () => {
    console.log(`Navigating to chat session: ${id}`);
    // Navigation logic will be added later when the chat view page is ready.
  };

  return (
    <div onClick={handleClick} className="cursor-pointer">
      <div className='card-box'>
        <div className='flex justify-start items-center bg-white rounded-[24px] p-[16px] gap-[16px]'>
          <div>
            <img className='w-[56px] h-[56px]' src={toolDetails.icon} alt={toolDetails.name} />
          </div>
          <div className='flex flex-col gap-[4px] w-full overflow-hidden'>
            <h1 className='font-extrabold truncate text-[14px]'>{title}</h1>
            <div className='flex flex-wrap items-center gap-[4px]'>
              <p className='bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]'>{toolDetails.name}</p>
              <p className='bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]'>{subject}</p>
              <p className='bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]'>
                {formatDate(updatedAt)}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

export default RecentChatCard;
```

================
FILE: src\components\common\Header.tsx
================

```
import { FC } from "react";
import React from "react"; // Import React for inline SVG
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";

interface ButtonType {
  title: string;
  onBackClick?: () => void; // Optional prop for handling back button click
}

const Header: FC<ButtonType> = ({ title }) => {
  const navigate = useNavigate(); // Initialize useNavigate hook
  const role=useSelector(state=>state?.user.role)
 
  const handleBackClick = () => {
    if (role==='STUDENT')
    navigate('/student')
  else{
    navigate('/teacher')
  
  }
  }

  
  return (
    <div>
      <header
        className={`
          flex items-center justify-between bg-white py-[24px] px-[16px] h-[52px]
          fixed top-0 w-full z-100
        `}
      >
        {/* Back Button on the left */}
        <div className="flex items-center ">
            <button onClick={handleBackClick} className="mr-4 ">
              {/* Rotated SVG for a left arrow */}
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
               
              >
                <path d="M9.29289 4.29289C9.68342 3.90237 10.3166 3.90237 10.7071 4.29289L16.7071 10.2929C17.0976 10.6834 17.0976 11.3166 16.7071 11.7071L10.7071 17.7071C10.3166 18.0976 9.68342 18.0976 9.29289 17.7071C8.90237 17.3166 8.90237 16.6834 9.29289 16.2929L14.5858 11L9.29289 5.70711C8.90237 5.31658 8.90237 4.68342 9.29289 4.29289Z" fill="#333333"/> {/* Adjust fill color if needed */}
             </svg>
            </button>
          
        </div>

        {/* Title in the center */}
        <div className="text-[16px] font-extrabold absolute left-1/2 -translate-x-1/2">
          {title}
        </div>

        {/* Right-hand side (can be used for other elements if needed) */}
        <div className="w-[24px]"></div> {/* Placeholder to balance the left button if no other content */}
      </header>

      <div className="h-[52px]"></div>
      <hr className="border-[1.5px] border-borderColor-1 w-full fixed" />
    </div>
  );
};

export default Header;
```

================
FILE: src\components\common\DisableChatButton.tsx
================

```
import React from 'react';

interface ButtonType {
  textButton: string;
}

const DisableChatButton: React.FC<ButtonType> = ({ textButton }) => {
  return (
   
      <div
        className="
          fixed bottom-0 left-0 right-0
        bg-white z-50
       w-full
      "
        
      >
        <hr className="border-[1.5px] border-borderColor-1 w-full" />
        <div className="px-[24px] py-[12px] flex justify-center items-center w-full">
          <div className="disableButton-box rounded-[16px]  mx-[16px] w-full">
            <button className="disableChat-button text-borderColor-1 px-[8px] py-[12px] w-full  cursor-pointer">
              {textButton}
            </button>
          </div>
        </div>
      </div>
    
  );
};

export default DisableChatButton;
```

================
FILE: src\components\common\ChatButton.tsx
================

```
import React from 'react';

interface ButtonType {
  textButton: string;
  onClick?: () => void;
}

const ChatButton: React.FC<ButtonType> = ({ textButton, onClick }) => {
  return (
    <div
      className="
        fixed bottom-0 left-0 right-0
        bg-white z-50
       w-full
      "
    >
      <hr className="border-[1.5px] border-borderColor-1 w-full " />
      <div className=" px-[24px] py-[12px] flex justify-center items-center w-full">
        <div className="chat-button rounded-[16px] w-full  mx-[16px]">
          <button
            className="button-box text-borderColor-1 w-full cursor-pointer px-[8px] py-[12px]"
            onClick={onClick}
          >
            {textButton}
          </button>
        </div>
      </div>
    </div>
  );
};

export default ChatButton;
```

================
FILE: src\components\common\Chat.tsx
================

```
// src/components/common/Chat.tsx
import React, { useState, useEffect, useRef } from "react";
import ReactMarkdown from "react-markdown";
import remarkGfm from "remark-gfm";
import { sendMessage, getSessionDetails } from "../../api-chat";
import { ApiMessage, ChatSession } from "../../types/api";
import Toast from "./Toast";

interface Message {
  id: string;
  sender: "user" | "bot";
  text: string;
  questions?: string[];
}

interface ChatProps {
  startSession: () => Promise<ChatSession>;
  setIsChatting: React.Dispatch<React.SetStateAction<boolean>>;
  tool: 'DARS_YAR' | 'KONJKAV_SHO' | 'TARKIB_KON' | string;
  initialUserActionText?: string;
}

const mapApiMessageToUiMessage = (apiMessage: ApiMessage, tool: string): Message => {
  let text = apiMessage.content;
  let questions: string[] | undefined = undefined;

  // For Konjkav, extract explanation and follow-up questions from the structured response.
  if (
    tool === 'KONJKAV_SHO' &&
    apiMessage.sender_type === 'AI' &&
    apiMessage.raw_ai_response &&
    Array.isArray(apiMessage.raw_ai_response.follow_up_questions)
  ) {
    // Use the 'explanation' field for the main text if it exists, otherwise fall back to 'content'.
    text = apiMessage.raw_ai_response.explanation || apiMessage.content;
    questions = apiMessage.raw_ai_response.follow_up_questions;
  }
  
  return {
    id: apiMessage.id,
    sender: apiMessage.sender_type === 'USER' ? 'user' : 'bot',
    text,
    questions: questions && questions.length > 0 ? questions : undefined,
  };
};

const Chat: React.FC<ChatProps> = ({ startSession, setIsChatting, tool, initialUserActionText }) => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [inputMessage, setInputMessage] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(false);
  const [error, setError] = useState<string | null>(null);
  const [sessionId, setSessionId] = useState<string | null>(null);
  const [inputAreaHeight, setInputAreaHeight] = useState(0);

  const messagesEndRef = useRef<HTMLDivElement>(null);
  const textareaRef = useRef<HTMLTextAreaElement>(null);
  const inputAreaRef = useRef<HTMLDivElement>(null);

  const pollForResponse = (sid: string, originalMessageCount: number) => {
    const timeout = 35000;
    const interval = 1000;
    let pollTimeoutId: ReturnType<typeof setTimeout>;

    const poller = setInterval(async () => {
      try {
        const sessionDetails = await getSessionDetails(sid);
        if (sessionDetails.messages.length > originalMessageCount) {
          const lastMessage = sessionDetails.messages[sessionDetails.messages.length - 1];
          if (lastMessage.sender_type === 'AI') {
            clearInterval(poller);
            clearTimeout(pollTimeoutId);
            // Replace all messages with the definitive list from the server
            // Filter out any temp message (id === 'temp-initial-message')
            // Remove temp message and any duplicate user message with the same text as initialUserActionText
            let serverMsgs = sessionDetails.messages
              .filter(msg => msg.sender_type !== 'SYSTEM')
              .map(msg => mapApiMessageToUiMessage(msg, tool));

            if (initialUserActionText && (tool === 'KONJKAV_SHO' || tool === 'TARKIB_KON')) {
              let foundFirstUserMsg = false;
              serverMsgs = serverMsgs.filter(msg => {
                if (
                  msg.sender === 'user' &&
                  msg.text.trim() === initialUserActionText.trim()
                ) {
                  if (!foundFirstUserMsg) {
                    foundFirstUserMsg = true;
                    return true; // keep the first occurrence
                  }
                  return false; // remove duplicates
                }
                return msg.id !== 'temp-initial-message';
              });
            } else {
              serverMsgs = serverMsgs.filter(msg => msg.id !== 'temp-initial-message');
            }
            setMessages(serverMsgs);
            setIsLoading(false);
          }
        }
      } catch (err) {
        console.error("Polling error:", err);
      }
    }, interval);

    pollTimeoutId = setTimeout(() => {
      clearInterval(poller);
      if (isLoading) {
          setError("Ù¾Ø§Ø³Ø®ÛŒ Ø§Ø² Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.");
          setIsLoading(false);
      }
    }, timeout);
  };

  useEffect(() => {
    const initChat = async () => {
      const isToolWithInitialMessage = (tool === 'KONJKAV_SHO' || tool === 'TARKIB_KON') && initialUserActionText;

      // Show the initial message immediately for konjkav and tarkib
      if (isToolWithInitialMessage) {
        const tempMessage: Message = {
          id: 'temp-initial-message',
          sender: 'user',
          text: initialUserActionText
        };
        setMessages([tempMessage]);
        setIsChatting(true);
        setIsLoading(true);
      }

      try {
        const initialSession = await startSession();
        setSessionId(initialSession.id);
        const filteredMessages = initialSession.messages.filter(msg => msg.sender_type !== 'SYSTEM');
        
        // For konjkav and tarkib, ALWAYS send the initial message automatically
        if ((tool === 'KONJKAV_SHO' || tool === 'TARKIB_KON') && initialUserActionText) {
          try {
            await sendMessage(initialSession.id, initialUserActionText);
            const sessionDetailsBeforePoll = await getSessionDetails(initialSession.id);
            pollForResponse(initialSession.id, sessionDetailsBeforePoll.messages.length);
          } catch (err) {
            setError("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø§ÙˆÙ„ÛŒÙ‡.");
            setIsLoading(false);
          }
        } else if (filteredMessages.length > 0) {
          setMessages(filteredMessages.map(msg => mapApiMessageToUiMessage(msg, tool)));
          setIsChatting(true);
          setIsLoading(false);
        } else {
          setMessages([]);
          setIsLoading(false);
        }
        
        // Start polling for other tools if needed
        if (!filteredMessages.length && tool !== 'DARS_YAR' && tool !== 'KONJKAV_SHO' && tool !== 'TARKIB_KON') {
          pollForResponse(initialSession.id, initialSession.messages.length);
        }
      } catch (err) {
        setError("Ø®Ø·Ø§ Ø¯Ø± Ø´Ø±ÙˆØ¹ Ú¯ÙØªÚ¯Ùˆ. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.");
        console.error('Failed to start chat session:', err);
        setMessages([]);
        setIsLoading(false);
      }
    };

    initChat();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [startSession, setIsChatting, tool, initialUserActionText]);
  
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, isLoading]);

  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = "auto";
      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;
    }
    if (inputAreaRef.current) {
        setInputAreaHeight(inputAreaRef.current.offsetHeight);
    }
  }, [inputMessage]);

  useEffect(() => {
    if (inputAreaRef.current) {
      setInputAreaHeight(inputAreaRef.current.offsetHeight);
    }
  }, []);

  const handleQuestionClick = async (question: string) => {
    if (!sessionId || isLoading) return;

    const tempUserMessage: Message = {
      id: `temp-${Date.now()}`,
      sender: "user",
      text: question,
    };
    setMessages(prev => [...prev, tempUserMessage]);
    setIsLoading(true);
    setIsChatting(true);

    try {
      await sendMessage(sessionId, question);
      const sessionDetailsBeforePoll = await getSessionDetails(sessionId);
      pollForResponse(sessionId, sessionDetailsBeforePoll.messages.length);
    } catch (err) {
      setError("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù….");
      setIsLoading(false);
      setMessages(prev => prev.filter(m => m.id !== tempUserMessage.id));
    }
  };

  const handleSendMessage = async () => {
    if (!sessionId || inputMessage.trim() === "") return;

    const userMessageText = inputMessage.trim();
    const tempUserMessage: Message = {
      id: `temp-${Date.now()}`,
      sender: "user",
      text: userMessageText,
    };
    setMessages(prev => [...prev, tempUserMessage]);
    setInputMessage("");
    setIsLoading(true);
    setIsChatting(true);

    try {
      await sendMessage(sessionId, userMessageText);
      const sessionDetailsBeforePoll = await getSessionDetails(sessionId);
      pollForResponse(sessionId, sessionDetailsBeforePoll.messages.length);
    } catch (err) {
      setError("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù….");
      setIsLoading(false);
      setMessages(prev => prev.filter(m => m.id !== tempUserMessage.id));
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {
    if (e.key === "Enter" && !e.shiftKey && !isLoading) {
      e.preventDefault();
      handleSendMessage();
    }
  };
  
  const showTypingIndicator = isLoading && messages.length > 0 && messages[messages.length - 1].sender === 'user';

  return (
    <div className='flex flex-col flex-grow bg-backGround-1 relative'>
      {error && <Toast message={error} type="error" onClose={() => setError(null)} />}
      
      <div className={`flex-1 overflow-y-auto p-4 ${tool === 'DARS_YAR' ? 'pt-2' : ''}`} style={{ paddingBottom: `${inputAreaHeight}px` }}>
        {messages.map((msg) => (
          <div key={msg.id} className={`w-full flex my-2 ${msg.sender === "user" ? "justify-start" : "justify-end"}`}>
            <div 
              dir="auto" 
              className={`
                prose prose-sm break-words max-w-[85%]
                ${msg.sender === 'user' ? 'prose-invert' : ''}
                p-2 rounded-[16px] 
                ${msg.sender === "user" ? "border-chatButton-1 bg-backGroundCard border-[2px] " : "bg-white   border-borderColor-1 border-[2px]"}
              `}>
              <ReactMarkdown
                  remarkPlugins={[remarkGfm]}
                  components={{
                      a: ({ node, ...props }) => <a {...props} target="_blank" rel="noopener noreferrer" />
                  }}
              >
                  {msg.text}
              </ReactMarkdown>
              
              {/* Render clickable questions for bot messages in konjkav */}
                     {msg.sender === 'bot' && msg.questions && tool === 'KONJKAV_SHO' && (
                <div className="mt-3 space-y-2">
                  {msg.questions.map((question, index) => (
                    <button
                      key={index}
                      onClick={() => handleQuestionClick(question)}
                      disabled={isLoading}
                      className="block w-full text-right p-3 rounded-lg text-sm text-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed infoGradient"
                    >
                      {index + 1}. {question}
                    </button>
                  ))}
                </div>
              )}
            </div>
          </div>
        ))}

        {showTypingIndicator && (
          <div className="w-full flex my-2 justify-start">
            <div className="p-3 rounded-2xl bg-white border border-borderColor-1">
              <div className="flex items-center space-x-2">
                <div className="w-2 h-2 bg-gray-600 rounded-full animate-bounce" style={{ animationDelay: "0s" }}></div>
                <div className="w-2 h-2 bg-gray-600 rounded-full animate-bounce" style={{ animationDelay: "0.2s" }}></div>
                <div className="w-2 h-2 bg-gray-600 rounded-full animate-bounce" style={{ animationDelay: "0.4s" }}></div>
              </div>
            </div>
          </div>
        )}
        <div ref={messagesEndRef} />
      </div>

      <div ref={inputAreaRef} className="fixed bottom-0 left-0 right-0 bg-white p-4 w-full border-t border-borderColor-1 z-20">
        <div className="bg-gradient-to-r from-[#6248FF] via-[#FE4C4A] to-[#FFB800] p-[2px] rounded-[26px]">
          <div className="relative flex items-center">
          <textarea ref={textareaRef} rows={1} className="w-full py-3 pl-4 pr-14 rounded-[24px] focus:outline-none bg-white resize-none overflow-y-auto max-h-40" placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... " value={inputMessage} onChange={(e) => setInputMessage(e.target.value)} onKeyPress={handleKeyPress} disabled={ !sessionId} />
          <button onClick={handleSendMessage} disabled={isLoading || inputMessage.trim() === "" || !sessionId} className="absolute right-2 top-1/2 -translate-y-1/2 flex items-center justify-center bg-custom-purple text-white w-10 h-10 rounded-[24px] shadow-lg transition duration-200 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed rotate-90">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" transform="rotate(180)">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
            </svg>
          </button>
        </div>
        </div>
      </div>
    </div>
  );
};

export default Chat;
```

================
FILE: src\student\components\home\ToolCard.tsx
================

```
import { FC } from "react";
import { useNavigate } from "react-router-dom";
import icon from './../../../assets/images/darsyar.webp';
 
interface ToolCardProps {
  
  title: string;
  description: string;
  tool: "DARS_YAR" | "KONJKAV" | "SOALYAR" | "AZMOON_SAZ" | "TARKIB_KON";
  hasRecentChats?: boolean;
  image:string
}

const getToolRoute = (tool: string, hasRecentChats: boolean) => {
  switch (tool) {
    case "DARS_YAR":
      return hasRecentChats ? "/student/darsyar/recent-chat" : "/student/darsyar/study-assistant";
    case "KONJKAV":
      return hasRecentChats ? "/student/konjkav/recent-chat" : "/student/konjkav/welcome";
    case "TARKIB_KON":
      return hasRecentChats ? "/student/tarkibkon/recent-chat" : "/student/tarkibkon/welcome";
    case "SOALYAR":
      return hasRecentChats ? "/student/soalyar/recent-chat" : "/student/soalyar/welcome";
    case "AZMOON_SAZ":
      return "#";
    default:
      return "/student";
  }
};

const ToolCard: FC<ToolCardProps> = ({  title, description, tool, hasRecentChats = false,image }) => {
  const navigate = useNavigate();

  const handleClick = () => {
    const route = getToolRoute(tool, hasRecentChats);
    navigate(route);
  };

  return (
  <div onClick={handleClick} className="w-full" >
   
   <div className="card-box cursor-pointer hover:transform hover:translate-y-1 h-full">
     <div className="flex flex-col items-center text-center rounded-[24px] bg-white relative p-[16px] w-full">
      <img src={image} className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 h-[56px] w-[56px]" alt={title} />
      <h3 className="font-extrabold text-[18px] mt-[28px] mb-[4px]">{title}</h3>
      <p className="text-[10px]">{description}</p>
    </div>
   </div>
  </div>
  );
};

export default ToolCard;

```

================
FILE: src\student\components\home\RecentItem.tsx
================

```
import { FC } from "react";

interface RecentItemProps {
  icon: React.ReactNode;
  title: string;
  date: string;
}

const RecentItem: FC<RecentItemProps> = ({ icon, title, date }) => {
  return (
    <div className="flex items-center justify-between bg-white p-3 rounded-lg shadow">
      <div className="flex items-center gap-2">
        <div className="text-2xl">{icon}</div>
        <div className="flex flex-col">
          <span className="text-sm font-medium truncate">{title}</span>
          <span className="text-xs text-gray-500">{date}</span>
        </div>
      </div>
    </div>
  );
};

export default RecentItem;

```

================
FILE: src\student\components\home\HeroSection.tsx
================

```
import { FC } from "react";
import book from './../../../assets/images/book.png'
import hero from './../../../assets/images/heroSection.png'

const HeroSection: FC = () => {
  return (
   <div  className="bg-gradient-to-l from-custom-purple via-custom-orange-1 to-custom-orange-2 p-[2px] rounded-[18px] flex items-center justify-between h-25 ">
        <div className="flex h-full w-full bg-gradient-to-l from-purple-100 to-orange-100 rounded-[16px] ">
            <div className="flex flex-3/4 justify-center items-center flex-col">
       <div className="flex justify-center">
         <img src={book}/>
          <h2 className="font-bold text-lg text-center">Ø¯Ø±Ø³â€ŒÛŒØ§Ø±</h2>
       </div>
          <p className="text-sm text-gray-700">Ø¨Ù‡Øª Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ Ø¯Ø±Ø³Ø§ Ø±Ùˆ Ø¨Ù‡ØªØ± Ø¨ÙÙ‡Ù…ÛŒ!</p>
        </div>
        <div className="text-4xl flex flex-1/4 justify-end ml-4">
        <img  src={hero}/>
        </div>
        </div>
        
      </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\home\Header.tsx
================

```
import { FC, useState, useEffect } from "react";
import { logout } from "../../../api"; // Import the logout function
import happyFace from './../../../assets/images/happyface.webp';

const Header: FC = () => {
 

  const handleLogout = () => {
    logout(); 
  };



  return (
    <div>
      <header
        className={`
          flex items-center justify-between bg-white py-[24px] px-[16px] h-[52px]
          fixed top-0 w-full z-100
          
        `}
      >
        {/* Logout Icon Button on the left */}
        <button onClick={handleLogout} className="text-gray-600 hover:text-red-500 transition-colors">
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            className="h-6 w-6" 
            fill="none" 
            viewBox="0 0 24 24" 
            stroke="currentColor" 
            strokeWidth={2}
          >
            <path 
              strokeLinecap="round" 
              strokeLinejoin="round" 
              d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" 
            />
          </svg>
        </button>
        
        <div className="flex items-center">
            <img src={happyFace} className="h-[24px] w-[24px] ml-[8px]"/>
            <div className="text-[16px] font-extrabold">Ú©ÛŒÙ€Ù€Ù€Ù€Ø¯Ùˆ </div>
        </div>
        
        {/* Placeholder to balance the layout */}
        <div className="w-6"></div>
      </header>
      
      
      <hr className="border-[1.5px] border-borderColor-1 w-full fixed" />
    </div>
  );
};

export default Header;
```

================
FILE: src\student\pages\konjKav\KonjkavWelcome.tsx
================

```
import { FC } from "react";
import Header from "../../../components/common/Header";

import ChatButton from "../../../components/common/ChatButton";
import HeroSection from "../../../student/components/konjKav/welcome/HeroSection";
import CardSection from "../../../student/components/konjKav/welcome/CardSection";
import { useNavigate } from "react-router-dom";



const KonjkavWelcome:FC = () => {
    const navigate=useNavigate()
    const handleNavigate=()=>{
        navigate('/student/konjkav/study-selection')
    }

    return (
      <div className="h-screen flex flex-col">
        <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ'} />
        <div className="bg-backGround-1 flex-1  flex flex-col">
          <div className="mx-4  flex-1   pb-[80px]">
            <HeroSection />
            <CardSection />
          </div>
          <div >
            <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNavigate} />
          </div>
        </div>
      </div>
    );
};

export default KonjkavWelcome;
```

================
FILE: src\student\pages\konjKav\KonjkavTopicSelection.tsx
================

```
import { useDispatch, useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { useEffect } from "react";
import Header from "../../../components/common/Header";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import HeroSection from "../../components/konjKav/topicSelection/HeroSection";
import MainContent from "../../components/konjKav/topicSelection/MainContent";
import TopicSearchBox from "../../components/konjKav/topicSelection/TopicSearchBox";
import { setSelectedTopic, activeButtonReducer, disableButtonReducer } from "../../../slice/konjkavSlice";
import { RootState } from "../../../store";

const KonjkavTopicSelection = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  
  const { selectedStudy, selectedTopic, studySelectionButton: isButtonActive } = useSelector((state: RootState) => state.konjkav);

  // Redirect if no study is selected
  useEffect(() => {
    if (!selectedStudy) {
      navigate('/student/konjkav/study-selection');
    }
  }, [selectedStudy, navigate]);

  // Activate button if there is any topic (from card or textarea)
  useEffect(() => {
    if (selectedTopic && selectedTopic.trim() !== "") {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [selectedTopic, dispatch]);

  const handleStartChat = () => {
    if (selectedTopic && selectedTopic.trim() !== "") {
      navigate('/student/konjkav/chat');
    }
  };

  const handleTopicChange = (topic: string | null) => {
    dispatch(setSelectedTopic(topic || ""));
  };

  return (
    <div className="h-screen">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ'}/>
      <div className='font-yekanBakh bg-backGround-1 '>
        <HeroSection />
        <div className="bg-white rounded-[24px] rounded-b-none pb-50 border-[2px] border-borderColor-1">
          <TopicSearchBox 
            searchQuery={selectedTopic} 
            setSearchQuery={handleTopicChange}
          />
          <h1 className="mb-[16px] mt-[12px] mx-[16px] text-[16px] font-extrabold">Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</h1>
          <MainContent 
            onTopicSelect={handleTopicChange} 
            selectedTopicFromParent={selectedTopic}
          />
        </div>
      </div>
      {isButtonActive ? (
        <ChatButton textButton='Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…  ' onClick={handleStartChat} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…  '/>
      )}
    </div>
  );
};

export default KonjkavTopicSelection;
```

================
FILE: src\student\pages\konjKav\KonjkavTopicBot.tsx
================

```
import { useState, useEffect, useCallback } from "react";
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import Header from "../../../components/common/Header";
import Chat from "../../../components/common/Chat";
import { startKonjkavSession } from "../../../api-chat";
import { ChatSession } from "../../../types/api";

interface Study {
    id: string;
    name: string;
}

interface RootState {
  konjkav: {
    selectedStudy: Study | null;
    selectedTopic: string;
  };
}

const KonjkavTopicBot = () => {
  const navigate = useNavigate();
  const [isChatting, setIsChatting] = useState(false);
  const { selectedStudy, selectedTopic } = useSelector((state: RootState) => state.konjkav);

  useEffect(() => {
    if (!selectedStudy || !selectedTopic) {
      navigate('/student/konjkav/study-selection');
    }
  }, [selectedStudy, selectedTopic, navigate]);
  
  const startSessionCallback = useCallback((): Promise<ChatSession> => {
    if (!selectedStudy || !selectedTopic) {
      return Promise.reject("Selections are not valid.");
    }
    return startKonjkavSession(selectedStudy.id, selectedTopic);
  }, [selectedStudy, selectedTopic]);

  if (!selectedStudy || !selectedTopic) {
    return null;
  }

  return (
    <div className="bg-backGround-1 h-screen flex flex-col">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ'} />
      <div className="flex-grow flex flex-col">
          <Chat 
            startSession={startSessionCallback}
            setIsChatting={setIsChatting} 
            tool="KONJKAV_SHO"
            initialUserActionText={selectedTopic}
          />
      </div>
    </div>
  );
};

export default KonjkavTopicBot;
```

================
FILE: src\student\pages\konjKav\KonjkavStudySelection.tsx
================

```
import { useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import Header from '../../../components/common/Header';
import HeroSection from '../../components/konjKav/studySelection/HeroSection';
import MainContent from '../../components/konjKav/studySelection/MainContent';
import ChatButton from '../../../components/common/ChatButton';
import DisableChatButton from '../../../components/common/DisableChatButton';
import { RootState } from '../../../store';

const KonjkavStudySelection = () => {
  const navigate = useNavigate();
  const infoButton = useSelector((state: RootState) => state.konjkav.studySelectionButton);

  const handleNext = () => {
    navigate('/student/konjkav/topic-selection');
  };

  return (
    <div className="h-screen">
      <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ'} />
      <div className='font-yekanBakh bg-backGround-1 pb-18'>
        <HeroSection />
        <MainContent />
      </div>
      {infoButton ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default KonjkavStudySelection;
```

================
FILE: src\student\pages\konjKav\KonjkavRecentChat.tsx
================

```
import ChatButton from "../../../components/common/ChatButton"
import Header from "../../../components/common/Header"
import RecentChats from "../../../components/RecentChats"
import { useNavigate } from "react-router-dom"

const KonjkavRecentChat = () => {
  const navigate = useNavigate();

  const handleNewChat = () => {
    navigate('/student/konjkav/welcome');
  };

  return (
    <>
      <div className='bg-backGround-1 min-h-screen'>
        <Header title={'Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ'}/>
        <div className='gap-[16px] m-[16px]'> 
          <h1 className=' font-extrabold text-[14px] mb-4'>Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h1>
        </div>
        <div className=' flex flex-col gap-[12px] mx-[16px] pb-20'>
          <RecentChats/>
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat}/>
    </>
  )
}

export default KonjkavRecentChat
```

================
FILE: src\student\pages\tarkibKon\TarkibkonWelcome.tsx
================

```
import { FC } from "react";
import Header from "../../../components/common/Header";

import ChatButton from "../../../components/common/ChatButton";
import HeroSection from "../../../student/components/tarkibKon/welcome/HeroSection";
import CardSection from "../../../student/components/tarkibKon/welcome/CardSection";
import { useNavigate } from "react-router-dom";
;



const TarkibkonWelcome:FC = () => {
    const navigate=useNavigate()
    const handleNewChat=()=>{
        navigate('/student/tarkibkon/study-selection')
    }
    return (
      <div className="h-screen flex flex-col">
        <Header title={'ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†'} />
        <div className="bg-backGround-1 flex-1 overflow-hidden flex flex-col">
          <div className="mx-4 md:mx-[32px] flex-1 min-h-0 overflow-y-auto pb-[80px]">
            <HeroSection />
            <CardSection />
          </div>
          <div className="fixed left-0 right-0 bottom-0 z-10 px-4 pb-4 md:static md:px-0 md:pb-0 bg-backGround-1 md:bg-transparent">
            <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat} />
          </div>
        </div>
      </div>
    );
};

export default TarkibkonWelcome;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonStudySelection.tsx
================

```
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { RootState } from "../../../store";
import Header from "../../../components/common/Header";
import DisableChatButton from "../../../components/common/DisableChatButton";
import ChatButton from "../../../components/common/ChatButton";
import HeroSection from "../../components/tarkibKon/studySelection/HeroSection";
import MainContent from "../../components/tarkibKon/studySelection/MainContent";

const TarkibkonStudySelection = () => {
  const navigate = useNavigate();
  const infoButton = useSelector((state: RootState) => state.tarkibkon.studySelectionButton);

  const handleNext = () => {
    navigate('/student/tarkibkon/learn-topic-selection');
  };

  return (
    <div className="h-screen">
      <Header title={'ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†'} />
      <div className='font-yekanBakh bg-backGround-1 pb-18'>
        <HeroSection />
        <MainContent />
      </div>
      {infoButton ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default TarkibkonStudySelection;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonRecentChat.tsx
================

```
import Header from '../../../components/common/Header'
import ChatButton from '../../../components/common/ChatButton'
import RecentChats from '../../../components/RecentChats'
import { useNavigate } from 'react-router-dom'

const TarkibkonRecentChat = () => {
  const navigate = useNavigate();

  const handleNewChat = () => {
    navigate('/student/tarkibkon/welcome');
  };

  return (
    <>
      <div className='bg-backGround-1 min-h-screen'>
        <Header title={'ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†'}/>
        <div className='gap-[16px] m-[16px]'> 
          <h1 className=' font-extrabold text-[14px] mb-4'>Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h1>
        </div>
        <div className=' flex flex-col gap-[12px] mx-[16px] pb-20'>
          <RecentChats/>
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat} />
    </>
  )
}

export default TarkibkonRecentChat
```

================
FILE: src\student\pages\tarkibKon\TarkibkonLearnTopic.tsx
================

```
import { useDispatch, useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { useEffect } from "react";
import { RootState } from "../../../store";
import { activeButtonReducer, disableButtonReducer, setLearnTopic } from "../../../slice/tarkibkonSlice";
import Header from "../../../components/common/Header";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import MainContent from "../../components/tarkibKon/learnTopic/MainContent";
import TopicSearchBox from "../../components/tarkibKon/learnTopic/TopicSearchBox";
import HeroSection from "../../components/tarkibKon/learnTopic/HeroSection";

const TarkibkonLearnTopic = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();

  const { selectedStudy, learnTopic, studySelectionButton: isButtonActive } = useSelector((state: RootState) => state.tarkibkon);

  useEffect(() => {
    if (!selectedStudy) {
      navigate('/student/tarkibkon/study-selection');
    }
  }, [selectedStudy, navigate]);

  useEffect(() => {
    if (learnTopic && learnTopic.trim() !== "") {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [learnTopic, dispatch]);

  const handleNext = () => {
    if (learnTopic && learnTopic.trim() !== "") {
      navigate('/student/tarkibkon/favorite-topic-selection');
    }
  };

  const handleTopicChange = (topic: string | null) => {
    dispatch(setLearnTopic(topic || ""));
  };

  return (
    <div className="h-screen">
      <Header title={'ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†'}/>
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        <HeroSection />
        <div className="bg-white rounded-[24px] rounded-b-none pb-50 border-[2px] border-borderColor-1">
          <TopicSearchBox 
            searchQuery={learnTopic} 
            setSearchQuery={handleTopicChange}
          />
          <h1 className="mb-[16px] mt-[12px] mx-[16px] text-[16px] font-extrabold">Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</h1>
          <MainContent 
            onTopicSelect={handleTopicChange} 
            selectedTopicFromParent={learnTopic}
          />
        </div>
      </div>
      {isButtonActive ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default TarkibkonLearnTopic;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonFavoriteTopic.tsx
================

```
import { useDispatch, useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { useEffect } from "react";
import { RootState } from "../../../store";
import { activeButtonReducer, disableButtonReducer, setFavoriteTopic } from "../../../slice/tarkibkonSlice";
import Header from "../../../components/common/Header";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import MainContent from "../../components/tarkibKon/favoriteTopic/MainContent";
import TopicSearchBox from "../../components/tarkibKon/favoriteTopic/TopicSearchBox";
import HeroSection from "../../components/tarkibKon/favoriteTopic/HeroSection";

const TarkibkonFavoriteTopic = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();

  const { learnTopic, favoriteTopic, studySelectionButton: isButtonActive } = useSelector((state: RootState) => state.tarkibkon);

  useEffect(() => {
    if (!learnTopic) { // Should have a learnTopic to be here
      navigate('/student/tarkibkon/learn-topic-selection');
    }
  }, [learnTopic, navigate]);

  useEffect(() => {
    if (favoriteTopic && favoriteTopic.trim() !== "") {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [favoriteTopic, dispatch]);

  const handleStartChat = () => {
    if (favoriteTopic && favoriteTopic.trim() !== "") {
      navigate('/student/tarkibkon/chat');
    }
  };

  const handleTopicChange = (topic: string | null) => {
    dispatch(setFavoriteTopic(topic || ""));
  };

  return (
    <div className="h-screen">
      <Header title={'ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†'}/>
      <div className='font-yekanBakh bg-backGround-1 pb-20'>
        <HeroSection />
        <div className="bg-white rounded-[24px] rounded-b-none pb-50 border-[2px] border-borderColor-1">
          <TopicSearchBox 
            searchQuery={favoriteTopic} 
            setSearchQuery={handleTopicChange}
          />
          <h1 className="mb-[16px] mt-[12px] mx-[16px] text-[16px] font-extrabold">Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</h1>
          <MainContent 
            onTopicSelect={handleTopicChange} 
            selectedTopicFromParent={favoriteTopic}
          />
        </div>
      </div>
      {isButtonActive ? (
        <ChatButton textButton='Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…  ' onClick={handleStartChat} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…  ' />
      )}
    </div>
  );
};

export default TarkibkonFavoriteTopic;
```

================
FILE: src\student\pages\tarkibKon\TarkibkonChatBot.tsx
================

```
import { useState, useEffect, useCallback } from "react";
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import Header from "../../../components/common/Header";
import Chat from "../../../components/common/Chat";
import { startTarkibkonSession } from "../../../api-chat";
import { ChatSession } from "../../../types/api";

interface Study {
    id: string;
    name: string;
}

interface RootState {
  tarkibkon: {
    selectedStudy: Study | null;
    learnTopic: string;
    favoriteTopic: string;
  };
}

const TarkibkonChatBot = () => {
  const navigate = useNavigate();
  const [isChatting, setIsChatting] = useState(false);
  const { selectedStudy, learnTopic, favoriteTopic } = useSelector((state: RootState) => state.tarkibkon);

  useEffect(() => {
    if (!selectedStudy || !learnTopic || !favoriteTopic) {
      navigate('/student/tarkibkon/study-selection');
    }
  }, [selectedStudy, learnTopic, favoriteTopic, navigate]);
  
  const startSessionCallback = useCallback((): Promise<ChatSession> => {
    if (!selectedStudy || !learnTopic || !favoriteTopic) {
      return Promise.reject("Selections are not valid.");
    }
    return startTarkibkonSession(selectedStudy.id, learnTopic, favoriteTopic);
  }, [selectedStudy, learnTopic, favoriteTopic]);

  if (!selectedStudy || !learnTopic || !favoriteTopic) {
    return null;
  }

  const initialMessage = `...Ø¯Ø± Ø­Ø§Ù„ ØªØ±Ú©ÛŒØ¨ Ú©Ø±Ø¯Ù† ${learnTopic} Ø¨Ø§ ${favoriteTopic}`;

  return (
    <div className="bg-backGround-1 h-screen flex flex-col">
      <Header title={'ØªØ±Ú©Ù€Ù€Ù€Ù€Ù€Ù€ÛŒØ¨â€ŒÚ©Ù†'} />
      <div className="flex-grow flex flex-col">
          <Chat 
            startSession={startSessionCallback}
            setIsChatting={setIsChatting}
            tool="TARKIB_KON"
            initialUserActionText={initialMessage}
          />
      </div>
    </div>
  );
};

export default TarkibkonChatBot;
```

================
FILE: src\student\pages\darsYar\DarsyarStudySelection.tsx
================

```
import { useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import Header from '../../../components/common/Header';
import HeroSection from '../../components/darsYar/studySelection/HeroSection';
import MainContent from '../../components/darsYar/studySelection/MainContent';
import ChatButton from '../../../components/common/ChatButton';
import DisableChatButton from '../../../components/common/DisableChatButton';


const DarsyarStudySelection = () => {
  const navigate = useNavigate();
  const infoButton: boolean = useSelector((state: any) => state?.darsyar?.studySelectionButton);
   
  const handleNext = () => {
    navigate('/student/darsyar/lesson-selection');
  };

  return (
    <div className="h-screen">
      <Header title={'Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±'} />
      <div className='font-yekanBakh bg-backGround-1 pb-18'> {/* Increased pb to avoid overlap with draggable MainContent */}
        <HeroSection />
         <MainContent />
      </div>
      {infoButton ? (
        <ChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' onClick={handleNext} />
      ) : (
        <DisableChatButton textButton='Ø¨Ø¹Ø¯ÛŒ' />
      )}
    </div>
  );
};

export default DarsyarStudySelection;
```

================
FILE: src\student\pages\darsYar\DarsyarStudyAssistant.tsx
================

```
import { FC } from "react";
import { useNavigate } from "react-router-dom";
import Header from "../../../components/common/Header";
import HeroSection from "../../components/darsYar/studyAssistant/HeroSection";
import CardSection from "../../components/darsYar/studyAssistant/CardSection";
import ChatButton from "../../../components/common/ChatButton";

const DarsyarWelcome: FC = () => {
  const navigate = useNavigate();
  

  const handleNewChat = () => {
    navigate("/student/darsyar/study-selection");
  };

  return (
    <div className="h-screen flex flex-col">
      <Header title={'Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±'} />
      <div className="bg-backGround-1 flex-1 ">
        <div className="mx-[32px] h-full  pb-[80px]">
          <HeroSection />
          <CardSection />
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat} />
    </div>
  );
};

export default DarsyarWelcome;
```

================
FILE: src\student\pages\darsYar\DarsyarRecentChat.tsx
================

```
import ChatButton from "../../../components/common/ChatButton"
import Header from "../../../components/common/Header"
import RecentChats from "../../../components/RecentChats"
import { useNavigate } from "react-router-dom"

const DarsyarRecentChat = () => {
  const navigate = useNavigate();

  const handleNewChat = () => {
    navigate("/student/darsyar/study-selection");
  };

  return (
    <>
      <div className='bg-backGround-1 min-h-screen'>
        <Header title={'Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±'}/>
        <div className='gap-[16px] m-[16px]'> 
          <h1 className=' font-extrabold text-[14px] mb-4'>Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h1>
        </div>
        <div className='flex flex-col gap-[12px] mx-[16px] pb-20'>
         <RecentChats/>
        </div>
      </div>
      <ChatButton textButton='Ø³Ø§Ø®Øª Ú†Øª Ø¬Ø¯ÛŒØ¯' onClick={handleNewChat}/>
    </>
  )
}

export default DarsyarRecentChat
```

================
FILE: src\student\pages\darsYar\DarsyarLessonSelection.tsx
================

```
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import { useState, useEffect } from "react";
import ChatButton from "../../../components/common/ChatButton";
import DisableChatButton from "../../../components/common/DisableChatButton";
import Header from "../../../components/common/Header";
import MainContent from "../../components/darsYar/lessonSelection/MainContent";
import HeroSection from "../../components/darsYar/lessonSelection/HeroSection";

interface RootState {
  darsyar: {
    studySelectionButton: boolean;
    selectedStudy: string | null;
    selectedLessons: string[];
    hasSelectedLessons: boolean;
  };
}

const DarsyarLessonSelection = () => {
  const navigate = useNavigate();
  const [shouldNavigate, setShouldNavigate] = useState(false);
  const selectedStudy = useSelector((state: RootState) => state.darsyar.selectedStudy);
  const selectedLessons = useSelector((state: RootState) => state.darsyar.selectedLessons);

    useEffect(() => {
    // Navigate to login page if selections are missing
    if (!selectedStudy ) {
      navigate('/'); 
    }
  }, [selectedStudy, navigate]);
  useEffect(() => {
    if (shouldNavigate && selectedStudy && selectedLessons.length > 0) {
      navigate('/student/darsyar/chat');
    }
  }, [shouldNavigate, selectedStudy, selectedLessons, navigate]);

  const handleStartChat = () => {
    setShouldNavigate(true);
  };

  // Check both conditions for button activation
  const isButtonActive = selectedStudy !== null && selectedLessons.length > 0;

  return (
    <div>
      <div>
        <Header title={'Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±'} />
        <div className='bg-backGround-1'>
          <HeroSection />
          <MainContent />
        </div>
        {isButtonActive ? (
          <ChatButton textButton='Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…  ' onClick={handleStartChat} />
        ) : (
          <DisableChatButton textButton='Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…  ' />
        )}
      </div>
    </div>
  );
};

export default DarsyarLessonSelection;

```

================
FILE: src\student\pages\darsYar\DarsyarChatWithBot.tsx
================

```
// src/student/pages/darsYar/DarsyarChatWithBot.tsx
import { useState, useEffect, useCallback } from "react";
import { useSelector } from "react-redux";
import { useNavigate } from "react-router-dom";
import LessonInformation from "../../components/darsYar/chatWithBot/LessonInformation";
import Header from "../../../components/common/Header";
import Chat from "../../../components/common/Chat";
import { startDarsYarSession } from "../../../api-chat";
import { ChatSession } from "../../../types/api";
import HeroSection from "../../components/darsYar/chatWithBot/HeroSection";

interface Study {
  id: string;
  name: string;
}

interface RootState {
  darsyar: {
    selectedStudy: Study | null;
    selectedLessons: { id: string; title: string; }[];
  };
}

const DarsyarChatWithBot = () => {
  const navigate = useNavigate();
  const [isChatting, setIsChatting] = useState(false);
  const [showLessonInfo, setShowLessonInfo] = useState(true);
  const selectedStudy = useSelector((state: RootState) => state.darsyar.selectedStudy);
  const selectedLessons = useSelector((state: RootState) => state.darsyar.selectedLessons);
  console.log(selectedLessons)
  useEffect(() => {
    // Navigate to login page if selections are missing
    if (!selectedStudy || selectedLessons.length === 0) {
      navigate('/'); 
    }
  }, [selectedStudy, selectedLessons, navigate]);
  
  const startSessionCallback = useCallback((): Promise<ChatSession> => {
    if (!selectedStudy || selectedLessons.length === 0) {
      return Promise.reject("Selections are not valid.");
    }
    return startDarsYarSession(
      selectedStudy.id,
      selectedLessons.map(lesson => lesson.id)
    );
  }, [selectedStudy, selectedLessons]);

  // Render nothing while redirecting
  if (!selectedStudy || selectedLessons.length === 0) {
    return null;
  }

  return (
    <div className="bg-backGround-1 h-screen flex flex-col">
      <Header title={'Ø¯Ø±Ø³â€ŒÛŒÙ€Ù€Ù€Ù€Ù€Ø§Ø±'} />

      
      {showLessonInfo && (
        <LessonInformation 
          study={selectedStudy.name}
          lesson={selectedLessons.map(l => l.title).join('ØŒ ')}
        />
      )}
      {(!isChatting) && <HeroSection />}
      <main className={`flex-grow flex flex-col transition-all duration-300 ${showLessonInfo ? 'pt-[60px]' : ''}`}>
          <Chat 
            startSession={startSessionCallback}
            setIsChatting={setIsChatting}
            tool="DARS_YAR"
            initialUserActionText={selectedLessons.map(l => l.title).join('ØŒ ')}
          />
      </main>
    </div>
  );
};

export default DarsyarChatWithBot;
```

================
FILE: src\teacher\components\home\ToolCard.tsx
================

```

import { FC } from "react";
import { useNavigate } from "react-router-dom";

 
interface ToolCardProps {
  
  title: string;
  description: string;
  tool: "DARS_YAR" | "KONJKAV" | "SOALYAR" | "AZMOON_SAZ" | "TARKIB_KON";
  hasRecentChats?: boolean;
  image:string
}

const getToolRoute = (tool: string, hasRecentChats: boolean) => {
  switch (tool) {
    case "DARS_YAR":
      return hasRecentChats ? "/student/darsyar/recent-chat" : "/student/darsyar/study-assistant";
    case "KONJKAV":
      return hasRecentChats ? "/student/konjkav/recent-chat" : "/student/konjkav/welcome";
    case "TARKIB_KON":
      return hasRecentChats ? "/student/tarkibkon/recent-chat" : "/student/tarkibkon/welcome";
    case "SOALYAR":
      return hasRecentChats ? "/student/soalyar/recent-chat" : "/student/soalyar/welcome";
    case "AZMOON_SAZ":
      return "#";
    default:
      return "/student";
  }
};

const ToolCard: FC<ToolCardProps> = ({  title, description, tool, hasRecentChats = false,image }) => {
  const navigate = useNavigate();

  const handleClick = () => {
    const route = getToolRoute(tool, hasRecentChats);
    navigate(route);
  };

  return (
  <div onClick={handleClick} className="w-full">
   
   <div className="card-box cursor-pointer hover:transform hover:translate-y-1 h-full">
     <div className="flex flex-col items-center text-center justify-between rounded-[24px] bg-white p-[16px] h-[160px] w-full">
      <img src={image} className="h-[56px] w-[56px] flex-shrink-0"/>
      <div className="flex flex-col justify-center flex-grow">
        <h3 className="font-extrabold text-[18px]">{title}</h3>
        <p className="text-[10px] leading-relaxed">{description}</p>
      </div>
    </div>
   </div>
  </div>
  );
};

export default ToolCard;

```

================
FILE: src\teacher\components\home\RecentChat.tsx
================

```
import React from 'react'
import darsyar from './../../../assets/images/darsyar.webp'

const RecentChatCard = () => {
  return (
    <div>
         <div className='card-box mb-[12px]'>
            <div className='flex justify-start items-center bg-white rounded-[24px] p-[16px] gap-[16px] pl-[24px]'>
                <div>
                    <img className='w-[56px] h-[56px] ' src={darsyar}/>
                </div>
                <div className='flex flex-col gap-[4px] '>
                    <h1 className='font-extrabold line-clamp-1 w-[215px] text-[14px]'>ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÙØªÙˆØ³Ù†ØªØ² Ùˆ Ø¨Ù‚ÛŒÙ‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù‡Ù… Ùˆ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h1>
                    <div className='flex justify-start items-start gap-[4px]'>
                        <p className=' bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'>Ø¯â€ŒØ±Ø³â€ŒÛŒØ§Ø±</p>
                    <p className='bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]'> ÙØ§Ø±Ø³ÛŒ</p>
                    <p className='bg-backGround-1 gap-[8px] px-[8px] rounded-[16px] text-[10px] py-[2px]' >19 Ø®Ø±Ø¯Ø§Ø¯</p>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
  )
}

export default RecentChatCard

```

================
FILE: src\teacher\components\home\ProgressQuestion.tsx
================

```
import React from 'react'
interface ProgressBarProps {
  progress: number; // The current progress percentage (0-100)
}

const ProgressQuestion:React.FC<ProgressBarProps> = ({ progress }) => {
     const clampedProgress = Math.max(0, Math.min(100, progress));
  return (
        <div className='mb-[12px]'>
         <div className='card-box'>
            <div className='flex flex-col items-center bg-white rounded-[24px] p-[16px] gap-[16px] pl-[24px]'>
             <div className='flex justify-between items-center'>
                <div>
                    <h1 className='text-[12px]'>
                        Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡
                </h1>
                </div>
                <div className='mr-10 '>
                    <h1 className='bg-[#F2EFFF] rounded-[24px] text-backGroundButton py-[2px] px-[8px]'>
 50 Ø§Ø² 100
                </h1>
                </div>
             </div>
                <div className="w-full  rounded-full h-4 bg-backGround-1 overflow-hidden ">
      <div
        className="bg-gradient-to-l from-custom-purple via-custom-orange-1 to-custom-orange-2 h-4 rounded-full transition-all duration-500 ease-out"
        style={{ width: `${clampedProgress}%` }}
        role="progressbar"
        aria-valuenow={clampedProgress}
        aria-valuemin={0}
        aria-valuemax={100}
      ></div>
    </div>
            </div>
        </div>
    </div>
    
  )
}

export default ProgressQuestion

```

================
FILE: src\teacher\components\home\Classes.tsx
================

```
import React from 'react';
import classImage from './../../../assets/images/class.webp'
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface Class {
    id: string;
    name: string;
}

interface Student {
  id: string;
  full_name: string;
  last_activity_at: string;
  activity_status: 'Active' | 'Inactive';
  current_mood: {
    emoji: string;
    text: string;
  } | null; // Allow current_mood to be null
}

const Classes: React.FC = () => {
  // Use a type assertion or provide a generic type to useQuery for better type inference
  const { data: classes, isLoading: isLoadingClasses } = useQuery<Class[]>({
        queryKey: ['teacherClasses'],
        queryFn: async () => {
            console.log("API CALL: fetching classes for teacher");
            const res = await axios.get('https://kiddo2.pythonanywhere.com/api/v1/academics/classes/');
            console.log("API RESPONSE: fetching classes success", res.data);
            return res.data;
        },
        staleTime: 300000, // Cache for 5 minutes
    });

    const classId = classes?.[0]?.id;

    const { data: students, isLoading: isLoadingStudents, isError, error } = useQuery<Student[]>({
        queryKey: ['students', classId],
        queryFn: async () => {
            console.log(`API CALL: fetching students for class ${classId}`);
            const res = await axios.get(`https://kiddo2.pythonanywhere.com/api/v1/academics/classes/${classId}/students/`);
            console.log(`API RESPONSE: fetching students for class ${classId} success`, res.data);
            return res.data;
        },
        enabled: !!classId,
    });
 
  // Log data when not loading, for debugging (can be removed in production)
  // Check if data exists before logging its structure, as it's undefined initially
  if (!isLoadingClasses && classes) {
    console.log("Fetched Data:", classes);
  }
  console.log(students)

  // 2. Handle different states: Loading, Error, and Success

  // Loading state
  if (isLoadingClasses) {
    return <div className="p-4 text-center text-gray-600">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§...</div>; // "Loading classes..."
  }

  // Error state
  if (isError) {
    console.error("Error fetching classes:", error); // Log the error for debugging
    return <div className="p-4 text-center text-red-500">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§: {error?.message || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</div>; // "Error loading classes: ..."
  }

  // Success state: Data is available
  return (
    <>
      <div className="bg-backGround-1 "> {/* A general container for the whole section */}
        {/* Check if data is an array and not empty before mapping */}
        {classes && classes.length > 0 && students ? (
          <div className=""> {/* Added space-y for consistent vertical spacing */}
            {classes.map((classItem) => (
              <div key={classItem.id} className='mb-[12px]'> {/* key prop is essential */}
                <div className='card-box'> {/* Ensure .card-box is defined in your CSS */}
                  <div className='flex justify-start items-center bg-white rounded-[24px] p-[16px] gap-[16px] '>
                    <div>
                      <img className='w-[56px] h-[56px]' src={classImage} alt={`ØªØµÙˆÛŒØ± ${classItem.name}`} /> {/* Dynamic alt text */}
                    </div>
                    <div className='flex flex-col '>
                      <h1 className='font-extrabold line-clamp-1 text-[14px]'>{classItem.name}</h1>
                      <div className='flex justify-start items-start'>
                        <p className='bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]'>
                          {students.length} Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ²
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          // Handle case where data is empty after loading
          <div className="p-4 text-center text-gray-500">Ú©Ù„Ø§Ø³ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div> // "No classes to display."
        )}
      </div>
    </>
  );
};

export default Classes;
```

================
FILE: src\teacher\components\contentContainer\StudentAlert.tsx
================

```
import React, { useState } from 'react'
import { useQuery } from '@tanstack/react-query'
import { fetchChatEvents } from '../../../api-teacher'
import { FluentEmoji } from '@lobehub/fluent-emoji'
import Modal from './Modal'
import ChatButton from '../../../components/common/ChatButton'
import { useNavigate } from 'react-router-dom'
import { ChatEvent } from '../../../types/api'

const StudentAlert = () => {
  const { data: events, isLoading } = useQuery({
    queryKey: ['chatEvents'],
    queryFn: fetchChatEvents,
  });
  const navigate=useNavigate()
  const dangerEvents = events?.filter(
    (e) => e.level === 'DANGER' && !e.is_resolved
  ) || [];

  // State for modal
  const [selectedEvent, setSelectedEvent] = useState<ChatEvent | null>(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const handleViewChat = () => {
    // If ChatEvent has a session or chat_session_id property, use it. Otherwise, remove this logic or adjust as needed.
    // Example: if (selectedEvent?.session) { ... }
    setIsModalOpen(false);
  };

  if (isLoading || dangerEvents.length === 0) return null;
console.log(selectedEvent)
  return (
    <div className='py-[16px]'>
      {dangerEvents.map((event) => (
        <div key={event.id} className='alert-box mb-[12px]'>
          <div className='flex justify-between items-center bg-[#FFF0F0] rounded-[16px] px-[16px] py-[12px] gap-[16px] pl-[24px] text-[#FE4C4A] text-[12px]'>
            <div className='flex flex-col gap-[4px]'>
              <div className="flex items-center gap-2">
                <FluentEmoji emoji={event.emoji} size={20} />
                <h1 className='line-clamp-1 font-bold'>
                  {event.student_name} Ø±ÙØªØ§Ø± Ù‡Ø§ÛŒ Ø®Ø·Ø±Ù†Ø§Ú©ÛŒ Ø¯Ø§Ø±Ø¯
                </h1>
              </div>
             
            </div>
            <button
              onClick={() => {
                setSelectedEvent(event);
                setIsModalOpen(true);
              }}
            >
              Ø¨Ø±Ø±Ø³ÛŒ
            </button>
          </div>
        </div>
      ))}

      {/* Modal for event details */}
      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)}>
        {selectedEvent && (
           <div className='flex flex-col justify-center gap-4 pb-20'>
            <div className='flex flex-col items-center gap-2'>
              <div className='p-2 bg-backGround-1 rounded-full'>
                 <FluentEmoji emoji={selectedEvent.emoji} size={70} type="anim" />
              </div>
                <h1 className='font-bold text-lg'>{selectedEvent.student_name}</h1>
                <div className='flex justify-center gap-2'>
                  <p className='bg-backGround-1 px-3 py-1 rounded-full text-xs'>{selectedEvent.subject_name}</p>
                  <p className='bg-backGround-1 px-3 py-1 rounded-full text-xs'>{selectedEvent.level}</p>
                </div>
            </div>
            
            <div className='text-right'>
                <h2 className='font-bold mb-1'>ØªÙˆØ¶ÛŒØ­Ø§Øª</h2>
                <p className='text-sm text-gray-700'>{selectedEvent.overview}</p>
            </div>
            <div className=''>
              <ChatButton textButton={'Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú†Øª'} onClick={handleViewChat} />
            </div>
           
          </div>
        )}
      </Modal>
    </div>
  )
}

export default StudentAlert
```

================
FILE: src\teacher\components\contentContainer\Navbar.tsx
================

```
import React from 'react';
import { NavLink } from 'react-router-dom';
import studentIcon from './../../../assets/images/reportsPage/student.png';
import reportIcon from './../../../assets/images/reportsPage/report.png';
import chatIcon from './../../../assets/images/reportsPage/chat.png';

const Navbar = () => {
  // A reusable component for each navigation item
  interface NavItemProps {
    to: string;
    icon: string;
    label: string;
  }

  const NavItem: React.FC<NavItemProps> = ({ to, icon, label }) => {
    // This function provides the classes for the NavLink container
    const getNavLinkClass = ({ isActive }: { isActive: boolean }) => {
      const baseClasses = 'flex items-center justify-center gap-2 px-2 py-2 rounded-[16px] flex-1 min-w-0 ';
      const activeClasses = 'bg-backGround-1';
      return `${baseClasses} ${isActive ? activeClasses : ''}`;
    };

    return (
      <NavLink to={to} className={getNavLinkClass}>
        {({ isActive }) => (
          <>
            <img 
              src={icon} 
              className="w-4 h-4 flex-shrink-0"
              alt={`${label} icon`} 
            />
            <span className={`${isActive ? 'font-extrabold text-[14px]' : 'text-[12px]'} truncate text-center`}>
              {label}
            </span>
          </>
        )}
      </NavLink>
    );
  };

  return (
    <div>
      <div className='flex items-center bg-white py-2 px-2 text-[12px] w-full'>
        <NavItem to="/teacher/students" label="Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ²Ø§Ù†" icon={studentIcon} />
        <NavItem to="/teacher/reports" label="Ú¯Ø²Ø§Ø±Ø´Ø§Øª" icon={reportIcon} />
        <NavItem to="/teacher/chat" label="Ú†Øª Ù‡Ø§" icon={chatIcon} />
      </div>
      <hr className="border-[1.5px] border-borderColor-1 w-full" />
    </div>
  );
};

export default Navbar;
```

================
FILE: src\teacher\components\contentContainer\Modal.tsx
================

```
// src/teacher/components/contentContainer/Modal.tsx
import React, { FC, useEffect, useRef } from 'react';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
}

const Modal: FC<ModalProps> = ({ isOpen, onClose, children }) => {
  const modalRef = useRef<HTMLDivElement>(null);

  // Effect to lock/unlock background scroll
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }

    // Cleanup function to reset scroll when component unmounts
    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isOpen]);


  useEffect(() => {
    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isOpen, onClose]);

  const handleBackdropClick = (event: React.MouseEvent<HTMLDivElement>) => {
    if (event.target === event.currentTarget) {
      onClose();
    }
  };

  if (!isOpen) return null;

  return (
    <div
      className="fixed inset-0 bg-backdrop flex items-end justify-center z-50 transition-opacity duration-300"
      onClick={handleBackdropClick}
      aria-modal="true"
      role="dialog"
    >
      <div
        ref={modalRef}
        className="bg-white rounded-t-[24px] p-6 w-full max-h-[80vh] overflow-y-auto"
      >
        {children}
      </div>
    </div>
  );
};

export default Modal;
```

================
FILE: src\student\components\tarkibKon\studySelection\MainContent.tsx
================

```
import React from 'react';
import CardSelector from './CardSelector';

const MainContent: React.FC = () => {
  return (
    <div className='border-2 border-borderColor-1 bg-white rounded-[24px] p-4 h-full w-full overflow-y-auto flex flex-col rounded-b-none border-b-0'>
      <div> 
        <CardSelector />
      </div>
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\tarkibKon\studySelection\HeroSection.tsx
================

```
import React from 'react'
import tarkibkon from './../../../../assets/images/tarkibkon.webp'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col '>
      <img src={tarkibkon} className='w-[104px] h-[104px] mb-10 mt-5'/>
      <h1 className='mb-10 text-[16px] font-extrabold'>
        Ø§ÙˆÙ„ ÛŒÚ©ÛŒ Ø§Ø² Ú©ØªØ§Ø¨â€ŒÙ‡Ø§Øª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\tarkibKon\studySelection\CardSelector.tsx
================

```
import React, { useState, useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { setSelectedStudy } from '../../../../slice/tarkibkonSlice';
import CardContent from './CardContent';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface Subject {
  id: string;
  name: string;
  image_url:string
}

const CardSelector: React.FC = () => {
    const dispatch = useDispatch();
    const selectedStudy = useSelector((state: any) => state.tarkibkon.selectedStudy);
    
    const [selectedCardId, setSelectedCardId] = useState<string | null>(selectedStudy?.id || null);

    useEffect(() => {
        if (selectedStudy?.id) {
            setSelectedCardId(selectedStudy.id);
        }
    }, [selectedStudy]);

    const { data: subjects, isLoading, isError } = useQuery<Subject[]>({
        queryKey: ['subjects'],
        queryFn: async () => {
            const response = await axios.get<Subject[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects`);
            return response.data;
        },
    });

    const handleCardClick = (subject: Subject) => {
        // Only allow switching to a different card, not deselecting
        if (selectedCardId !== subject.id) {
            setSelectedCardId(subject.id);
            dispatch(setSelectedStudy(subject));
        }
    };

    if (isLoading) return <div>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³...</div>;
    if (isError) return <div>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³.</div>;

    return (
        <div className="grid grid-cols-2 gap-[12px]">
            {subjects?.map((subject) => (
                <CardContent
                    key={subject.id}
                    name={subject.name}
                    image={subject.image_url}
                    isSelected={selectedCardId === subject.id}
                    selectedCardId={selectedCardId}
                    onClick={() => handleCardClick(subject)}
                />
            ))}
        </div>
    );
};

export default CardSelector;
```

================
FILE: src\student\components\tarkibKon\studySelection\CardContent.tsx
================

```
import React, { useEffect } from "react";
import { useDispatch } from "react-redux";
import riazi from "./../../../../assets/images/riazi.png";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/tarkibkonSlice";

interface CardContentProps {
  name: string;
  isSelected: boolean;
  image:string,
  selectedCardId: string | null;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({image, name, isSelected, onClick, selectedCardId }) => {
  const dispatch = useDispatch();

  useEffect(() => {
    if (selectedCardId) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [selectedCardId, dispatch]);

  return (
    <div className={`${isSelected ? `onClickedCard-box transform translate-y-1` : "card-box"}`}>
      <div
        className={`rounded-[24px] cursor-pointer transition-colors duration-200 flex flex-col overflow-hidden h-full ${isSelected ? `bg-backGroundCard` : "bg-white"}`}
        onClick={onClick}
      >
        <img src={image || riazi} className="w-full h-auto object-contain" alt={name}/>
        <div className="p-4 text-center">
          <h1 className="text-sm font-semibold">{name}</h1>
        </div>
      </div>
    </div>
  );
};

export default CardContent;
```

================
FILE: src\student\components\tarkibKon\welcome\HeroSection.tsx
================

```
import happyFace from './../../../../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='mb-[32px] pt-[16px]'>
        <div className='flex justify-center  p-4'>
        <img src={happyFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ ØªØ±Ú©ÛŒØ¨â€ŒÚ©Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\student\components\tarkibKon\welcome\CardSection.tsx
================

```
import React from 'react'
import { tarkibkonWelcomeConstant } from '../../../../constants/tarkibkonWelcomeConstant'


const CardSection:React.FC = () => {
  return (
  <div >
   {tarkibkonWelcomeConstant.map(study=>(
        <div className='card-box mb-[12px] gap-[12px] '>
        <div className=' flex justify-center flex-col bg-white rounded-[24px] gap-[8px] p-[16px] '>
            <div className='gap-[8px] flex items-center justify-start'>
               {study.logo}
                <h1 className='font-extrabold text-[14px]'> {study.title}   </h1>

            </div>
             <div>
           <p className=' text-justify  text-[14px]'>{study.description}</p>
        </div>
            
        </div>
       
     </div>
  )
   )}
  </div>)
}

export default CardSection
```

================
FILE: src\student\components\tarkibKon\learnTopic\TopicSelector.tsx
================

```
// src/student/components/tarkibKon/favoriteTopic/TopicSelector.tsx
import React from 'react';
import TopicCard from './TopicCard';

interface Card {
  id: string;
  title: string;
}

interface TopicSelectorProps {
  onSelectCard: (id: string | null) => void;
  selectedCardId: string | null;
  isDisabled: boolean;
}

const TopicSelector: React.FC<TopicSelectorProps> = ({ onSelectCard, selectedCardId, isDisabled }) => {
  const cards: Card[] = [
    { id: 'ÙÙˆØªØ¨Ø§Ù„', title: 'ÙÙˆØªØ¨Ø§Ù„' },
    { id: 'Ù…Ø§ÛŒÙ†Ú©Ø±ÙØª', title: 'Ù…Ø§ÛŒÙ†Ú©Ø±ÙØª' },
    { id: 'Ø¯Ø§ÛŒÙ†Ø§Ø³ÙˆØ±Ù‡Ø§', title: 'Ø¯Ø§ÛŒÙ†Ø§Ø³ÙˆØ±Ù‡Ø§' },
    { id: 'Ø³ÙØ± Ø¨Ù‡ ÙØ¶Ø§', title: 'Ø³ÙØ± Ø¨Ù‡ ÙØ¶Ø§' },
    { id: 'Ø¯Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ÛŒ Ø´Ø§Ù‡Ù†Ø§Ù…Ù‡', title: 'Ø¯Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ÛŒ Ø´Ø§Ù‡Ù†Ø§Ù…Ù‡' },
    { id: 'Ø§Ø¨Ø±Ù‚Ù‡Ø±Ù…Ø§Ù†â€ŒÙ‡Ø§', title: 'Ø§Ø¨Ø±Ù‚Ù‡Ø±Ù…Ø§Ù†â€ŒÙ‡Ø§' },
  ];

  const handleCardClick = (clickedId: string) => {
    if (!isDisabled) {
      onSelectCard(selectedCardId === clickedId ? null : clickedId);
    }
  };

  return (
    <div
      className={`
        flex flex-wrap gap-[12px]
        ${isDisabled ? 'opacity-60 pointer-events-none' : ''}
      `}
    >
      {cards.map((card) => (
        <TopicCard
          key={card.id}
          title={card.title}
          isSelected={selectedCardId === card.id}
          onClick={() => handleCardClick(card.id)}
          isDisabled={isDisabled}
        />
      ))}
    </div>
  );
};

export default TopicSelector;
```

================
FILE: src\student\components\tarkibKon\learnTopic\TopicSearchBox.tsx
================

```
import React from 'react';

interface TopicSearchBoxProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

const TopicSearchBox: React.FC<TopicSearchBoxProps> = ({ searchQuery, setSearchQuery }) => {
  return (
    <div className="mx-[16px] my-4 ">
      <div className="relative">
        <textarea
          rows={1}
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder=" Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³..."
          className="p-[16px] rounded-[16px] w-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-chatButton-1 "
          style={{ direction: 'rtl' }}
        />
      </div>
    </div>
  );
};

export default TopicSearchBox;
```

================
FILE: src\student\components\tarkibKon\learnTopic\TopicCard.tsx
================

```
import React from "react";

interface TopicCardProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
  isDisabled?: boolean;
}

const TopicCard: React.FC<TopicCardProps> = ({ title, isSelected, onClick, isDisabled }) => {
  return (
    <div>
      <div
        className={`
          ${isSelected ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"}
          inline-block
          ${isDisabled ? 'pointer-events-none' : ''} // Prevent clicks when disabled
        `}
      >
        <div
          className={`
            py-[8px] px-[16px] rounded-[16px]
            ${isSelected ? "bg-backGroundCard" : "bg-white"}
            ${isDisabled ? 'cursor-not-allowed' : 'cursor-pointer'} 
          `}
          onClick={onClick}
        >
          <div className="flex justify-start items-center">
            <h1 className="text-[14px] font-extrabold whitespace-nowrap">
              {title}
            </h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopicCard;
```

================
FILE: src\student\components\tarkibKon\learnTopic\Topic.tsx
================

```
import React, { useState } from "react";

import TopicSelector from "./TopicSelector";

const Topic = () => {
  const [textAreaContent, setTextAreaContent] = useState<string>("");
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleTextAreaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const value = e.target.value;
    setTextAreaContent(value);
    // If user starts typing, unselect any card
    if (value.length > 0) {
      setSelectedCardId(null);
    }
  };

  const handleCardSelection = (id: string | null) => {
    setSelectedCardId(id);
    // If a card is selected, clear the textarea
    if (id !== null) {
      setTextAreaContent("");
    }
  };

  // Determine if textarea should be disabled
  const isTextAreaDisabled = selectedCardId !== null;
  // Determine if TopicSelector (cards) should be disabled
  const isTopicSelectorDisabled = textAreaContent.length > 0;

  return (
    <div className="flex justify-center bg-white  rounded-[24px] rounded-b-none p-[16px] flex-col pb-20">
      <textarea
        placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... "
        className="p-[16px] border-[2px] border-backGround-1 rounded-[16px] w-full text-[14px] resize-none overflow-hidden" // Added resize-none
        rows={1} // Made textarea smaller by setting rows
        value={textAreaContent}
        onChange={handleTextAreaChange}
        disabled={isTextAreaDisabled}
        style={isTextAreaDisabled ? { opacity: 0.6, cursor: 'not-allowed' } : {}} 
        
      />
      <h1 className="font-extrabold text-[14px] mt-[16px] mb-[12px]">
        Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
      </h1>
      <div className="flex flex-wrap gap-[12px]">
        <TopicSelector
          onSelectCard={handleCardSelection}
          selectedCardId={selectedCardId}
          isDisabled={isTopicSelectorDisabled}
        />
      </div>
    </div>
  );
};

export default Topic;
```

================
FILE: src\student\components\tarkibKon\learnTopic\MainContent.tsx
================

```
// src/student/pages/konjKav/topicSelection/MainContent.tsx
import React from 'react';
import { useDispatch } from 'react-redux';
import { activeButtonReducer, disableButtonReducer } from '../../../../slice/konjkavSlice';
import TopicSelector from './TopicSelector'

// This Topic interface isn't directly used by TopicSelector anymore,
// but it's good to keep if you plan to use these topics for filtering/search later.
interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

interface MainContentProps {
  onTopicSelect: (topicId: string | null) => void; // Now passes a single ID or null
  selectedTopicFromParent: string | null; // New prop to receive the currently selected topic
}

const MainContent: React.FC<MainContentProps> = ({ onTopicSelect, selectedTopicFromParent }) => {
  const dispatch = useDispatch();

 

  // handleTopicSelect now directly passes the selected ID to the parent via onTopicSelect
  const handleTopicSelect = (topicId: string | null) => {
    onTopicSelect(topicId); // Pass the ID directly to the parent
    
    // Logic for activating/deactivating button based on selection
    if (topicId) { // If something is selected
      dispatch(activeButtonReducer());
    } else { // If nothing is selected
      dispatch(disableButtonReducer());
    }
  };

  return (
    <div
      className='
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <TopicSelector
        onSelectCard={handleTopicSelect}
        selectedCardId={selectedTopicFromParent} // Pass the selected ID from parent to TopicSelector
        isDisabled={false} // Assuming TopicSelector itself is not disabled
      />
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\tarkibKon\learnTopic\HeroSection.tsx
================

```
import React from 'react';
import tarkibkon from './../../../../assets/images/tarkibkon.webp';

const HeroSection = () => {
  return (
    <div className="flex justify-center items-center flex-col ">
      <img src={tarkibkon} className="w-[104px] h-[104px] mb-10 mt-5" />
      <h1 className="mb-10 text-[16px] font-extrabold">Ú†Ù‡ Ù…ÙˆØ¶ÙˆØ¹ÛŒ Ø±Ùˆ Ù…ÛŒØ®ÙˆØ§ÛŒâ€Œ Ø¨Ù‡ØªØ± Ø¨ÙÙ‡Ù…ÛŒØŸ</h1>
    </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\tarkibKon\favoriteTopic\TopicSelector.tsx
================

```
// src/student/components/tarkibKon/learnTopic/TopicSelector.tsx
import React from 'react';
import TopicCard from './TopicCard';

interface Card {
  id: string;
  title: string;
}

interface TopicSelectorProps {
  onSelectCard: (id: string | null) => void;
  selectedCardId: string | null;
  isDisabled: boolean;
}

const TopicSelector: React.FC<TopicSelectorProps> = ({ onSelectCard, selectedCardId, isDisabled }) => {
  const cards: Card[] = [
    { id: 'Ú©Ø³Ø±Ù‡Ø§', title: 'Ú©Ø³Ø±Ù‡Ø§' },
    { id: 'ÙØªÙˆØ³Ù†ØªØ²', title: 'ÙØªÙˆØ³Ù†ØªØ²' },
    { id: 'Ø³Ø§Ø®ØªØ§Ø± Ø§ØªÙ…', title: 'Ø³Ø§Ø®ØªØ§Ø± Ø§ØªÙ…' },
    { id: 'ØªØ§Ø±ÛŒØ® ØµÙÙˆÛŒÙ‡', title: 'ØªØ§Ø±ÛŒØ® ØµÙÙˆÛŒÙ‡' },
    { id: 'Ø¢Ø¨ Ùˆ Ù‡ÙˆØ§ÛŒ Ø§ÛŒØ±Ø§Ù†', title: 'Ø¢Ø¨ Ùˆ Ù‡ÙˆØ§ÛŒ Ø§ÛŒØ±Ø§Ù†' },
    { id: 'Ø´Ø¹Ø± Ù†Ùˆ', title: 'Ø´Ø¹Ø± Ù†Ùˆ' },
  ];

  const handleCardClick = (clickedId: string) => {
    if (!isDisabled) {
      onSelectCard(selectedCardId === clickedId ? null : clickedId);
    }
  };

  return (
    <div
      className={`
        flex flex-wrap gap-[12px]
        ${isDisabled ? 'opacity-60 pointer-events-none' : ''}
      `}
    >
      {cards.map((card) => (
        <TopicCard
          key={card.id}
          title={card.title}
          isSelected={selectedCardId === card.id}
          onClick={() => handleCardClick(card.id)}
          isDisabled={isDisabled}
        />
      ))}
    </div>
  );
};

export default TopicSelector;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\TopicSearchBox.tsx
================

```
import React from 'react';

interface TopicSearchBoxProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

const TopicSearchBox: React.FC<TopicSearchBoxProps> = ({ searchQuery, setSearchQuery }) => {
  return (
    <div className="mx-[16px] my-4 ">
      <div className="relative">
        <textarea
          rows={1}
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder=" Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³..."
          className="p-[16px] rounded-[16px] w-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-chatButton-1"
          style={{ direction: 'rtl' }}
        />
      </div>
    </div>
  );
};

export default TopicSearchBox;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\TopicCard.tsx
================

```
import React from "react";

interface TopicCardProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
  isDisabled?: boolean;
}

const TopicCard: React.FC<TopicCardProps> = ({ title, isSelected, onClick, isDisabled }) => {
  return (
    <div>
      <div
        className={`
          ${isSelected ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"}
          inline-block
          ${isDisabled ? 'pointer-events-none' : ''} // Prevent clicks when disabled
        `}
      >
        <div
          className={`
            py-[8px] px-[16px] rounded-[16px]
            ${isSelected ? "bg-backGroundCard" : "bg-white"}
            ${isDisabled ? 'cursor-not-allowed' : 'cursor-pointer'} 
          `}
          onClick={onClick}
        >
          <div className="flex justify-start items-center">
            <h1 className="text-[14px] font-extrabold whitespace-nowrap">
              {title}
            </h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopicCard;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\Topic.tsx
================

```
import React, { useState } from "react";

import TopicSelector from "./TopicSelector";

const Topic = () => {
  const [textAreaContent, setTextAreaContent] = useState<string>("");
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleTextAreaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const value = e.target.value;
    setTextAreaContent(value);
    // If user starts typing, unselect any card
    if (value.length > 0) {
      setSelectedCardId(null);
    }
  };

  const handleCardSelection = (id: string | null) => {
    setSelectedCardId(id);
    // If a card is selected, clear the textarea
    if (id !== null) {
      setTextAreaContent("");
    }
  };

  // Determine if textarea should be disabled
  const isTextAreaDisabled = selectedCardId !== null;
  // Determine if TopicSelector (cards) should be disabled
  const isTopicSelectorDisabled = textAreaContent.length > 0;

  return (
    <div className="flex justify-center bg-white  rounded-[24px] rounded-b-none p-[16px] flex-col pb-20">
      <textarea
        placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... "
        className="p-[16px] border-[2px] border-backGround-1 rounded-[16px] w-full text-[14px] resize-none overflow-hidden" // Added resize-none
        rows={1} // Made textarea smaller by setting rows
        value={textAreaContent}
        onChange={handleTextAreaChange}
        disabled={isTextAreaDisabled}
        style={isTextAreaDisabled ? { opacity: 0.6, cursor: 'not-allowed' } : {}} 
        
      />
      <h1 className="font-extrabold text-[14px] mt-[16px] mb-[12px]">
        Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
      </h1>
      <div className="flex flex-wrap gap-[12px]">
        <TopicSelector
          onSelectCard={handleCardSelection}
          selectedCardId={selectedCardId}
          isDisabled={isTopicSelectorDisabled}
        />
      </div>
    </div>
  );
};

export default Topic;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\MainContent.tsx
================

```
// src/student/pages/konjKav/topicSelection/MainContent.tsx
import React from 'react';
import { useDispatch } from 'react-redux';
import { activeButtonReducer, disableButtonReducer } from '../../../../slice/konjkavSlice';
import TopicSelector from './TopicSelector'

// This Topic interface isn't directly used by TopicSelector anymore,
// but it's good to keep if you plan to use these topics for filtering/search later.
interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

interface MainContentProps {
  onTopicSelect: (topicId: string | null) => void; // Now passes a single ID or null
  selectedTopicFromParent: string | null; // New prop to receive the currently selected topic
}

const MainContent: React.FC<MainContentProps> = ({ onTopicSelect, selectedTopicFromParent }) => {
  const dispatch = useDispatch();

 

  // handleTopicSelect now directly passes the selected ID to the parent via onTopicSelect
  const handleTopicSelect = (topicId: string | null) => {
    onTopicSelect(topicId); // Pass the ID directly to the parent
    
    // Logic for activating/deactivating button based on selection
    if (topicId) { // If something is selected
      dispatch(activeButtonReducer());
    } else { // If nothing is selected
      dispatch(disableButtonReducer());
    }
  };

  return (
    <div
      className='
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <TopicSelector
        onSelectCard={handleTopicSelect}
        selectedCardId={selectedTopicFromParent} // Pass the selected ID from parent to TopicSelector
        isDisabled={false} // Assuming TopicSelector itself is not disabled
      />
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\tarkibKon\favoriteTopic\HeroSection.tsx
================

```
import React from 'react';
import tarkibkon from './../../../../assets/images/tarkibkon.webp';

const HeroSection = () => {
  return (
    <div className="flex justify-center items-center flex-col ">
      <img src={tarkibkon} className="w-[104px] h-[104px] mb-10 mt-5" />
      <h1 className="mb-10 text-[16px] font-extrabold">Ø­Ø§Ù„Ø§ Ø¨Ú¯Ùˆ Ú†Ù‡ Ù…ÙˆØ¶ÙˆØ¹ÛŒ Ø±Ùˆ Ø§Ø² Ù‡Ù…Ù‡ Ø¨ÛŒØ´ØªØ± Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒØŸ</h1>
    </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\konjKav\topicSelection\TopicSelector.tsx
================

```
// src/student/components/konjKav/topicSelection/TopicSelector.tsx
import React from 'react';
import TopicCard from './TopicCard';

interface Card {
  id: string;
  title: string;
}

interface TopicSelectorProps {
  onSelectCard: (id: string | null) => void;
  selectedCardId: string | null;
  isDisabled: boolean;
}

const TopicSelector: React.FC<TopicSelectorProps> = ({ onSelectCard, selectedCardId, isDisabled }) => {
  const cards: Card[] = [
    { id: 'Ø³ÛŒØ§Ø±Ø§Øª Ù…Ù†Ø¸ÙˆÙ…Ù‡ Ø´Ù…Ø³ÛŒ', title: 'Ø³ÛŒØ§Ø±Ø§Øª Ù…Ù†Ø¸ÙˆÙ…Ù‡ Ø´Ù…Ø³ÛŒ' },
    { id: 'Ø²Ù†Ø¬ÛŒØ±Ù‡ ØºØ°Ø§ÛŒÛŒ', title: 'Ø²Ù†Ø¬ÛŒØ±Ù‡ ØºØ°Ø§ÛŒÛŒ' },
    { id: 'ØªØ§Ø±ÛŒØ® Ø§ÛŒØ±Ø§Ù† Ø¨Ø§Ø³ØªØ§Ù†', title: 'ØªØ§Ø±ÛŒØ® Ø§ÛŒØ±Ø§Ù† Ø¨Ø§Ø³ØªØ§Ù†' },
    { id: 'Ø¢Ø¨ Ùˆ Ù‡ÙˆØ§ÛŒ Ø§ÛŒØ±Ø§Ù†', title: 'Ø¢Ø¨ Ùˆ Ù‡ÙˆØ§ÛŒ Ø§ÛŒØ±Ø§Ù†' },
    { id: 'Ø´Ø§Ø¹Ø±Ø§Ù† Ù…Ø¹Ø±ÙˆÙ ÙØ§Ø±Ø³ÛŒ', title: 'Ø´Ø§Ø¹Ø±Ø§Ù† Ù…Ø¹Ø±ÙˆÙ ÙØ§Ø±Ø³ÛŒ' },
    { id: 'Ù‡Ù†Ø± Ø§Ø³Ù„Ø§Ù…ÛŒ', title: 'Ù‡Ù†Ø± Ø§Ø³Ù„Ø§Ù…ÛŒ' },
  ];

  const handleCardClick = (clickedId: string) => {
    if (!isDisabled) {
      onSelectCard(selectedCardId === clickedId ? null : clickedId);
    }
  };

  return (
    <div
      className={`
        flex flex-wrap gap-[12px]
        ${isDisabled ? 'opacity-60 pointer-events-none' : ''}
      `}
    >
      {cards.map((card) => (
        <TopicCard
          key={card.id}
          title={card.title}
          isSelected={selectedCardId === card.id}
          onClick={() => handleCardClick(card.id)}
          isDisabled={isDisabled}
        />
      ))}
    </div>
  );
};

export default TopicSelector;
```

================
FILE: src\student\components\konjKav\topicSelection\TopicSearchBox.tsx
================

```
import React from 'react';

interface TopicSearchBoxProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

const TopicSearchBox: React.FC<TopicSearchBoxProps> = ({ searchQuery, setSearchQuery }) => {
  return (
    <div className="mx-[16px] my-4 ">
      <div className="relative">
        <textarea
          rows={1}
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          placeholder=" Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³..."
          className="p-[16px] rounded-[16px] w-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-chatButton-1"
          style={{ direction: 'rtl' }}
        />
      </div>
    </div>
  );
};

export default TopicSearchBox;
```

================
FILE: src\student\components\konjKav\topicSelection\TopicCard.tsx
================

```
import React from "react";

interface TopicCardProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
  isDisabled?: boolean;
}

const TopicCard: React.FC<TopicCardProps> = ({ title, isSelected, onClick, isDisabled }) => {
  return (
    <div>
      <div
        className={`
          ${isSelected ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"}
          inline-block
          ${isDisabled ? 'pointer-events-none' : ''} // Prevent clicks when disabled
        `}
      >
        <div
          className={`
            py-[8px] px-[16px] rounded-[16px]
            ${isSelected ? "bg-backGroundCard" : "bg-white"}
            ${isDisabled ? 'cursor-not-allowed' : 'cursor-pointer'} 
          `}
          onClick={onClick}
        >
          <div className="flex justify-start items-center">
            <h1 className="text-[14px] font-extrabold whitespace-nowrap">
              {title}
            </h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopicCard;
```

================
FILE: src\student\components\konjKav\topicSelection\Topic.tsx
================

```
import React, { useState } from "react";
import TopicCard from "./TopicCard"; // Make sure the path is correct
import TopicSelector from "./TopicSelector";

const Topic = () => {
  const [textAreaContent, setTextAreaContent] = useState<string>("");
  const [selectedCardId, setSelectedCardId] = useState<string | null>(null);

  const handleTextAreaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const value = e.target.value;
    setTextAreaContent(value);
    // If user starts typing, unselect any card
    if (value.length > 0) {
      setSelectedCardId(null);
    }
  };

  const handleCardSelection = (id: string | null) => {
    setSelectedCardId(id);
    // If a card is selected, clear the textarea
    if (id !== null) {
      setTextAreaContent("");
    }
  };

  // Determine if textarea should be disabled
  const isTextAreaDisabled = selectedCardId !== null;
  // Determine if TopicSelector (cards) should be disabled
  const isTopicSelectorDisabled = textAreaContent.length > 0;

  return (
    <div className="flex justify-center bg-white  rounded-[24px] rounded-b-none p-[16px] flex-col pb-20">
      <textarea
        placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ ... "
        className="p-[16px] border-[2px] border-backGround-1 rounded-[16px] w-full text-[14px] resize-none overflow-hidden" // Added resize-none
        rows={1} // Made textarea smaller by setting rows
        value={textAreaContent}
        onChange={handleTextAreaChange}
        disabled={isTextAreaDisabled}
        style={isTextAreaDisabled ? { opacity: 0.6, cursor: 'not-allowed' } : {}} 
        
      />
      <h1 className="font-extrabold text-[14px] mt-[16px] mb-[12px]">
        Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
      </h1>
      <div className="flex flex-wrap gap-[12px]">
        <TopicSelector
          onSelectCard={handleCardSelection}
          selectedCardId={selectedCardId}
          isDisabled={isTopicSelectorDisabled}
        />
      </div>
    </div>
  );
};

export default Topic;
```

================
FILE: src\student\components\konjKav\topicSelection\MainContent.tsx
================

```
// src/student/pages/konjKav/topicSelection/MainContent.tsx
import React from 'react';
import { useDispatch } from 'react-redux';
import { activeButtonReducer, disableButtonReducer } from '../../../../slice/konjkavSlice';
import TopicSelector from './TopicSelector';

// This Topic interface isn't directly used by TopicSelector anymore,
// but it's good to keep if you plan to use these topics for filtering/search later.
interface Topic {
  id: string;
  title: string;
  description: string;
  emoji: string;
}

interface MainContentProps {
  onTopicSelect: (topicId: string | null) => void; // Now passes a single ID or null
  selectedTopicFromParent: string | null; // New prop to receive the currently selected topic
}

const MainContent: React.FC<MainContentProps> = ({ onTopicSelect, selectedTopicFromParent }) => {
  const dispatch = useDispatch();

 

  // handleTopicSelect now directly passes the selected ID to the parent via onTopicSelect
  const handleTopicSelect = (topicId: string | null) => {
    onTopicSelect(topicId); // Pass the ID directly to the parent
    
    // Logic for activating/deactivating button based on selection
    if (topicId) { // If something is selected
      dispatch(activeButtonReducer());
    } else { // If nothing is selected
      dispatch(disableButtonReducer());
    }
  };

  return (
    <div
      className='
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
      '
    >
      <TopicSelector
        onSelectCard={handleTopicSelect}
        selectedCardId={selectedTopicFromParent} // Pass the selected ID from parent to TopicSelector
        isDisabled={false} // Assuming TopicSelector itself is not disabled
      />
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\konjKav\topicSelection\HeroSection.tsx
================

```
import React from 'react';
import konjkav from './../../../../assets/images/konjkav.webp';

const HeroSection = () => {
  return (
    <div className="flex justify-center items-center flex-col ">
      <img src={konjkav} className="w-[104px] h-[104px] mb-10 mt-5" />
      <h1 className="mb-10 text-[16px] font-extrabold">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ú©Ù†Ø¬â€ŒÚ©Ø§Ùˆ Ø´Ø¯ÛŒ Ø¨Ø¯ÙˆÙ†ÛŒØŸ</h1>
    </div>
  );
};

export default HeroSection;

```

================
FILE: src\student\components\konjKav\studySelection\MainContent.tsx
================

```
import React from 'react';
import CardSelector from './CardSelector';

const MainContent: React.FC = () => {
  return (
    <div
      className='
        border-2 border-borderColor-1 bg-white rounded-[24px]
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col rounded-b-none border-b-0
      '
    >
      <div> 
        <CardSelector />
      </div>
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\konjKav\studySelection\HeroSection.tsx
================

```
import React from 'react'
import konjkav from './../../../../assets/images/konjkav.webp'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col '>
      <img src={konjkav} className='w-[104px] h-[104px] mb-10 mt-5'/>
      <h1 className='mb-10 text-[16px] font-extrabold'>
        Ø§ÙˆÙ„ ÛŒÚ©ÛŒ Ø§Ø² Ú©ØªØ§Ø¨â€ŒÙ‡Ø§Øª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\konjKav\studySelection\CardSelector.tsx
================

```
import React, { useState, useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { setSelectedStudy } from '../../../../slice/konjkavSlice';
import CardContent from './CardContent';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';
import { useNavigate } from 'react-router-dom';

interface Subject {
  id: string;
  name: string;
  image_url: string;
}

const CardSelector: React.FC = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();
  const selectedStudy = useSelector((state: any) => state.konjkav.selectedStudy);
  
  const [selectedCardId, setSelectedCardId] = useState<string | null>(selectedStudy?.id || null);

  useEffect(() => {
    if (selectedStudy?.id) {
      setSelectedCardId(selectedStudy.id);
    }
  }, [selectedStudy]);

  const { data: subjects, isLoading, isError } = useQuery<Subject[]>({
    queryKey: ['subjects'],
    queryFn: async () => {
      const response = await axios.get<Subject[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects`);
    
      return response.data;
    },
  });

  // if(subjects?.status===401){
     
  //     // Navigate to login page if selections are missing
     
  //       navigate('/'); 
    
  // }

  const handleCardClick = (subject: Subject) => {
    // Only allow switching to a different card, not deselecting
    if (selectedCardId !== subject.id) {
      setSelectedCardId(subject.id);
      dispatch(setSelectedStudy(subject));
    }
  };

  if (isLoading) return <div>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³...</div>;
  if (isError) return <div>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³.</div>;

  return (
    <div className="grid grid-cols-2 gap-[12px]">
      {subjects?.map((subject) => (
        <CardContent
          key={subject.id}
          title={subject.name}
          image={subject.image_url}
          isSelected={selectedCardId === subject.id}
          selectedCardId={selectedCardId}
          onClick={() => handleCardClick(subject)}
        />
      ))}
    </div>
  );
};

export default CardSelector;
```

================
FILE: src\student\components\konjKav\studySelection\CardContent.tsx
================

```
import React, { useEffect } from "react";
import { useDispatch } from "react-redux";
import riazi from "./../../../../assets/images/riazi.png";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/konjkavSlice";

interface CardContentProps {
  title: string;
  isSelected: boolean;
  image: string;
  selectedCardId: string | null;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({ image,title, isSelected, onClick,selectedCardId }) => {
  const dispatch = useDispatch();

  useEffect(() => {
    if (selectedCardId) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [selectedCardId, dispatch]);

  return (
    <div className={`${isSelected ? `onClickedCard-box transform translate-y-1` : "card-box"}`}>
      <div
        className={`rounded-[24px] cursor-pointer transition-colors duration-200 flex flex-col overflow-hidden h-full ${isSelected ? `bg-backGroundCard` : "bg-white"}`}
        onClick={onClick}
      >
        <img
          src={image || riazi}
          className="w-full h-auto object-contain"
          alt={title}
        />
        <div className="p-4 text-center">
          <h1 className="text-sm font-semibold">{title}</h1>
        </div>
      </div>
    </div>
  );
};

export default CardContent;
```

================
FILE: src\student\components\konjKav\recentChat\RecentChat.tsx
================

```

```

================
FILE: src\student\components\konjKav\welcome\HeroSection.tsx
================

```
import happyFace from './../../../../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='mb-[32px] pt-[24px]'>
        <div className='flex justify-center   mb-[32px]'>
        <img src={happyFace}/>
      </div>
      <p className='text-center font-extrabold'>Ø¨Ù‡ Ú©Ù†Ø¬â€ŒÚ©Ù€Ù€Ù€Ø§Ùˆ Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\student\components\konjKav\welcome\CardSection.tsx
================

```
import React from 'react'
import { konjkavWelcomeConstant } from '../../../../constants/konjkavWelcomConstant'


const CardSection:React.FC = () => {
  return (
  <div >
   {konjkavWelcomeConstant.map(study=>(
        <div className='card-box mb-[12px] gap-[12px] '>
        <div className=' flex justify-center flex-col bg-white rounded-[24px] gap-[8px] p-[16px] '>
            <div className='gap-[8px] flex items-center justify-start'>
               {study.logo}
                <h1 className='font-extrabold text-[14px]'> {study.title}   </h1>

            </div>
             <div>
           <p className=' text-justify  text-[14px]'>{study.description}</p>
        </div>
            
        </div>
       
     </div>
  )
   )}
  </div>)
}

export default CardSection
```

================
FILE: src\student\components\darsYar\studySelection\MainContent.tsx
================

```
// MainContent.tsx
import React from 'react';
import CardSelector from './CardSelector'; // CardContent is not directly used here


const MainContent: React.FC = () => {
  return (
    <div
      className='
        border-[2px] border-borderColor-1 bg-white rounded-[24px]
        p-4 
        h-full w-full 
        overflow-y-auto 
        flex flex-col 
        gap-[12px] pt-[16px] rounded-b-none border-b-0'
    >
      {/* The `gap-[12px] pt-[16px] h-full` on the outer div were a bit ambiguous.
          Moved padding and adjusted gap/flex behavior here. */}
      <div> {/* This div acts as a wrapper for CardSelector */}
        <CardSelector />
      </div>
      
    </div>
  );
};

export default MainContent;
```

================
FILE: src\student\components\darsYar\studySelection\HeroSection.tsx
================

```
import React from 'react'
import darsYar from './../../../../assets/images/darsyar.webp'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col '>
      <img src={darsYar} className='w-[104px] h-[104px] mb-10 mt-5'/>
      <h1 className='mb-10 text-[16px] font-extrabold'>
       Ø§ÙˆÙ„ ÛŒÚ©ÛŒ Ø§Ø² Ú©ØªØ§Ø¨â€ŒÙ‡Ø§Øª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\darsYar\studySelection\CardSelector.tsx
================

```
// CardSelector.tsx
import React, { useState, useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { setSelectedStudy, clearSelections } from '../../../../slice/darsyarSlice';
import CardContent from './CardContent';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface Card {
  id: string;
  name: string;
  image_url: string;
}

const CardSelector: React.FC = () => {

   const {
    data,
    isLoading,
      
  } = useQuery<Card[]>({ 
    queryKey: ['classes'],
    queryFn: async () => { 
      const response = await axios.get<Card[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects`);
      return response.data; 
    },
    });
   if (!isLoading){
    
   }

  const dispatch = useDispatch();
  const selectedStudy = useSelector((state: any) => state.darsyar.selectedStudy);

  const [selectedCardId, setSelectedCardId] = useState<string | null>(selectedStudy?.id || null);
  

  useEffect(() => {
    if (selectedStudy?.id) {
      setSelectedCardId(selectedStudy.id);
    }
  }, [selectedStudy]);

  const handleCardClick = (clickedId: string, name: string) => {
    const newSelectedId = selectedCardId === clickedId ? null : clickedId;
    setSelectedCardId(newSelectedId);
    
    if (newSelectedId) {
      dispatch(setSelectedStudy({
        id: clickedId,
        name: name
      }));
    } else {
      // When deselecting, we set the study to null
      dispatch(clearSelections());
    }
  };

  return (
   (!isLoading) &&  <div className="grid grid-cols-2 gap-[12px]">
      {data?.map((card) => (
        <CardContent
          key={card.id}
          name={card.name}
          image={card.image_url}
          selectId={selectedCardId }
          isSelected={selectedCardId === card.id}
          onClick={() => handleCardClick(card.id, card.name)}
        />
      ))}
    </div>
  );
};

export default CardSelector;
```

================
FILE: src\student\components\darsYar\studySelection\CardContent.tsx
================

```
// CardContent.tsx
import React, { useEffect } from "react"; // Import useEffect
import riazi from "./../../../../assets/images/riazi.png";
import { useDispatch } from "react-redux";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/darsyarSlice";

interface CardContentProps {
  name: string;
  image:string;
  selectId: string|null;
  isSelected:boolean
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({
  name,
  selectId,
  image,
  isSelected,
  onClick,
}) => {
  const dispatch = useDispatch();


  useEffect(() => {
    if (selectId) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [selectId, dispatch]); 

  return (
    <div className={`${isSelected ? `onClickedCard-box transform translate-y-1` : "card-box"}`}>
      {" "}
      <div
        className={`
          rounded-[24px] cursor-pointer
          transition-colors duration-200 
          flex flex-col 
          overflow-hidden 
          h-full 
          ${isSelected ? `bg-backGroundCard` : "bg-white"}
        `}
        onClick={onClick}
      >
        <img
          src={image || riazi}
          className=" w-full h-auto object-contain"
          alt={name}
        />

        <div
          className="
          p-4 
          text-center flex flex-col justify-center items-center 
        "
        >
          <h1
            className="
            text-sm 
            font-semibold
            pb-0 mt-0 
          "
          >
            {name}
          </h1>
        </div>
      </div>
    </div>
  );
};

export default CardContent;
```

================
FILE: src\student\components\darsYar\studyAssistant\HeroSection.tsx
================

```

import kiddoFace from './../../../../assets/images/happyFace.png'




const HeroSection = () => {
  return (
    <div className='mb-[32px] pt-[16px]'>
        <div className='flex justify-center  p-4'>
        <img src={kiddoFace}/>
      </div>
      <p className='text-center text-[16px] font-extrabold'>Ø¨Ù‡ Ø¯Ø±Ø³â€ŒÛŒØ§Ø± Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</p>
    </div>
  )
}

export default HeroSection
```

================
FILE: src\student\components\darsYar\studyAssistant\CardSection.tsx
================

```
import React from 'react'
import { studyAssistantConstatnt } from '../../../../constants/studyAssistantConstant'

const CardSection:React.FC = () => {
  return (
  <div >
   {studyAssistantConstatnt.map((study,index)=>(
        <div className='card-box mb-[12px] gap-[12px] ' key={index}>
        <div className=' flex justify-center flex-col bg-white rounded-[24px] gap-[8px] p-[16px] '>
            <div className='gap-[8px] flex items-center justify-start'>
               {study.logo}
                <h1 className='font-extrabold text-[14px]'> {study.title}   </h1>

            </div>
             <div>
           <p className=' text-justify  text-[14px]'>{study.description}</p>
        </div>
            
        </div>
       
     </div>
  )
   )}
  </div>)
}

export default CardSection
```

================
FILE: src\student\components\darsYar\lessonSelection\MainContent.tsx
================

```
// MainContent.tsx
import React, { useState } from "react";
import { useDispatch, useSelector } from "react-redux";
import { setSelectedLesson } from "../../../../slice/darsyarSlice";
import CardContent from "./CardContent";
import axios from "axios";
import { useQuery } from "@tanstack/react-query";

// Interface for the API response
interface LessonResponse {
  id: string;
  title: string;
}


const MainContent: React.FC = () => {
  const dispatch = useDispatch();
  const [selectedLessons, setSelectedLessons] = useState<string[]>([]);
  const subject = useSelector((state: any) => state.darsyar.selectedStudy?.id);
  
   const {
    data,
    isLoading,
    isError, 
    error,   
  } = useQuery<LessonResponse[]>({ 
    queryKey: ['classes', subject],
    queryFn: async () => { 
      const response = await axios.get<LessonResponse[]>(`https://kiddo2.pythonanywhere.com/api/v1/academics/subjects/${subject}/chapters/`);
      return response.data; 
    },
    enabled: !!subject
    });
  


  const handleLessonSelect = (id: string) => {
    setSelectedLessons(prev => {
      const isSelected = prev.includes(id);
      const newSelection = isSelected 
        ? prev.filter(lessonId => lessonId !== id)
        : [...prev, id];
      
      // Update Redux state with selected lessons including both id and name
      const selectedLessonsData = newSelection
        .map(selectedId => data?.find(l => l.id === selectedId))
        .filter((lesson): lesson is LessonResponse => lesson !== undefined)
        .map(lesson => ({
          id: lesson.id,
          name: lesson.title
        }));
      
      const lessonData = selectedLessonsData.map(lesson => ({
        id: lesson.id,
        title: lesson.name // Map name to title to match Lesson interface
      }));
      dispatch(setSelectedLesson(lessonData));
      return newSelection;
    });
  };

  return (
    (!isLoading) && (
      <div className="border-borderColor-1 bg-white h-screen flex flex-col gap-[12px]">
        <div className="bg-white gap-[16px] mt-[16px] mx-[16px]">
          {data?.map((lesson) => (
            <CardContent
              key={lesson.id}
              title={lesson.title} // CardContent still expects title prop
              isSelected={selectedLessons.includes(lesson.id)}
              onClick={() => handleLessonSelect(lesson.id)}
            />
          ))}
        </div>
      </div>
    ) 
  );
};

export default MainContent;

```

================
FILE: src\student\components\darsYar\lessonSelection\HeroSection.tsx
================

```
import React from 'react'
import darsYar from './../../../../assets/images/darsyar.webp'

const HeroSection = () => {
  return (
    <div className='flex justify-center items-center flex-col gap-[32px] pt-[16px]'>
      <img src={darsYar} className='w-[104px] h-[104px]'/>
      <h1 className='mb-10 text-[16px]  font-extrabold'>
       Ø­Ø§Ù„Ø§ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†!
      </h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\darsYar\lessonSelection\CardContent.tsx
================

```
import React, { useEffect, useState } from "react";
import { useDispatch } from "react-redux";
import { activeButtonReducer, disableButtonReducer } from "../../../../slice/darsyarSlice";

interface CardContentProps {
  title: string;
  isSelected: boolean;
  onClick: () => void;
}

const CardContent: React.FC<CardContentProps> = ({ title, isSelected, onClick }) => {
  const dispatch = useDispatch();
  const [isClicked, setIsClicked] = useState(false);
  
 

  const handleClick = () => {
    onClick();
    setIsClicked(!isClicked); // Toggles the state
  };

  useEffect(() => {
    if (isClicked) {
      dispatch(activeButtonReducer());
    } else {
      dispatch(disableButtonReducer());
    }
  }, [isClicked, dispatch]); 

  return (
    // Changed m-2 to mb-[16px] for a bottom margin of 16px
    <div className="flex flex-col justify-center mb-[12px] ">
      <div
        className={` ${
          isClicked ? "onClickedButton-box transform translate-y-1" : "buttonClicked-box"
        }  `}
      >
        <div
          className={`gap-[8px] p-[16px] rounded-[16px] cursor-pointer ${
            isClicked ? "bg-backGroundCard" : "bg-white"
          }`}
          onClick={handleClick}
        >
          <div className="flex justify-start items-center ">
            <h1 className="text-[14px] font-extrabold">{title}</h1>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CardContent;

```

================
FILE: src\student\components\darsYar\chatWithBot\LessonInformation.tsx
================

```
// src/student/components/darsYar/chatWithBot/LessonInformation.tsx
import React from "react";

interface LessonInformationProps {
  study: string;
  lesson: string;
}

const LessonInformation: React.FC<LessonInformationProps> = ({ study, lesson }) => {
 
  return (
    <div className="flex justify-between items-center py-[8px] infoGradient bg-backGround-1 px-[16px] fixed w-full top-[52px] z-40 mb-4">
      <div>
        <h1 className="text-[14px]">Ù¾Ø§Ø³Ø® Ú¯ÙˆÛŒÛŒ Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ú©ØªØ§Ø¨ {study}</h1>
      </div>
      <div className="bg-white rounded-[16px] px-[16px] py-[4px]">
        <h1 className="text-[14px] font-extrabold">{lesson}</h1>
      </div>
    </div>
  );
};

export default LessonInformation;
```

================
FILE: src\student\components\darsYar\chatWithBot\HeroSection.tsx
================

```
import React from 'react'
import happyFace from './../../../../assets/images/happyFace.png'

const HeroSection = () => {
  return (
    <div className='flex justify-center h-screen items-center flex-col'>
      <img src={happyFace} className='mb-[32px]'/>
      <h1 className='text-[16px] font-extrabold'>Ú†Ø·ÙˆØ± Ù…ÛŒØªÙˆÙ†Ù… Ú©Ù…Ú©ØªÙˆÙ† Ú©Ù†Ù…</h1>
    </div>
  )
}

export default HeroSection

```

================
FILE: src\student\components\darsYar\chatWithBot\ChatBot.tsx
================

```

```

================
FILE: src\teacher\components\contentContainer\students\StudentsActivities.tsx
================

```
import React from 'react';
import StudentActivity from './StudentActivity';
import { useQuery } from '@tanstack/react-query';
import axios from 'axios';

interface Class {
    id: string;
    name: string;
}

interface Student {
  id: string;
  full_name: string;
  last_activity_at: string;
  activity_status: 'Active' | 'Inactive';
  current_mood: {
    emoji: string;
    text: string;
  } | null; // Allow current_mood to be null
}

const StudentsActivities = () => {
    const { data: classes, isLoading: isLoadingClasses } = useQuery<Class[]>({
        queryKey: ['teacherClasses'],
        queryFn: async () => {
            console.log("API CALL: fetching classes for teacher");
            const res = await axios.get('https://kiddo2.pythonanywhere.com/api/v1/academics/classes/');
            console.log("API RESPONSE: fetching classes success", res.data);
            return res.data;
        },
        staleTime: 300000, // Cache for 5 minutes
    });

    const classId = classes?.[0]?.id;

    const { data: students, isLoading: isLoadingStudents, isError, error } = useQuery<Student[]>({
        queryKey: ['students', classId],
        queryFn: async () => {
            console.log(`API CALL: fetching students for class ${classId}`);
            const res = await axios.get(`https://kiddo2.pythonanywhere.com/api/v1/academics/classes/${classId}/students/`);
            console.log(`API RESPONSE: fetching students for class ${classId} success`, res.data);
            return res.data;
        },
        enabled: !!classId,
    });
    
    
    const isLoading = isLoadingClasses || isLoadingStudents;
    
    if (isLoading) {
        return <div className="p-4 text-center">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†...</div>;
    }

    if (isError) {
        console.error("API ERROR: fetching students", error);
        return <div className="p-4 text-center text-red-500">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†.</div>;
    }

    return (
        <div className="border-[2px] border-borderColor-1 rounded-[24px] bg-white">
            {students && students.map((student, index) => (
                <React.Fragment key={student.id}>
                    <StudentActivity student={student} />
                    {index < students.length - 1 && <hr className="mx-4 border-t-[1.5px] border-backGround-1" />}
                </React.Fragment>
            ))}
        </div>
    );
};

export default StudentsActivities;
```

================
FILE: src\teacher\components\contentContainer\students\StudentActivity.tsx
================

```
import React from 'react';
import smallhappyface from './../../../../assets/images/smallhappyface.png';
import recent from './../../../../assets/images/recent.png';
import { FluentEmoji } from '@lobehub/ui';
// Define the shape of the student data we expect as a prop
interface Student {
  id: string;
  full_name: string;
  last_activity_at: string;
  activity_status: 'Active' | 'Inactive';
  current_mood: {
    emoji: string;
    text: string;
  } | null; // It's important to allow this to be null
}

interface StudentActivityProps {
  // The component receives a single student object
  student: Student;
}

const StudentActivity: React.FC<StudentActivityProps> = ({ student }) => {
  // Helper function to format date string into a more readable Persian format
  const formatDate = (dateString: string) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return '';
    const options: Intl.DateTimeFormatOptions = {
      month: 'long',
      day: 'numeric',
    };
    return new Intl.DateTimeFormat('fa-IR', options).format(date);
  };

  // Map the English activity status from API to Persian
  const activityStatusMap = {
    Active: 'ÙØ¹Ø§Ù„',
    Inactive: 'ØºÛŒØ±ÙØ¹Ø§Ù„',
  };

  return (
    <div>
      <div className="flex p-[16px] gap-[16px] items-center">
        <div>
          <img  src={smallhappyface} alt="student icon" />
        </div>
        <div className="flex flex-col w-full">
          {/* Top row with name and status tags */}
          <div className="flex justify-between items-center mb-[8px]">
            <div className="flex">
              <h1 className="font-extrabold text-[14px]">{student.full_name}</h1>
            </div>
            <div className="flex gap-x-2">
              <p className="bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]">
                {activityStatusMap[student.activity_status] || student.activity_status}
              </p>
              {/* Only render the mood tag if current_mood is not null */}
              
                <p className="bg-backGround-1 px-[8px] rounded-[16px] text-[10px] py-[2px]">
                  <p><FluentEmoji emoji="ğŸ™‚" type="anim" size={16}/></p>
                </p>
             
            </div>
          </div>
          {/* Bottom row with last activity date */}
          <div className="flex justify-between items-center">
            <div className="flex">
              <h1 className="font-extrabold text-[10px]">
                Ø¢Ø®Ø±ÛŒÙ† ÙØ¹Ø§Ù„ÛŒØª : {(student.last_activity_at)?(formatDate(student.last_activity_at)):(<span>Ø¨Ø¯ÙˆÙ† ÙØ¹Ø§Ù„ÛŒØª</span>)}
              </h1>
            </div>
           <div>
            <img src={recent}/>
           </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default StudentActivity;
```

================
FILE: src\teacher\components\contentContainer\reports\StudentReports.tsx
================

```
import React from 'react';
import { ChatEvent } from '../../../../types/api';
import { FluentEmoji } from '@lobehub/fluent-emoji';

interface StudentReportsProps {
  event: ChatEvent;
  onOpenModal: (eventId: string) => void;
}

const StudentReports: React.FC<StudentReportsProps> = ({ event, onOpenModal }) => {
  return (
    <div className="mb-4 pt-4 first:pt-0 " onClick={() => onOpenModal(event.id)}>
      <div className="flex justify-between items-start">
        {/* Container for Name, Emoji, and Overview */}
        <div className='flex-grow'>
          <div className="flex items-center gap-x-2 mb-2 ">
            <div className='p-2 rounded-[24px] bg-backGround-1'>
              <FluentEmoji emoji={event.emoji} size={24} />
            </div>
            <h1 className="font-bold text-sm">{event.student_name}</h1>
          </div>
          <p className="text-[12px] text-gray-600 line-clamp-2 pr-1">{event.overview}</p>
        </div>

        {/* Button on the far right */}
        <button  className='p-1 flex-shrink-0 ml-2'>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform='rotate(270)'>
            <path d="M15.7071 16.7071C16.0976 16.3166 16.0976 15.6834 15.7071 15.2929L10.4142 10L15.7071 4.70711C16.0976 4.31658 16.0976 3.68342 15.7071 3.29289C15.3166 2.90237 14.6834 2.90237 14.2929 3.29289L8.29289 9.29289C7.90237 9.68342 7.90237 10.3166 8.29289 10.7071L14.2929 16.7071C14.6834 17.0976 15.3166 17.0976 15.7071 16.7071Z" fill="#333333"/>
          </svg>
        </button>
      </div>
    </div>
  );
};

export default StudentReports;
```

================
FILE: src\teacher\components\contentContainer\reports\ReportTools.tsx
================

```
import React from "react";


interface ReportToolsProps {
  title: string;
  onClick: () => void;
  image: string;
  isSelected?: boolean;
}

const ReportTools: React.FC<ReportToolsProps> = ({ title, onClick, image, isSelected = false }) => {
  const isDefaultSelection = title === 'Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§' || title === 'Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡Ø§';
  const shouldShowPurple = isSelected && !isDefaultSelection;

  return (
    <div className={`${shouldShowPurple ? 'onClicked-box' : 'buttonClicked-box'} buttonClicked-box w-full`}>
      <div className={`flex justify-start items-center rounded-[16px] p-[16px] py-[4px] ${
        shouldShowPurple ? 'bg-[#F2EFFF]' : 'bg-white'
      }`}>
       <button onClick={onClick} className="w-full ">
         <div className="flex justify-around items-center">
          <div className="flex justify-start items-center">
            <img src={image} className="pl-[8px]"/>
          <h1 className={`text-[14px] `}>{title}</h1>
          </div>
         <div>
           <button className='flex-shrink-0 mt-1'>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform='rotate(270)'>
            <path d="M15.7071 16.7071C16.0976 16.3166 16.0976 15.6834 15.7071 15.2929L10.4142 10L15.7071 4.70711C16.0976 4.31658 16.0976 3.68342 15.7071 3.29289C15.3166 2.90237 14.6834 2.90237 14.2929 3.29289L8.29289 9.29289C7.90237 9.68342 7.90237 10.3166 8.29289 10.7071L14.2929 16.7071C14.6834 17.0976 15.3166 17.0976 15.7071 16.7071Z" fill={ "#333333"}/>
          </svg>
        </button>
         </div>
        </div>
       </button>
      </div>
    </div>
  );
};
export default ReportTools;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\ToolsModal.tsx
================

```
// src/teacher/components/contentContainer/reports/modals/ToolsModal.tsx
import React, { useState } from 'react';
import Modal from '../../Modal';
import Tools from './Tools';
import ChatButton from '../../../../../components/common/ChatButton';

interface ToolsModalProps {
  isModalOpen: boolean;
  handleCloseModal: () => void;
  initialSelection: string;
  onConfirm: (selection: string) => void;
}

const ToolsModal: React.FC<ToolsModalProps> = ({ isModalOpen, handleCloseModal, initialSelection, onConfirm }) => {
  const [activeTool, setActiveTool] = useState<string>(initialSelection);

  const toolsList = [
    { name: "Ø¯Ø±Ø³â€ŒÛŒØ§Ø±" },
    { name: "Ú©Ù†Ø¬Ú©Ø§Ùˆ Ø´Ùˆ" },
    { name: "ØªØ±Ú©ÛŒØ¨ Ú©Ù†" },
    { name: "Ø¢Ø²Ù…ÙˆÙ† Ø³Ø§Ø²" },
  ];
  const allToolsOptionName = "Ù‡Ù…Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡Ø§";

  const handleConfirmClick = () => {
    onConfirm(activeTool);
  };

  return (
    <div>
      <Modal isOpen={isModalOpen} onClose={handleCloseModal}>
        <div className='flex flex-col pb-20'>
          <h2 className="text-center font-bold text-lg mb-4">Ù„Ø·ÙØ§ Ø§Ø¨Ø²Ø§Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯</h2>
          
          <Tools
            name={allToolsOptionName}
            isActive={activeTool === allToolsOptionName}
            onClick={setActiveTool}
          />

          {toolsList.map((tool) => (
            <Tools
              key={tool.name}
              name={tool.name}
              isActive={activeTool === tool.name}
              onClick={setActiveTool}
            />
          ))}

          <div onClick={handleConfirmClick}>
            <ChatButton textButton={'ØªØ§ÛŒÛŒØ¯'} />
          </div>
        </div>
      </Modal>
    </div>
  );
}

export default ToolsModal;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\Tools.tsx
================

```
// src/components/ToolsModal/Tools.tsx
import React from 'react';

interface ToolsProps {
  name: string; // Add a name prop to identify each tool
  isActive: boolean;
  onClick: (name: string) => void;
}

const Tools: React.FC<ToolsProps> = ({ name, isActive, onClick }) => {

  const handleClick = () => {
    onClick(name);
  };

  return (
    <div className='mb-[12px] ' onClick={handleClick}>
      <div className={` ${isActive ? 'onClickedButton-box transform translate-y-1' : 'buttonClicked-box'}  `}> {/* Added a class for active state */}
        <div className={`${isActive ? 'bg-backGroundCard' : 'bg-white'} flex justify-center items-center  rounded-[16px] p-[16px] gap-[16px] pl-[24px]`}>
          <h1>{name}</h1> 
        </div>
      </div>
    </div>
  );
};

export default Tools;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\ReportDetailModal.tsx
================

```
// src/teacher/components/contentContainer/reports/modals/ReportDetailModal.tsx
import React from 'react'
import Modal from '../../Modal';
import ChatButton from '../../../../../components/common/ChatButton';
import { useQuery } from '@tanstack/react-query';
import { fetchEventDetails } from '../../../../../api-teacher';
import { useNavigate } from 'react-router-dom';
import { FluentEmoji } from '@lobehub/ui'
interface ReportDetailModalProps {
  eventId: string | null;
  onClose: () => void;
}

const ReportDetailModal: React.FC<ReportDetailModalProps> = ({ eventId, onClose }) => {
  const navigate = useNavigate();
  
  const { data: event, isLoading, isError } = useQuery({
    queryKey: ['eventDetails', eventId],
    queryFn: () => fetchEventDetails(eventId!), // The '!' asserts eventId is not null here
    enabled: !!eventId, // Only run query if eventId is not null
  });
  let level
  if(event?.level==='DANGER'){
    level='Ù‡Ø´Ø¯Ø§Ø± Ø¬Ø¯ÛŒ'
  }else if(event?.level==='CONCERN'){
    level='Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡'
  } else{
    level='Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ'
  }
  const handleViewChat = () => {
    if (event?.session_id) {
      // This route might need to be adjusted based on your final routing for specific chats
      navigate(`/teacher/chat/${event.session_id}`);
    }
    onClose(); // Close modal after navigation
  };
  
  return (
    <div>
      <Modal isOpen={!!eventId} onClose={onClose}>
        {isLoading && <p className='text-center py-8'>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª...</p>}
        {isError && <p className='text-center py-8 text-red-500'>Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú¯Ø²Ø§Ø±Ø´.</p>}
        {event && (
          <div className='flex flex-col justify-center gap-4 pb-20'>
            <div className='flex flex-col items-center gap-2'>
              <div className='p-2 bg-backGround-1 rounded-full'>
                 <FluentEmoji emoji={event.emoji} size={70} type="anim" />
              </div>
                <h1 className='font-bold text-lg'>{event.student_name}</h1>
                <div className='flex justify-center gap-2'>
                  <p className='bg-backGround-1 px-3 py-1 rounded-full text-xs'>{event.subject_name}</p>
                  <p className='bg-backGround-1 px-3 py-1 rounded-full text-xs'>{level}</p>
                </div>
            </div>
            
            <div className='text-right'>
                <h2 className='font-bold mb-1'>ØªÙˆØ¶ÛŒØ­Ø§Øª</h2>
                <p className='text-sm text-gray-700'>{event.explanation}</p>
            </div>

            <div onClick={handleViewChat}>
              <ChatButton textButton={'Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú†Øª'} />
            </div>
          </div>
        )}
      </Modal>
    </div>
  )
}

export default ReportDetailModal;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\Lessons.tsx
================

```
// src/components/ToolsModal/Tools.tsx
import React from 'react';

interface ToolsProps {
  name: string; // Add a name prop to identify each tool
  isActive: boolean;
  onClick: (name: string) => void;
}

const Tools: React.FC<ToolsProps> = ({ name, isActive, onClick }) => {

  const handleClick = () => {
    onClick(name);
  };

  return (
   <div >
     <div className='mb-[12px] ' onClick={handleClick}>
      <div className={` ${isActive ? 'onClickedButton-box transform translate-y-1' : 'buttonClicked-box'}  `}> {/* Added a class for active state */}
        <div className={`${isActive ? 'bg-backGroundCard' : 'bg-white'} flex justify-center items-center  rounded-[16px] p-[16px] gap-[16px] pl-[24px]`}>
          <h1>{name}</h1> 
        </div>
      </div>
    </div>
  
   </div>
  )
};

export default Tools;
```

================
FILE: src\teacher\components\contentContainer\reports\modals\LessonModal.tsx
================

```



import React, { useState } from 'react';
import Modal from '../../Modal';
import Tools from './Tools'; // Re-using the 'Tools' component for styling
import ChatButton from '../../../../../components/common/ChatButton';

interface LessonModalProps {
  isModalOpen: boolean;
  handleCloseModal: () => void;
  initialSelection: string;
  onConfirm: (selection: string) => void;
}

const LessonModal: React.FC<LessonModalProps> = ({ isModalOpen, handleCloseModal, initialSelection, onConfirm }) => {
  const [activeLesson, setActiveLesson] = useState<string>(initialSelection);

  const lessonsList = [
    { name: "Ø¹Ù„ÙˆÙ…" },
    { name: "Ø±ÛŒØ§Ø¶ÛŒ" },
    { name: "ÙØ§Ø±Ø³ÛŒ" },
    { name: "ØªØ§Ø±ÛŒØ®" },
  ];

  const allLessonsOptionName = "Ù‡Ù…Ù‡ Ø¯Ø±Ø³ Ù‡Ø§";

  const handleConfirmClick = () => {
    onConfirm(activeLesson);
  };

  return (
    <div>
      <Modal isOpen={isModalOpen} onClose={handleCloseModal}>
        <div className='flex flex-col pb-20'>
          <h2 className="text-center font-bold text-lg mb-4">Ù„Ø·ÙØ§ Ø¯Ø±Ø³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯</h2>
          
          <Tools
            name={allLessonsOptionName}
            isActive={activeLesson === allLessonsOptionName}
            onClick={setActiveLesson}
          />
          
          <div className='grid grid-cols-2 gap-x-3'>
            {lessonsList.map((lesson) => (
              <Tools
                key={lesson.name}
                name={lesson.name}
                isActive={activeLesson === lesson.name}
                onClick={setActiveLesson}
              />
            ))}
          </div>

          <div onClick={handleConfirmClick}>
            <ChatButton textButton={'ØªØ§ÛŒÛŒØ¯'} />
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default LessonModal;
```

